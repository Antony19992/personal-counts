"use strict";var rX=Object.defineProperty,iX=Object.defineProperties,sX=Object.getOwnPropertyDescriptors,nF=Object.getOwnPropertySymbols,oX=Object.prototype.hasOwnProperty,aX=Object.prototype.propertyIsEnumerable,rF=(te,nt,kt)=>nt in te?rX(te,nt,{enumerable:!0,configurable:!0,writable:!0,value:kt}):te[nt]=kt,gf=(te,nt)=>{for(var kt in nt||(nt={}))oX.call(nt,kt)&&rF(te,kt,nt[kt]);if(nF)for(var kt of nF(nt))aX.call(nt,kt)&&rF(te,kt,nt[kt]);return te},mf=(te,nt)=>iX(te,sX(nt));(self.webpackChunkcontas=self.webpackChunkcontas||[]).push([[179],{317:()=>{function te(t){return"function"==typeof t}function nt(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const kt=nt(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function _a(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class dn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(te(r))try{r()}catch(s){e=s instanceof kt?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{K0(s)}catch(o){e=null!=e?e:[],o instanceof kt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new kt(e)}}add(e){var n;if(e&&e!==this)if(this.closed)K0(e);else{if(e instanceof dn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&_a(n,e)}remove(e){const{_finalizers:n}=this;n&&_a(n,e),e instanceof dn&&e._removeParent(this)}}dn.EMPTY=(()=>{const t=new dn;return t.closed=!0,t})();const G0=dn.EMPTY;function W0(t){return t instanceof dn||t&&"closed"in t&&te(t.remove)&&te(t.add)&&te(t.unsubscribe)}function K0(t){te(t)?t():t.unsubscribe()}const xi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$c={setTimeout(t,e,...n){const{delegate:r}=$c;return(null==r?void 0:r.setTimeout)?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=$c;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Q0(t){$c.setTimeout(()=>{const{onUnhandledError:e}=xi;if(!e)throw t;e(t)})}function Y0(){}const iF=yf("C",void 0,void 0);function yf(t,e,n){return{kind:t,value:e,error:n}}let Ai=null;function Hc(t){if(xi.useDeprecatedSynchronousErrorHandling){const e=!Ai;if(e&&(Ai={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ai;if(Ai=null,n)throw r}}else t()}class vf extends dn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,W0(e)&&e.add(this)):this.destination=dF}static create(e,n,r){return new wa(e,n,r)}next(e){this.isStopped?wf(function oF(t){return yf("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?wf(function sF(t){return yf("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wf(iF,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const uF=Function.prototype.bind;function _f(t,e){return uF.call(t,e)}class cF{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qc(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qc(r)}else qc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qc(n)}}}class wa extends vf{constructor(e,n,r){let i;if(super(),te(e)||!e)i={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let s;this&&xi.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_f(e.next,s),error:e.error&&_f(e.error,s),complete:e.complete&&_f(e.complete,s)}):i=e}this.destination=new cF(i)}}function qc(t){xi.useDeprecatedSynchronousErrorHandling?function aF(t){xi.useDeprecatedSynchronousErrorHandling&&Ai&&(Ai.errorThrown=!0,Ai.error=t)}(t):Q0(t)}function wf(t,e){const{onStoppedNotification:n}=xi;n&&$c.setTimeout(()=>n(t,e))}const dF={closed:!0,next:Y0,error:function lF(t){throw t},complete:Y0},Df="function"==typeof Symbol&&Symbol.observable||"@@observable";function Mi(t){return t}let Re=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function fF(t){return t&&t instanceof vf||function hF(t){return t&&te(t.next)&&te(t.error)&&te(t.complete)}(t)&&W0(t)}(n)?n:new wa(n,r,i);return Hc(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=X0(r))((i,s)=>{const o=new wa({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Df](){return this}pipe(...n){return function Z0(t){return 0===t.length?Mi:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=X0(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function X0(t){var e;return null!==(e=null!=t?t:xi.Promise)&&void 0!==e?e:Promise}const pF=nt(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let mr=(()=>{class t extends Re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new J0(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new pF}next(n){Hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?G0:(this.currentObservers=null,s.push(n),new dn(()=>{this.currentObservers=null,_a(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Re;return n.source=this,n}}return t.create=(e,n)=>new J0(e,n),t})();class J0 extends mr{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:G0}}function eb(t){return te(null==t?void 0:t.lift)}function dt(t){return e=>{if(eb(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ht(t,e,n,r,i){return new gF(t,e,n,r,i)}class gF extends vf{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ye(t,e){return dt((n,r)=>{let i=0;n.subscribe(ht(r,s=>{r.next(t.call(e,s,i++))}))})}function qr(t){return this instanceof qr?(this.v=t,this):new qr(t)}function rb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof qr?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function ib(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function If(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const sb=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function ob(t){return te(null==t?void 0:t.then)}function ab(t){return te(t[Df])}function ub(t){return Symbol.asyncIterator&&te(null==t?void 0:t[Symbol.asyncIterator])}function cb(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const lb=function LF(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function db(t){return te(null==t?void 0:t[lb])}function hb(t){return rb(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield qr(n.read());if(i)return yield qr(void 0);yield yield qr(r)}}finally{n.releaseLock()}})}function fb(t){return te(null==t?void 0:t.getReader)}function Hn(t){if(t instanceof Re)return t;if(null!=t){if(ab(t))return function VF(t){return new Re(e=>{const n=t[Df]();if(te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(sb(t))return function BF(t){return new Re(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(ob(t))return function jF(t){return new Re(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Q0)})}(t);if(ub(t))return pb(t);if(db(t))return function UF(t){return new Re(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(fb(t))return function $F(t){return pb(hb(t))}(t)}throw cb(t)}function pb(t){return new Re(e=>{(function HF(t,e){var n,r,i,s;return function tb(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ib(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function yr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function rt(t,e,n=1/0){return te(e)?rt((r,i)=>ye((s,o)=>e(r,s,i,o))(Hn(t(r,i))),n):("number"==typeof e&&(n=e),dt((r,i)=>function qF(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let m=!1;Hn(n(g,l++)).subscribe(ht(e,_=>{null==i||i(_),s?f(_):e.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){const _=u.shift();o?yr(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return t.subscribe(ht(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(r,i,t,n)))}function Da(t=1/0){return rt(Mi,t)}const vr=new Re(t=>t.complete());function Tf(t){return t[t.length-1]}function ba(t){return function GF(t){return t&&te(t.schedule)}(Tf(t))?t.pop():void 0}function zc(t,e=0){return dt((n,r)=>{n.subscribe(ht(r,i=>yr(r,t,()=>r.next(i),e),()=>yr(r,t,()=>r.complete(),e),i=>yr(r,t,()=>r.error(i),e)))})}function Gc(t,e=0){return dt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function gb(t,e){if(!t)throw new Error("Iterable cannot be null");return new Re(n=>{yr(n,e,()=>{const r=t[Symbol.asyncIterator]();yr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Et(t,e){return e?function eP(t,e){if(null!=t){if(ab(t))return function QF(t,e){return Hn(t).pipe(Gc(e),zc(e))}(t,e);if(sb(t))return function ZF(t,e){return new Re(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(ob(t))return function YF(t,e){return Hn(t).pipe(Gc(e),zc(e))}(t,e);if(ub(t))return gb(t,e);if(db(t))return function XF(t,e){return new Re(n=>{let r;return yr(n,e,()=>{r=t[lb](),yr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>te(null==r?void 0:r.return)&&r.return()})}(t,e);if(fb(t))return function JF(t,e){return gb(hb(t),e)}(t,e)}throw cb(t)}(t,e):Hn(t)}function Sf(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new wa({next:()=>{r.unsubscribe(),t()}});return e(...n).subscribe(r)}function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function he(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(he).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Af(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const rP=ve({__forward_ref__:ve});function Mf(t){return t.__forward_ref__=Mf,t.toString=function(){return he(this())},t}function K(t){return function mb(t){return"function"==typeof t&&t.hasOwnProperty(rP)&&t.__forward_ref__===Mf}(t)?t():t}class de extends Error{constructor(e,n){super(function Nf(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function H(t){return"string"==typeof t?t:null==t?"":String(t)}function ft(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():H(t)}function Wc(t,e){const n=e?` in ${e}`:"";throw new de(-201,`No provider for ${ft(t)} found${n}`)}function Jt(t,e){null==t&&function fe(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function ie(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function zr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Rf(t){return yb(t,Kc)||yb(t,_b)}function yb(t,e){return t.hasOwnProperty(e)?t[e]:null}function vb(t){return t&&(t.hasOwnProperty(Of)||t.hasOwnProperty(lP))?t[Of]:null}const Kc=ve({\u0275prov:ve}),Of=ve({\u0275inj:ve}),_b=ve({ngInjectableDef:ve}),lP=ve({ngInjectorDef:ve});var U=(()=>((U=U||{})[U.Default=0]="Default",U[U.Host=1]="Host",U[U.Self=2]="Self",U[U.SkipSelf=4]="SkipSelf",U[U.Optional=8]="Optional",U))();let kf;function Gr(t){const e=kf;return kf=t,e}function wb(t,e,n){const r=Rf(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&U.Optional?null:void 0!==e?e:void Wc(he(t),"Injector")}function Wr(t){return{toString:t}.toString()}var Cn=(()=>((Cn=Cn||{})[Cn.OnPush=0]="OnPush",Cn[Cn.Default=1]="Default",Cn))(),qn=(()=>{return(t=qn||(qn={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",qn;var t})();const hP="undefined"!=typeof globalThis&&globalThis,fP="undefined"!=typeof window&&window,pP="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,me=hP||"undefined"!=typeof global&&global||fP||pP,Ns={},_e=[],Qc=ve({\u0275cmp:ve}),Ff=ve({\u0275dir:ve}),Pf=ve({\u0275pipe:ve}),Db=ve({\u0275mod:ve}),wr=ve({\u0275fac:ve}),Ea=ve({__NG_ELEMENT_ID__:ve});let gP=0;function zn(t){return Wr(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Cn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||_e,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||qn.Emulated,id:"c",styles:t.styles||_e,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,s=t.features,o=t.pipes;return r.id+=gP++,r.inputs=Ib(t.inputs,n),r.outputs=Ib(t.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(bb):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(Eb):null,r})}function bb(t){return pt(t)||function Kr(t){return t[Ff]||null}(t)}function Eb(t){return function Ri(t){return t[Pf]||null}(t)}const Cb={};function Ni(t){return Wr(()=>{const e={type:t.type,bootstrap:t.bootstrap||_e,declarations:t.declarations||_e,imports:t.imports||_e,exports:t.exports||_e,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Cb[t.id]=t.type),e})}function Ib(t,e){if(null==t)return Ns;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const Ct=zn;function pt(t){return t[Qc]||null}function hn(t,e){const n=t[Db]||null;if(!n&&!0===e)throw new Error(`Type ${he(t)} does not have '\u0275mod' property.`);return n}const G=11;function Gn(t){return Array.isArray(t)&&"object"==typeof t[1]}function Tn(t){return Array.isArray(t)&&!0===t[1]}function Bf(t){return 0!=(8&t.flags)}function Jc(t){return 2==(2&t.flags)}function el(t){return 1==(1&t.flags)}function Sn(t){return null!==t.template}function DP(t){return 0!=(512&t[2])}function Pi(t,e){return t.hasOwnProperty(wr)?t[wr]:null}class CP{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Sb(t){return t.type.prototype.ngOnChanges&&(t.setInput=TP),IP}function IP(){const t=Ab(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Ns)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function TP(t,e,n,r){const i=Ab(t)||function SP(t,e){return t[xb]=e}(t,{previous:Ns,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new CP(u&&u.currentValue,e,o===Ns),t[r]=e}const xb="__ngSimpleChanges__";function Ab(t){return t[xb]||null}let qf;function ke(t){return!!t.listen}const Mb={createRenderer:(t,e)=>function zf(){return void 0!==qf?qf:"undefined"!=typeof document?document:void 0}()};function qe(t){for(;Array.isArray(t);)t=t[0];return t}function tn(t,e){return qe(e[t.index])}function Gf(t,e){return t.data[e]}function nn(t,e){const n=e[t];return Gn(n)?n:n[0]}function Wf(t){return 128==(128&t[2])}function Qr(t,e){return null==e?null:t[e]}function Rb(t){t[18]=0}function Kf(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const q={lFrame:$b(null),bindingsEnabled:!0};function kb(){return q.bindingsEnabled}function E(){return q.lFrame.lView}function ae(){return q.lFrame.tView}function Ye(){let t=Pb();for(;null!==t&&64===t.type;)t=t.parent;return t}function Pb(){return q.lFrame.currentTNode}function Wn(t,e){const n=q.lFrame;n.currentTNode=t,n.isParent=e}function Qf(){return q.lFrame.isParent}function Ls(){return q.lFrame.bindingIndex++}function qP(t,e){const n=q.lFrame;n.bindingIndex=n.bindingRootIndex=t,Zf(e)}function Zf(t){q.lFrame.currentDirectiveIndex=t}function Jf(t){q.lFrame.currentQueryIndex=t}function GP(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function jb(t,e,n){if(n&U.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&U.Host||(i=GP(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=q.lFrame=Ub();return r.currentTNode=e,r.lView=t,!0}function rl(t){const e=Ub(),n=t[1];q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ub(){const t=q.lFrame,e=null===t?null:t.child;return null===e?$b(t):e}function $b(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Hb(){const t=q.lFrame;return q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const qb=Hb;function il(){const t=Hb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Lt(){return q.lFrame.selectedIndex}function Yr(t){q.lFrame.selectedIndex=t}function sl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),u&&(t.viewHooks||(t.viewHooks=[])).push(-n,u),c&&((t.viewHooks||(t.viewHooks=[])).push(n,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,c)),null!=l&&(t.destroyHooks||(t.destroyHooks=[])).push(n,l)}}function ol(t,e,n){zb(t,e,3,n)}function al(t,e,n,r){(3&t[2])===n&&zb(t,e,n,r)}function ep(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function zb(t,e,n,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[18]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[18]+=65536),(a<s||-1==s)&&(tL(t,n,e,u),t[18]=(4294901760&t[18])+u+2),u++}function tL(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class xa{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ul(t,e,n){const r=ke(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];np(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Gb(t){return 3===t||4===t||6===t}function np(t){return 64===t.charCodeAt(0)}function cl(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Wb(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Wb(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Kb(t){return-1!==t}function Vs(t){return 32767&t}function Bs(t,e){let n=function oL(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let rp=!0;function ll(t){const e=rp;return rp=t,e}let aL=0;function Ma(t,e){const n=sp(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ip(r.data,t),ip(e,null),ip(r.blueprint,null));const i=dl(t,e),s=t.injectorIndex;if(Kb(i)){const o=Vs(i),a=Bs(i,e),u=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function ip(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sp(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function dl(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function hl(t,e,n){!function uL(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ea)&&(r=n[Ea]),null==r&&(r=n[Ea]=aL++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Zb(t,e,n){if(n&U.Optional)return t;Wc(e,"NodeInjector")}function Xb(t,e,n,r){if(n&U.Optional&&void 0===r&&(r=null),0==(n&(U.Self|U.Host))){const i=t[9],s=Gr(void 0);try{return i?i.get(e,r,n&U.Optional):wb(e,r,n&U.Optional)}finally{Gr(s)}}return Zb(r,e,n)}function Jb(t,e,n,r=U.Default,i){if(null!==t){const s=function hL(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ea)?t[Ea]:void 0;return"number"==typeof e?e>=0?255&e:lL:e}(n);if("function"==typeof s){if(!jb(e,t,r))return r&U.Host?Zb(i,n,r):Xb(e,n,r,i);try{const o=s(r);if(null!=o||r&U.Optional)return o;Wc(n)}finally{qb()}}else if("number"==typeof s){let o=null,a=sp(t,e),u=-1,c=r&U.Host?e[16][6]:null;for((-1===a||r&U.SkipSelf)&&(u=-1===a?dl(t,e):e[a+8],-1!==u&&nE(r,!1)?(o=e[1],a=Vs(u),e=Bs(u,e)):a=-1);-1!==a;){const l=e[1];if(tE(s,a,l.data)){const d=dL(a,e,n,o,r,c);if(d!==eE)return d}u=e[a+8],-1!==u&&nE(r,e[1].data[a+8]===c)&&tE(s,a,e)?(o=l,a=Vs(u),e=Bs(u,e)):a=-1}}}return Xb(e,n,r,i)}const eE={};function lL(){return new js(Ye(),E())}function dL(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],l=function fl(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&Sn(f)&&f.type===n)return u}return null}(a,o,n,null==r?Jc(a)&&rp:r!=o&&0!=(3&a.type),i&U.Host&&s===a);return null!==l?Na(e,o,l,a):eE}function Na(t,e,n,r){let i=t[n];const s=e.data;if(function nL(t){return t instanceof xa}(i)){const o=i;o.resolving&&function iP(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new de(-200,`Circular dependency in DI detected for ${t}${n}`)}(ft(s[n]));const a=ll(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Gr(o.injectImpl):null;jb(t,r,U.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function eL(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Sb(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&Gr(u),ll(a),o.resolving=!1,qb()}}return i}function tE(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function nE(t,e){return!(t&U.Self||t&U.Host&&e)}class js{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Jb(this._tNode,this._lView,e,r,n)}}const $s="__parameters__";function qs(t,e,n){return Wr(()=>{const r=function ap(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty($s)?u[$s]:Object.defineProperty(u,$s,{value:[]})[$s];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class se{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ie({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gL=new se("AnalyzeForEntryComponents");function Kn(t,e){t.forEach(n=>Array.isArray(n)?Kn(n,e):e(n))}function iE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function pl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Pa={},dp="__NG_DI_FLAG__",ml="ngTempTokenPath",IL=/\n/gm,cE="__source",SL=ve({provide:String,useValue:ve});let La;function lE(t){const e=La;return La=t,e}function xL(t,e=U.Default){if(void 0===La)throw new de(203,"");return null===La?wb(t,void 0,e):La.get(t,e&U.Optional?null:void 0,e)}function V(t,e=U.Default){return(function dP(){return kf}()||xL)(K(t),e)}const AL=V;function hp(t){const e=[];for(let n=0;n<t.length;n++){const r=K(t[n]);if(Array.isArray(r)){if(0===r.length)throw new de(900,"");let i,s=U.Default;for(let o=0;o<r.length;o++){const a=r[o],u=ML(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(V(i,s))}else e.push(V(r))}return e}function Va(t,e){return t[dp]=e,t.prototype[dp]=e,t}function ML(t){return t[dp]}const yl=Va(qs("Inject",t=>({token:t})),-1),mn=Va(qs("Optional"),8),Ba=Va(qs("SkipSelf"),4);var sn=(()=>((sn=sn||{})[sn.Important=1]="Important",sn[sn.DashCase=2]="DashCase",sn))();const vE="__ngContext__";function Tt(t,e){t[vE]=e}function gp(t){const e=function Ua(t){return t[vE]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function yp(t,e){return undefined(t,e)}function $a(t){const e=t[3];return Tn(e)?e[3]:e}function vp(t){return IE(t[13])}function _p(t){return IE(t[4])}function IE(t){for(;null!==t&&!Tn(t);)t=t[4];return t}function Ws(t,e,n,r,i){if(null!=r){let s,o=!1;Tn(r)?s=r:Gn(r)&&(o=!0,r=r[0]);const a=qe(r);0===t&&null!==n?null==i?NE(e,n,a):Vi(e,n,a,i||null,!0):1===t&&null!==n?Vi(e,n,a,i||null,!0):2===t?function Tp(t,e,n){const r=_l(t,e);r&&function a2(t,e,n,r){ke(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function l2(t,e,n,r,i){const s=n[7];s!==qe(n)&&Ws(e,t,r,s,i);for(let a=10;a<n.length;a++){const u=n[a];Ha(u[1],u,t,e,r,s)}}(e,t,s,n,i)}}function Dp(t,e,n){if(ke(t))return t.createElement(e,n);{const r=null!==n?function NP(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?t.createElement(e):t.createElementNS(r,e)}}function SE(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Kf(i,-1)),n.splice(r,1)}function bp(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&SE(i,r),e>0&&(t[n-1][4]=r[4]);const s=pl(t,10+e);!function JL(t,e){Ha(t,e,e[G],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function xE(t,e){if(!(256&e[2])){const n=e[G];ke(n)&&n.destroyNode&&Ha(t,e,n,3,null,null),function n2(t){let e=t[13];if(!e)return Ep(t[1],t);for(;e;){let n=null;if(Gn(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Gn(e)&&Ep(e[1],e),e=e[3];null===e&&(e=t),Gn(e)&&Ep(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ep(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function o2(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof xa)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];try{u.call(a)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function s2(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+1],a="function"==typeof o?o(e):qe(e[o]),u=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?a.removeEventListener(n[s],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(t,e),1===e[1].type&&ke(e[G])&&e[G].destroy();const n=e[17];if(null!==n&&Tn(e[3])){n!==e[3]&&SE(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function AE(t,e,n){return function ME(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===qn.None||i===qn.Emulated)return null}return tn(r,n)}(t,e.parent,n)}function Vi(t,e,n,r,i){ke(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function NE(t,e,n){ke(t)?t.appendChild(e,n):e.appendChild(n)}function RE(t,e,n,r,i){null!==r?Vi(t,e,n,r,i):NE(t,e,n)}function _l(t,e){return ke(t)?t.parentNode(e):e.parentNode}let FE=function kE(t,e,n){return 40&t.type?tn(t,n):null};function wl(t,e,n,r){const i=AE(t,r,e),s=e[G],a=function OE(t,e,n){return FE(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)RE(s,i,n[u],a,!1);else RE(s,i,n,a,!1)}function Dl(t,e){if(null!==e){const n=e.type;if(3&n)return tn(e,t);if(4&n)return Ip(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Dl(t,r);{const i=t[e.index];return Tn(i)?Ip(-1,i):qe(i)}}if(32&n)return yp(e,t)()||qe(t[e.index]);{const r=LE(t,e);return null!==r?Array.isArray(r)?r[0]:Dl($a(t[16]),r):Dl(t,e.next)}}return null}function LE(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ip(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Dl(r,i)}return e[7]}function Sp(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Tt(qe(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Sp(t,e,n.child,r,i,s,!1),Ws(e,t,i,a,s);else if(32&u){const c=yp(n,r);let l;for(;l=c();)Ws(e,t,i,l,s);Ws(e,t,i,a,s)}else 16&u?VE(t,e,r,n,i,s):Ws(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ha(t,e,n,r,i,s){Sp(n,r,t.firstChild,e,i,s,!1)}function VE(t,e,n,r,i,s){const o=n[16],u=o[6].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Ws(e,t,i,u[c],s);else Sp(t,e,u,o[3],i,s,!0)}function BE(t,e,n){ke(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function xp(t,e,n){ke(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Lp(t){return t.ngOriginalError}function $2(t,...e){t.error(...e)}class Wa{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=function U2(t){return t&&t.ngErrorLogger||$2}(e);r(this._console,"ERROR",e),n&&r(this._console,"ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Lp(e);for(;n&&Lp(n);)n=Lp(n);return n||null}}const Q2=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(me))();function Yn(t){return t instanceof Function?t():t}function JE(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const eC="ng-template";function J2(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==JE(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function tC(t){return 4===t.type&&t.value!==eC}function eV(t,e,n){return e===(4!==t.type||n?t.value:eC)}function tV(t,e,n){let r=4;const i=t.attrs||[],s=function iV(t){for(let e=0;e<t.length;e++)if(Gb(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!eV(t,u,n)||""===u&&1===e.length){if(xn(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!J2(t.attrs,c,n)){if(xn(r))return!1;o=!0}continue}const d=nV(8&r?"class":u,i,tC(t),n);if(-1===d){if(xn(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==JE(f,c,0)||2&r&&c!==h){if(xn(r))return!1;o=!0}}}}else{if(!o&&!xn(r)&&!xn(u))return!1;if(o&&xn(u))continue;o=!1,r=u|1&r}}return xn(r)||o}function xn(t){return 0==(1&t)}function nV(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function sV(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function nC(t,e,n=!1){for(let r=0;r<e.length;r++)if(tV(t,e[r],n))return!0;return!1}function rC(t,e){return t?":not("+e.trim()+")":e}function aV(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!xn(o)&&(e+=rC(s,i),i=""),r=o,s=s||!xn(r);n++}return""!==i&&(e+=rC(s,i)),e}const z={};function Vp(t){iC(ae(),E(),Lt()+t,!1)}function iC(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&ol(e,s,n)}else{const s=t.preOrderHooks;null!==s&&al(e,s,0,n)}Yr(n)}function gC(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const o=t.data[s];Jf(i),o.contentQueries(2,e[s],s)}}}function Ka(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Rb(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[G]=a||t&&t[G],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function Qs(t,e,n,r,i){let s=t.data[e];if(null===s)s=function Yp(t,e,n,r,i){const s=Pb(),o=Qf(),u=t.data[e]=function IV(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(t,e,n,r,i),function HP(){return q.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Sa(){const t=q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Wn(s,!0),s}function Ys(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Qa(t,e,n){rl(e);try{const r=t.viewQuery;null!==r&&sg(1,r,n);const i=t.template;null!==i&&mC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&gC(t,e),t.staticViewQueries&&sg(2,t.viewQuery,n);const s=t.components;null!==s&&function bV(t,e){for(let n=0;n<e.length;n++)HV(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,il()}}function Zs(t,e,n,r){const i=e[2];if(256!=(256&i)){rl(e);try{Rb(e),function Lb(t){return q.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&mC(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&ol(e,c,null)}else{const c=t.preOrderHooks;null!==c&&al(e,c,0,null),ep(e,0)}if(function UV(t){for(let e=vp(t);null!==e;e=_p(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(1024&i[2])&&Kf(s,1),i[2]|=1024}}}(e),function jV(t){for(let e=vp(t);null!==e;e=_p(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Wf(r)&&Zs(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&gC(t,e),o){const c=t.contentCheckHooks;null!==c&&ol(e,c)}else{const c=t.contentHooks;null!==c&&al(e,c,1),ep(e,1)}!function wV(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Yr(~i);else{const s=i,o=n[++r],a=n[++r];qP(o,s),a(2,e[s])}}}finally{Yr(-1)}}(t,e);const a=t.components;null!==a&&function DV(t,e){for(let n=0;n<e.length;n++)$V(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&sg(2,u,r),o){const c=t.viewCheckHooks;null!==c&&ol(e,c)}else{const c=t.viewHooks;null!==c&&al(e,c,2),ep(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-73,1024&e[2]&&(e[2]&=-1025,Kf(e[3],-1))}finally{il()}}}function EV(t,e,n,r){const i=e[10],o=function Nb(t){return 4==(4&t[2])}(e);try{!o&&i.begin&&i.begin(),o&&Qa(t,e,r),Zs(t,e,n,r)}finally{!o&&i.end&&i.end()}}function mC(t,e,n,r,i){const s=Lt(),o=2&r;try{Yr(-1),o&&e.length>20&&iC(t,e,20,!1),n(r,i)}finally{Yr(s)}}function Zp(t,e,n){!kb()||(function RV(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Ma(n,e),Tt(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=Sn(u);c&&LV(e,n,u);const l=Na(e,t,a,n);Tt(l,e),null!==o&&VV(0,a-i,l,u,0,o),c&&(nn(n.index,e)[8]=l)}}(t,e,n,tn(n,e)),128==(128&n.flags)&&function OV(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,a=function zP(){return q.lFrame.currentDirectiveIndex}();try{Yr(o);for(let u=r;u<i;u++){const c=t.data[u],l=e[u];Zf(u),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&IC(c,l)}}finally{Yr(-1),Zf(a)}}(t,e,n))}function Xp(t,e,n=tn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function vC(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Al(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Al(t,e,n,r,i,s,o,a,u,c){const l=20+r,d=l+i,h=function CV(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:z);return n}(l,d),f="function"==typeof c?c():c;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function bC(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Jp(t,e,n,r){let i=!1;if(kb()){const s=function kV(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];nC(n,o.selectors,!1)&&(i||(i=[]),hl(Ma(n,e),t,o.type),Sn(o)?(TC(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,SC(n,t.data.length,s.length);for(let l=0;l<s.length;l++){const d=s[l];d.providersResolver&&d.providersResolver(d)}let a=!1,u=!1,c=Ys(t,e,s.length,null);for(let l=0;l<s.length;l++){const d=s[l];n.mergedAttrs=cl(n.mergedAttrs,d.hostAttrs),xC(t,n,e,c,d),PV(c,d,o),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!u&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),u=!0),c++}!function TV(t,e){const r=e.directiveEnd,i=t.data,s=e.attrs,o=[];let a=null,u=null;for(let c=e.directiveStart;c<r;c++){const l=i[c],d=l.inputs,h=null===s||tC(e)?null:BV(d,s);o.push(h),a=bC(d,c,a),u=bC(l.outputs,c,u)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=u}(t,n)}o&&function FV(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new de(-301,!1);r.push(e[i],s)}}}(n,r,o)}return n.mergedAttrs=cl(n.mergedAttrs,n.attrs),i}function CC(t,e,n,r,i,s){const o=s.hostBindings;if(o){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const u=~e.index;(function NV(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(r,i,o)}}function IC(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function TC(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function PV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Sn(e)&&(n[""]=t)}}function SC(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xC(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Pi(i.type)),o=new xa(s,Sn(i),null);t.blueprint[r]=o,n[r]=o,CC(t,e,0,r,Ys(t,n,i.hostVars,z),i)}function LV(t,e,n){const r=tn(e,t),i=vC(n),s=t[10],o=Ml(t,Ka(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function VV(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const c=o[u++],l=o[u++],d=o[u++];null!==a?r.setInput(n,d,c,l):n[l]=d}}}function BV(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function AC(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function $V(t,e){const n=nn(e,t);if(Wf(n)){const r=n[1];80&n[2]?Zs(r,n,r.template,n[8]):n[5]>0&&tg(n)}}function tg(t){for(let r=vp(t);null!==r;r=_p(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];Zs(o,s,o.template,s[8])}else s[5]>0&&tg(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=nn(n[r],t);Wf(i)&&i[5]>0&&tg(i)}}function HV(t,e){const n=nn(e,t),r=n[1];(function qV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Qa(r,n,n[8])}function Ml(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ng(t){for(;t;){t[2]|=64;const e=$a(t);if(DP(t)&&!e)return t;t=e}return null}function MC(t){!function rg(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=gp(n),i=r[1];EV(i,r,i.template,n)}}(t[8])}function sg(t,e,n){Jf(0),e(t,n)}const GV=(()=>Promise.resolve(null))();function NC(t){return t[7]||(t[7]=[])}function RC(t){return t.cleanup||(t.cleanup=[])}function kC(t,e){const n=t[9],r=n?n.get(Wa,null):null;r&&r.handleError(e)}function FC(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Cr(t,e,n){const r=function tl(t,e){return qe(e[t])}(e,t);!function TE(t,e,n){ke(t)?t.setValue(e,n):e.textContent=n}(t[G],r,n)}function Nl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Af(i,a):2==s&&(r=Af(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const og=new se("INJECTOR",-1);class PC{get(e,n=Pa){if(n===Pa){const r=new Error(`NullInjectorError: No provider for ${he(e)}!`);throw r.name="NullInjectorError",r}return n}}const ag=new se("Set Injector scope."),Ya={},QV={};let ug;function LC(){return void 0===ug&&(ug=new PC),ug}function VC(t,e=null,n=null,r){const i=BC(t,e,n,r);return i._resolveInjectorDefTypes(),i}function BC(t,e=null,n=null,r){return new YV(t,n,e||LC(),r)}class YV{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&Kn(n,a=>this.processProvider(a,e,n)),Kn([e],a=>this.processInjectorType(a,[],s)),this.records.set(og,Xs(void 0,this));const o=this.records.get(ag);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:he(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Pa,r=U.Default){this.assertNotDestroyed();const i=lE(this),s=Gr(void 0);try{if(!(r&U.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function iB(t){return"function"==typeof t||"object"==typeof t&&t instanceof se}(e)&&Rf(e);a=u&&this.injectableDefInScope(u)?Xs(cg(e),Ya):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&U.Self?LC():this.parent).get(e,n=r&U.Optional&&n===Pa?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[ml]=o[ml]||[]).unshift(he(e)),i)throw o;return function NL(t,e,n,r){const i=t[ml];throw e[cE]&&i.unshift(e[cE]),t.message=function RL(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=he(e);if(Array.isArray(e))i=e.map(he).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):he(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(IL,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ml]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{Gr(s),lE(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(he(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processInjectorType(e,n,r){if(!(e=K(e)))return!1;let i=vb(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=vb(s)),null==i)return!1;if(null!=i.imports&&!a){let l;r.push(o);try{Kn(i.imports,d=>{this.processInjectorType(d,n,r)&&(void 0===l&&(l=[]),l.push(d))})}finally{}if(void 0!==l)for(let d=0;d<l.length;d++){const{ngModule:h,providers:f}=l[d];Kn(f,p=>this.processProvider(p,h,f||_e))}}this.injectorDefTypes.add(o);const u=Pi(o)||(()=>new o);this.records.set(o,Xs(u,Ya));const c=i.providers;if(null!=c&&!a){const l=e;Kn(c,d=>this.processProvider(d,l,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,n,r){let i=Js(e=K(e))?e:K(e&&e.provide);const s=function XV(t,e,n){return UC(t)?Xs(void 0,t.useValue):Xs(function jC(t,e,n){let r;if(Js(t)){const i=K(t);return Pi(i)||cg(i)}if(UC(t))r=()=>K(t.useValue);else if(function eB(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...hp(t.deps||[]));else if(function JV(t){return!(!t||!t.useExisting)}(t))r=()=>V(K(t.useExisting));else{const i=K(t&&(t.useClass||t.provide));if(!function nB(t){return!!t.deps}(t))return Pi(i)||cg(i);r=()=>new i(...hp(t.deps))}return r}(t),Ya)}(e);if(Js(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=Xs(void 0,Ya,!0),o.factory=()=>hp(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,n){return n.value===Ya&&(n.value=QV,n.value=n.factory()),"object"==typeof n.value&&n.value&&function rB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=K(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function cg(t){const e=Rf(t),n=null!==e?e.factory:Pi(t);if(null!==n)return n;if(t instanceof se)throw new de(204,!1);if(t instanceof Function)return function ZV(t){const e=t.length;if(e>0)throw function Fa(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new de(204,!1);const n=function uP(t){const e=t&&(t[Kc]||t[_b]);if(e){const n=function cP(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new de(204,!1)}function Xs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function UC(t){return null!==t&&"object"==typeof t&&SL in t}function Js(t){return"function"==typeof t}let an=(()=>{class t{static create(n,r){var i;if(Array.isArray(n))return VC({name:""},r,n,"");{const s=null!==(i=n.name)&&void 0!==i?i:"";return VC({name:s},n.parent,n.providers,s)}}}return t.THROW_IF_NOT_FOUND=Pa,t.NULL=new PC,t.\u0275prov=ie({token:t,providedIn:"any",factory:()=>V(og)}),t.__NG_ELEMENT_ID__=-1,t})();function hB(t,e){sl(gp(t)[1],Ye())}let Rl=null;function eo(){if(!Rl){const t=me.Symbol;if(t&&t.iterator)Rl=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Rl=r)}}}return Rl}function Za(t){return!!function fg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&eo()in t)}function St(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function F(t,e=U.Default){const n=E();return null===n?V(t,e):Jb(Ye(),n,K(t),e)}function _g(){throw new Error("invalid")}function wg(t,e,n){const r=E();return St(r,Ls(),e)&&function on(t,e,n,r,i,s,o,a){const u=tn(e,n);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(FC(t,n,l,r,i),Jc(e)&&function xV(t,e){const n=nn(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function SV(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,ke(s)?s.setProperty(u,r,i):np(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}(ae(),function Ae(){const t=q.lFrame;return Gf(t.tView,t.selectedIndex)}(),r,t,e,r[G],n,!1),wg}function Dg(t,e,n,r,i){const o=i?"class":"style";FC(t,n,e.inputs[o],o,r)}function Jn(t,e,n,r){const i=E(),s=ae(),o=20+t,a=i[G],u=i[o]=Dp(a,e,function JP(){return q.lFrame.currentNamespace}()),c=s.firstCreatePass?function zB(t,e,n,r,i,s,o){const a=e.consts,c=Qs(e,t,2,i,Qr(a,s));return Jp(e,n,c,Qr(a,o)),null!==c.attrs&&Nl(c,c.attrs,!1),null!==c.mergedAttrs&&Nl(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,n,r):s.data[o];Wn(c,!0);const l=c.mergedAttrs;null!==l&&ul(a,u,l);const d=c.classes;null!==d&&xp(a,u,d);const h=c.styles;return null!==h&&BE(a,u,h),64!=(64&c.flags)&&wl(s,i,u,c),0===function LP(){return q.lFrame.elementDepthCount}()&&Tt(u,i),function VP(){q.lFrame.elementDepthCount++}(),el(c)&&(Zp(s,i,c),function yC(t,e,n){if(Bf(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}(s,c,i)),null!==r&&Xp(i,c),Jn}function er(){let t=Ye();Qf()?function Yf(){q.lFrame.isParent=!1}():(t=t.parent,Wn(t,!1));const e=t;!function BP(){q.lFrame.elementDepthCount--}();const n=ae();return n.firstCreatePass&&(sl(n,t),Bf(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function iL(t){return 0!=(16&t.flags)}(e)&&Dg(n,e,E(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function sL(t){return 0!=(32&t.flags)}(e)&&Dg(n,e,E(),e.stylesWithoutHost,!1),er}function Ja(t,e,n,r){return Jn(t,e,n,r),er(),Ja}function Fl(t){return!!t&&"function"==typeof t.then}const CI=function EI(t){return!!t&&"function"==typeof t.subscribe};function eu(t,e,n,r){const i=E(),s=ae(),o=Ye();return function TI(t,e,n,r,i,s,o,a){const u=el(r),l=t.firstCreatePass&&RC(t),d=e[8],h=NC(e);let f=!0;if(3&r.type||a){const m=tn(r,e),_=a?a(m):m,y=h.length,C=a?R=>a(qe(R[r.index])):r.index;if(ke(n)){let R=null;if(!a&&u&&(R=function WB(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[7],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==R)(R.__ngLastListenerFn__||R).__ngNextListenerFn__=s,R.__ngLastListenerFn__=s,f=!1;else{s=Cg(r,e,d,s,!1);const P=n.listen(_,i,s);h.push(s,P),l&&l.push(i,C,y,y+1)}}else s=Cg(r,e,d,s,!0),_.addEventListener(i,s,o),h.push(s),l&&l.push(i,C,y,o)}else s=Cg(r,e,d,s,!1);const p=r.outputs;let g;if(f&&null!==p&&(g=p[i])){const m=g.length;if(m)for(let _=0;_<m;_+=2){const Z=e[g[_]][g[_+1]].subscribe(s),Ve=h.length;h.push(s,Z),l&&l.push(i,r.index,Ve,-(Ve+1))}}}(s,i,i[G],o,t,e,!!n,r),eu}function SI(t,e,n,r){try{return!1!==n(r)}catch(i){return kC(t,i),!1}}function Cg(t,e,n,r,i){return function s(o){if(o===Function)return r;const a=2&t.flags?nn(t.index,e):e;0==(32&e[2])&&ng(a);let u=SI(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)u=SI(e,0,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function xI(t=1){return function WP(t){return(q.lFrame.contextLView=function KP(t,e){for(;t>0;)e=e[15],t--;return e}(t,q.lFrame.contextLView))[8]}(t)}function fo(t,e=""){const n=E(),r=ae(),i=t+20,s=r.firstCreatePass?Qs(r,i,1,e,null):r.data[i],o=n[i]=function wp(t,e){return ke(t)?t.createText(e):t.createTextNode(e)}(n[G],e);wl(r,n,o,s),Wn(s,!1)}function Sg(t){return xg("",t,""),Sg}function xg(t,e,n){const r=E(),i=function no(t,e,n,r){return St(t,Ls(),n)?e+H(n)+r:z}(r,t,e,n);return i!==z&&Cr(r,Lt(),i),xg}const Ll="en-US";let wT=Ll;class zT{}class LU{resolveComponentFactory(e){throw function PU(t){const e=Error(`No component factory found for ${he(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let ou=(()=>{class t{}return t.NULL=new LU,t})();function VU(){return mo(Ye(),E())}function mo(t,e){return new ti(tn(t,e))}let ti=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=VU,t})();class WT{}let $U=(()=>{class t{}return t.\u0275prov=ie({token:t,providedIn:"root",factory:()=>null}),t})();class au{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const HU=new au("13.3.12"),Fg={};function Hl(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(qe(s)),Tn(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1].firstChild;null!==c&&Hl(u[1],u,c,r)}const o=n.type;if(8&o)Hl(t,e,n.child,r);else if(32&o){const a=yp(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=LE(e,n);if(Array.isArray(a))r.push(...a);else{const u=$a(e[16]);Hl(u[1],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class uu{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Hl(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Tn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(bp(e,r),pl(n,r))}this._attachedToViewContainer=!1}xE(this._lView[1],this._lView)}onDestroy(e){!function DC(t,e,n,r){const i=NC(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&RC(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){ng(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function ig(t,e,n){const r=e[10];r.begin&&r.begin();try{Zs(t,e,t.template,n)}catch(i){throw kC(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function t2(t,e){Ha(t,e,e[G],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,"");this._appRef=e}}class qU extends uu{constructor(e){super(e),this._view=e}detectChanges(){MC(this._view)}checkNoChanges(){}get context(){return null}}class KT extends ou{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=pt(e);return new Pg(n,this.ngModule)}}function QT(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Pg extends zT{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function uV(t){return t.map(aV).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return QT(this.componentDef.inputs)}get outputs(){return QT(this.componentDef.outputs)}create(e,n,r,i){const s=(i=i||this.ngModule)?function GU(t,e){return{get:(n,r,i)=>{const s=t.get(n,Fg,i);return s!==Fg||r===Fg?s:e.get(n,r,i)}}}(e,i.injector):e,o=s.get(WT,Mb),a=s.get($U,null),u=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",l=r?function wC(t,e,n){if(ke(t))return t.selectRootElement(e,n===qn.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(u,r,this.componentDef.encapsulation):Dp(o.createRenderer(null,this.componentDef),c,function zU(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function XC(t,e){return{components:[],scheduler:t||Q2,clean:GV,playerHandler:e||null,flags:0}}(),f=Al(0,null,null,1,0,null,null,null,null,null),p=Ka(null,f,h,d,null,null,o,u,a,s);let g,m;rl(p);try{const _=function YC(t,e,n,r,i,s){const o=n[1];n[20]=t;const u=Qs(o,20,2,"#host",null),c=u.mergedAttrs=e.hostAttrs;null!==c&&(Nl(u,c,!0),null!==t&&(ul(i,t,c),null!==u.classes&&xp(i,t,u.classes),null!==u.styles&&BE(i,t,u.styles)));const l=r.createRenderer(t,e),d=Ka(n,vC(e),null,e.onPush?64:16,n[20],u,r,l,s||null,null);return o.firstCreatePass&&(hl(Ma(u,n),o,e.type),TC(o,u),SC(u,n.length,1)),Ml(n,d),n[20]=d}(l,this.componentDef,p,o,u);if(l)if(r)ul(u,l,["ng-version",HU.full]);else{const{attrs:y,classes:C}=function cV(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!xn(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);y&&ul(u,l,y),C&&C.length>0&&xp(u,l,C.join(" "))}if(m=Gf(f,20),void 0!==n){const y=m.projection=[];for(let C=0;C<this.ngContentSelectors.length;C++){const R=n[C];y.push(null!=R?Array.from(R):null)}}g=function ZC(t,e,n,r,i){const s=n[1],o=function MV(t,e,n){const r=Ye();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),xC(t,r,e,Ys(t,e,1,null),n));const i=Na(e,t,r.directiveStart,r);Tt(i,e);const s=tn(r,e);return s&&Tt(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(u=>u(o,e)),e.contentQueries){const u=Ye();e.contentQueries(1,o,u.directiveStart)}const a=Ye();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Yr(a.index),CC(n[1],a,0,a.directiveStart,a.directiveEnd,e),IC(e,o)),o}(_,this.componentDef,p,h,[hB]),Qa(f,p,null)}finally{il()}return new KU(this.componentType,g,mo(m,p),p,m)}}class KU extends class FU{}{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new qU(i),this.componentType=e}get injector(){return new js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Ir{}class YT{}const yo=new Map;class JT extends Ir{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new KT(this);const r=hn(e);this._bootstrapComponents=Yn(r.bootstrap),this._r3Injector=BC(e,n,[{provide:Ir,useValue:this},{provide:ou,useValue:this.componentFactoryResolver}],he(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=an.THROW_IF_NOT_FOUND,r=U.Default){return e===an||e===Ir||e===og?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Lg extends YT{constructor(e){super(),this.moduleType=e,null!==hn(e)&&function YU(t){const e=new Set;!function n(r){const i=hn(r,!0),s=i.id;null!==s&&(function ZT(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${he(e)} vs ${he(e.name)}`)}(s,yo.get(s),r),yo.set(s,r));const o=Yn(i.imports);for(const a of o)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new JT(this.moduleType,e)}}function Vg(t){return e=>{setTimeout(t,void 0,e)}}const jt=class p$ extends mr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,s,o;let a=e,u=n||(()=>null),c=r;if(e&&"object"==typeof e){const d=e;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),u=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(u=Vg(u),a&&(a=Vg(a)),c&&(c=Vg(c)));const l=super.subscribe({next:a,error:u,complete:c});return e instanceof dn&&e.add(l),l}};Symbol;let Tr=(()=>{class t{}return t.__NG_ELEMENT_ID__=v$,t})();const m$=Tr,y$=class extends m${constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=Ka(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(n)),Qa(n,r,e),new uu(r)}};function v$(){return function ql(t,e){return 4&t.type?new y$(e,t,mo(t,e)):null}(Ye(),E())}let On=(()=>{class t{}return t.__NG_ELEMENT_ID__=_$,t})();function _$(){return function aS(t,e){let n;const r=e[t.index];if(Tn(r))n=r;else{let i;if(8&t.type)i=qe(r);else{const s=e[G];i=s.createComment("");const o=tn(t,e);Vi(s,_l(s,o),i,function u2(t,e){return ke(t)?t.nextSibling(e):e.nextSibling}(s,o),!1)}e[t.index]=n=AC(r,e,i,t),Ml(e,n)}return new sS(n,t,e)}(Ye(),E())}const w$=On,sS=class extends w${constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return mo(this._hostTNode,this._hostLView)}get injector(){return new js(this._hostTNode,this._hostLView)}get parentInjector(){const e=dl(this._hostTNode,this._hostLView);if(Kb(e)){const n=Bs(e,this._hostLView),r=Vs(e);return new js(n[1].data[r+8],n)}return new js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=oS(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,s){const o=e&&!function ka(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.ngModuleRef}const u=o?e:new Pg(pt(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const h=(o?c:this.parentInjector).get(Ir,null);h&&(s=h)}const l=u.create(c,i,void 0,s);return this.insert(l.hostView,a),l}insert(e,n){const r=e._lView,i=r[1];if(function PP(t){return Tn(t[3])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[3],h=new sS(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function r2(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],iE(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function i2(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,r,o,s);const a=Ip(s,o),u=r[G],c=_l(u,o[7]);return null!==c&&function e2(t,e,n,r,i,s){r[0]=i,r[6]=e,Ha(t,r,n,1,i,s)}(i,o[6],u,r,c,a),e.attachToViewContainerRef(),iE(jg(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=oS(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=bp(this._lContainer,n);r&&(pl(jg(this._lContainer),n),xE(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=bp(this._lContainer,n);return r&&null!=pl(jg(this._lContainer),n)?new uu(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function oS(t){return t[8]}function jg(t){return t[8]||(t[8]=[])}function Wl(...t){}const em=new se("Application Initializer");let tm=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Wl,this.reject=Wl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Fl(s))n.push(s);else if(CI(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(V(em,8))},t.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const hu=new se("AppId",{providedIn:"root",factory:function AS(){return`${nm()}${nm()}${nm()}`}});function nm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const MS=new se("Platform Initializer"),NS=new se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),RS=new se("appBootstrapListener");let W$=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const ni=new se("LocaleId",{providedIn:"root",factory:()=>AL(ni,U.Optional|U.SkipSelf)||function K$(){return"undefined"!=typeof $localize&&$localize.locale||Ll}()});class Y${constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let OS=(()=>{class t{compileModuleSync(n){return new Lg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Yn(hn(n).declarations).reduce((o,a)=>{const u=pt(a);return u&&o.push(new Pg(u)),o},[]);return new Y$(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const X$=(()=>Promise.resolve(0))();function rm(t){"undefined"==typeof Zone?X$.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class gt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jt(!1),this.onMicrotaskEmpty=new jt(!1),this.onStable=new jt(!1),this.onError=new jt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function J$(){let t=me.requestAnimationFrame,e=me.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function n4(t){const e=()=>{!function t4(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(me,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,sm(t),t.isCheckStableRunning=!0,im(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),sm(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return kS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),FS(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return kS(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),FS(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,sm(t),im(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,e4,Wl,Wl);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const e4={};function im(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function sm(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function kS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function FS(t){t._nesting--,im(t)}class r4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jt,this.onMicrotaskEmpty=new jt,this.onStable=new jt,this.onError=new jt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let om=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gt.assertNotInAngularZone(),rm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rm(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(V(gt))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})(),i4=(()=>{class t{constructor(){this._applications=new Map,am.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return am.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();class s4{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let am=new s4,$i=null;const PS=new se("AllowMultipleToken"),LS=new se("PlatformOnDestroy");class VS{constructor(e,n){this.name=e,this.token=n}}function BS(t,e,n=[]){const r=`Platform: ${e}`,i=new se(r);return(s=[])=>{let o=um();if(!o||o.injector.get(PS,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function c4(t){if($i&&!$i.get(PS,!1))throw new de(400,"");$i=t;const e=t.get(jS),n=t.get(MS,null);n&&n.forEach(r=>r())}(function d4(t=[],e){return an.create({name:e,providers:[{provide:ag,useValue:"platform"},{provide:LS,useValue:()=>$i=null},...t]})}(a,r))}return function l4(t){const e=um();if(!e)throw new de(401,"");return e}()}}function um(){var t;return null!==(t=null==$i?void 0:$i.get(jS))&&void 0!==t?t:null}let jS=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function h4(t,e){let n;return n="noop"===t?new r4:("zone.js"===t?void 0:t)||new gt({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),u=[{provide:gt,useValue:a}];return a.run(()=>{const c=an.create({providers:u,parent:this.injector,name:n.moduleType.name}),l=n.create(c),d=l.injector.get(Wa,null);if(!d)throw new de(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});l.onDestroy(()=>{lm(this._modules,l),h.unsubscribe()})}),function f4(t,e,n){try{const r=n();return Fl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(d,a,()=>{const h=l.injector.get(tm);return h.runInitializers(),h.donePromise.then(()=>(function Bj(t){Jt(t,"Expected localeId to be defined"),"string"==typeof t&&(wT=t.toLowerCase().replace(/_/g,"-"))}(l.injector.get(ni,Ll)||Ll),this._moduleDoBootstrap(l),l))})})}bootstrapModule(n,r=[]){const i=US({},r);return function a4(t,e,n){const r=new Lg(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(cm);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new de(403,"");n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(LS,null);null==n||n(),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(V(an))},t.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function US(t,e){return Array.isArray(e)?e.reduce(US,t):Object.assign(Object.assign({},t),e)}let cm=(()=>{class t{constructor(n,r,i,s){this._zone=n,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Re(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),a=new Re(u=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{gt.assertNotInAngularZone(),rm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{gt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=function tP(...t){const e=ba(t),n=function KF(t,e){return"number"==typeof Tf(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Hn(r[0]):Da(n)(Et(r,e)):vr}(o,a.pipe(function nP(t={}){const{connector:e=(()=>new mr),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{const g=o;f(),null==g||g.unsubscribe()};return dt((g,m)=>{c++,!d&&!l&&h();const _=u=null!=u?u:e();m.add(()=>{c--,0===c&&!d&&!l&&(a=Sf(p,i))}),_.subscribe(m),!o&&c>0&&(o=new wa({next:y=>_.next(y),error:y=>{d=!0,h(),a=Sf(f,n,y),_.error(y)},complete:()=>{l=!0,h(),a=Sf(f,r),_.complete()}}),Hn(g).subscribe(o))})(s)}}()))}bootstrap(n,r){if(!this._initStatus.done)throw new de(405,"");let i;i=n instanceof zT?n:this._injector.get(ou).resolveComponentFactory(n),this.componentTypes.push(i.componentType);const s=function u4(t){return t.isBoundToModule}(i)?void 0:this._injector.get(Ir),a=i.create(an.NULL,[],r||i.selector,s),u=a.location.nativeElement,c=a.injector.get(om,null),l=c&&a.injector.get(i4);return c&&l&&l.registerApplication(u,c),a.onDestroy(()=>{this.detachView(a.hostView),lm(this.components,a),l&&l.unregisterApplication(u)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new de(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;lm(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(RS,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(V(gt),V(an),V(Wa),V(tm))},t.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function lm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let HS=!0,dm=(()=>{class t{}return t.__NG_ELEMENT_ID__=m4,t})();function m4(t){return function y4(t,e,n){if(Jc(t)&&!n){const r=nn(t.index,e);return new uu(r,r)}return 47&t.type?new uu(e[16],e):null}(Ye(),E(),16==(16&t))}class KS{constructor(){}supports(e){return Za(e)}create(e){return new E4(e)}}const b4=(t,e)=>e;class E4{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||b4}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<YS(r,i,s)?n:r,a=YS(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Za(e))throw new de(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function bB(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[eo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new C4(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new QS),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new QS),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class C4{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class I4{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class QS{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new I4,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YS(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function XS(){return new Yl([new KS])}let Yl=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||XS()),deps:[[t,new Ba,new mn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new de(901,"")}}return t.\u0275prov=ie({token:t,providedIn:"root",factory:XS}),t})();const M4=BS(null,"core",[]);let N4=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(V(cm))},t.\u0275mod=Ni({type:t}),t.\u0275inj=zr({}),t})(),Zl=null;function ri(){return Zl}const vn=new se("DocumentToken");let qi=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ie({token:t,factory:function(){return function F4(){return V(ex)}()},providedIn:"platform"}),t})();const P4=new se("Location Initialized");let ex=(()=>{class t extends qi{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ri().getBaseHref(this._doc)}onPopState(n){const r=ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){tx()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){tx()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(V(vn))},t.\u0275prov=ie({token:t,factory:function(){return function L4(){return new ex(V(vn))}()},providedIn:"platform"}),t})();function tx(){return!!window.history.pushState}function mm(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function nx(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Sr(t){return t&&"?"!==t[0]?"?"+t:t}let _o=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ie({token:t,factory:function(){return function V4(t){const e=V(vn).location;return new rx(V(qi),e&&e.origin||"")}()},providedIn:"root"}),t})();const ym=new se("appBaseHref");let rx=(()=>{class t extends _o{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return mm(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Sr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Sr(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Sr(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(V(qi),V(ym,8))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})(),B4=(()=>{class t extends _o{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=mm(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Sr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Sr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(V(qi),V(ym,8))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})(),vm=(()=>{class t{constructor(n,r){this._subject=new jt,this._urlChangeListeners=[],this._platformStrategy=n;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=nx(ix(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Sr(r))}normalize(n){return t.stripTrailingSlash(function U4(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,ix(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._platformStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Sr(r)),i)}replaceState(n,r="",i=null){this._platformStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Sr(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=Sr,t.joinWithSlash=mm,t.stripTrailingSlash=nx,t.\u0275fac=function(n){return new(n||t)(V(_o),V(qi))},t.\u0275prov=ie({token:t,factory:function(){return function j4(){return new vm(V(_o),V(qi))}()},providedIn:"root"}),t})();function ix(t){return t.replace(/\/index.html$/,"")}class SH{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fx=(()=>{class t{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new SH(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),px(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{px(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(F(On),F(Tr),F(Yl))},t.\u0275dir=Ct({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function px(t,e){t.context.$implicit=e.item}let vx=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ni({type:t}),t.\u0275inj=zr({}),t})();let s3=(()=>{class t{}return t.\u0275prov=ie({token:t,providedIn:"root",factory:()=>new o3(V(vn),window)}),t})();class o3{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function a3(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=wx(this.window.history)||wx(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function wx(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Rm extends class c3 extends class k4{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function O4(t){Zl||(Zl=t)}(new Rm)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function l3(){return mu=mu||document.querySelector("base"),mu?mu.getAttribute("href"):null}();return null==n?null:function d3(t){ad=ad||document.createElement("a"),ad.setAttribute("href",t);const e=ad.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){mu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function CH(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ad,mu=null;const Dx=new se("TRANSITION_ID"),f3=[{provide:em,useFactory:function h3(t,e,n){return()=>{n.get(tm).donePromise.then(()=>{const r=ri(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Dx,vn,an],multi:!0}];class Om{static init(){!function o4(t){am=t}(new Om)}addToWindow(e){me.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},me.getAllAngularTestabilities=()=>e.getAllTestabilities(),me.getAllAngularRootElements=()=>e.getAllRootElements(),me.frameworkStabilizers||(me.frameworkStabilizers=[]),me.frameworkStabilizers.push(r=>{const i=me.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?ri().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let p3=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})();const ud=new se("EventManagerPlugins");let cd=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(V(ud),V(gt))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})();class bx{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=ri().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let Ex=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})(),yu=(()=>{class t extends Ex{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Cx),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Cx))}}return t.\u0275fac=function(n){return new(n||t)(V(vn))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})();function Cx(t){ri().remove(t)}const km={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fm=/%COMP%/g;function ld(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ld(t,i,n):(i=i.replace(Fm,t),n.push(i))}return n}function Sx(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Pm=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Lm(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case qn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new w3(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case qn.ShadowDom:return new D3(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=ld(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(V(cd),V(yu),V(hu))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})();class Lm{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(km[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=km[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=km[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(sn.DashCase|sn.Important)?e.style.setProperty(n,r,i&sn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&sn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,Sx(r)):this.eventManager.addEventListener(e,n,Sx(r))}}class w3 extends Lm{constructor(e,n,r,i){super(e),this.component=r;const s=ld(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function y3(t){return"_ngcontent-%COMP%".replace(Fm,t)}(i+"-"+r.id),this.hostAttr=function v3(t){return"_nghost-%COMP%".replace(Fm,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class D3 extends Lm{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ld(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let b3=(()=>{class t extends bx{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(V(vn))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})();const Ax=["alt","control","meta","shift"],C3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mx={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},I3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let T3=(()=>{class t extends bx{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ri().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="";if(Ax.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(n){let r="",i=function S3(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Mx.hasOwnProperty(e)&&(e=Mx[e]))}return C3[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ax.forEach(s=>{s!=i&&I3[s](n)&&(r+=s+".")}),r+=i,r}static eventCallback(n,r,i){return s=>{t.getEventFullKey(s)===n&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(V(vn))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})();const N3=BS(M4,"browser",[{provide:NS,useValue:"browser"},{provide:MS,useValue:function x3(){Rm.makeCurrent(),Om.init()},multi:!0},{provide:vn,useFactory:function M3(){return function RP(t){qf=t}(document),document},deps:[]}]),R3=[{provide:ag,useValue:"root"},{provide:Wa,useFactory:function A3(){return new Wa},deps:[]},{provide:ud,useClass:b3,multi:!0,deps:[vn,gt,NS]},{provide:ud,useClass:T3,multi:!0,deps:[vn]},{provide:Pm,useClass:Pm,deps:[cd,yu,hu]},{provide:WT,useExisting:Pm},{provide:Ex,useExisting:yu},{provide:yu,useClass:yu,deps:[vn]},{provide:om,useClass:om,deps:[gt]},{provide:cd,useClass:cd,deps:[ud,gt]},{provide:class u3{},useClass:p3,deps:[]}];let O3=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:hu,useValue:n.appId},{provide:Dx,useExisting:hu},f3]}}}return t.\u0275fac=function(n){return new(n||t)(V(t,12))},t.\u0275mod=Ni({type:t}),t.\u0275inj=zr({providers:R3,imports:[vx,N4]}),t})();function Y(...t){return Et(t,ba(t))}"undefined"!=typeof window&&window;class Pn extends mr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:q3}=Array,{getPrototypeOf:z3,prototype:G3,keys:W3}=Object;const{isArray:Y3}=Array;function e9(...t){const e=ba(t),n=function WF(t){return te(Tf(t))?t.pop():void 0}(t),{args:r,keys:i}=function K3(t){if(1===t.length){const e=t[0];if(q3(e))return{args:e,keys:null};if(function Q3(t){return t&&"object"==typeof t&&z3(t)===G3}(e)){const n=W3(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return Et([],e);const s=new Re(function t9(t,e,n=Mi){return r=>{Ox(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)Ox(e,()=>{const c=Et(t[u],e);let l=!1;c.subscribe(ht(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function J3(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,o):Mi));return n?s.pipe(function X3(t){return ye(e=>function Z3(t,e){return Y3(e)?t(...e):t(e)}(t,e))}(n)):s}function Ox(t,e,n){t?yr(n,t,e):e()}function dd(t,e){const n=te(t)?t:()=>t,r=i=>i.error(n());return new Re(e?i=>e.schedule(r,0,i):r)}const hd=nt(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Bm(...t){return function n9(){return Da(1)}()(Et(t,ba(t)))}function kx(t){return new Re(e=>{Hn(t()).subscribe(e)})}function Fx(){return dt((t,e)=>{let n=null;t._refCount++;const r=ht(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class r9 extends Re{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,eb(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dn;const n=this.getSubject();e.add(this.source.subscribe(ht(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dn.EMPTY)}return e}refCount(){return Fx()(this)}}function zi(t,e){return dt((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(ht(r,u=>{null==i||i.unsubscribe();let c=0;const l=s++;Hn(t(u,l)).subscribe(i=ht(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function jm(t){return t<=0?()=>vr:dt((e,n)=>{let r=0;e.subscribe(ht(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function s9(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(ht(o,l=>{const d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Px(t,e){return dt(s9(t,e,arguments.length>=2,!0))}function wo(t,e){return dt((n,r)=>{let i=0;n.subscribe(ht(r,s=>t.call(e,s,i++)&&r.next(s)))})}function si(t){return dt((e,n)=>{let s,r=null,i=!1;r=e.subscribe(ht(n,void 0,void 0,o=>{s=Hn(t(o,si(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function vu(t,e){return te(e)?rt(t,e,1):rt(t,1)}function Um(t){return t<=0?()=>vr:dt((e,n)=>{let r=[];e.subscribe(ht(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Lx(t=o9){return dt((e,n)=>{let r=!1;e.subscribe(ht(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function o9(){return new hd}function Vx(t){return dt((e,n)=>{let r=!1;e.subscribe(ht(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Do(t,e){const n=arguments.length>=2;return r=>r.pipe(t?wo((i,s)=>t(i,s,r)):Mi,jm(1),n?Vx(e):Lx(()=>new hd))}function Wt(t,e,n){const r=te(t)||e||n?{next:t,error:e,complete:n}:t;return r?dt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ht(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Mi}class Ar{constructor(e,n){this.id=e,this.url=n}}class $m extends Ar{constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _u extends Ar{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bx extends Ar{constructor(e,n,r){super(e,n),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class c9 extends Ar{constructor(e,n,r){super(e,n),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class l9 extends Ar{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class d9 extends Ar{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h9 extends Ar{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class f9 extends Ar{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p9 extends Ar{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jx{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ux{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class g9{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m9{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y9{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v9{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $x{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const J="primary";class _9{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function bo(t){return new _9(t)}const Hx="ngNavigationCancelingError";function Hm(t){const e=Error("NavigationCancelingError: "+t);return e[Hx]=!0,e}function D9(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function rr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!qx(t[i],e[i]))return!1;return!0}function qx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function zx(t){return Array.prototype.concat.apply([],t)}function Gx(t){return t.length>0?t[t.length-1]:null}function mt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ir(t){return CI(t)?t:Fl(t)?Et(Promise.resolve(t)):Y(t)}const C9={exact:function Qx(t,e,n){if(!Wi(t.segments,e.segments)||!fd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!Qx(t.children[r],e.children[r],n))return!1;return!0},subset:Yx},Wx={exact:function I9(t,e){return rr(t,e)},subset:function T9(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qx(t[n],e[n]))},ignored:()=>!0};function Kx(t,e,n){return C9[n.paths](t.root,e.root,n.matrixParams)&&Wx[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Yx(t,e,n){return Zx(t,e,e.segments,n)}function Zx(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Wi(i,n)||e.hasChildren()||!fd(i,n,r))}if(t.segments.length===n.length){if(!Wi(t.segments,n)||!fd(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!Yx(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(Wi(t.segments,i)&&fd(t.segments,i,r)&&t.children[J])&&Zx(t.children[J],e,s,r)}}function fd(t,e,n){return e.every((r,i)=>Wx[n](t[i].parameters,r.parameters))}class Gi{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bo(this.queryParams)),this._queryParamMap}toString(){return A9.serialize(this)}}class ne{constructor(e,n){this.segments=e,this.children=n,this.parent=null,mt(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pd(this)}}class wu{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=bo(this.parameters)),this._parameterMap}toString(){return nA(this)}}function Wi(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}class Xx{}class Jx{parse(e){const n=new V9(e);return new Gi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Du(e.root,!0)}`,r=function R9(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${gd(n)}=${gd(i)}`).join("&"):`${gd(n)}=${gd(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function M9(t){return encodeURI(t)}(e.fragment)}`:""}`}}const A9=new Jx;function pd(t){return t.segments.map(e=>nA(e)).join("/")}function Du(t,e){if(!t.hasChildren())return pd(t);if(e){const n=t.children[J]?Du(t.children[J],!1):"",r=[];return mt(t.children,(i,s)=>{s!==J&&r.push(`${s}:${Du(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function x9(t,e){let n=[];return mt(t.children,(r,i)=>{i===J&&(n=n.concat(e(r,i)))}),mt(t.children,(r,i)=>{i!==J&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===J?[Du(t.children[J],!1)]:[`${i}:${Du(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[J]?`${pd(t)}/${n[0]}`:`${pd(t)}/(${n.join("//")})`}}function eA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gd(t){return eA(t).replace(/%3B/gi,";")}function qm(t){return eA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function md(t){return decodeURIComponent(t)}function tA(t){return md(t.replace(/\+/g,"%20"))}function nA(t){return`${qm(t.path)}${function N9(t){return Object.keys(t).map(e=>`;${qm(e)}=${qm(t[e])}`).join("")}(t.parameters)}`}const O9=/^[^\/()?;=#]+/;function yd(t){const e=t.match(O9);return e?e[0]:""}const k9=/^[^=?&#]+/,P9=/^[^&#]+/;class V9{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ne([],{}):new ne([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[J]=new ne(e,n)),r}parseSegment(){const e=yd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new wu(md(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=yd(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=yd(this.remaining);i&&(r=i,this.capture(r))}e[md(n)]=md(r)}parseQueryParam(e){const n=function F9(t){const e=t.match(k9);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function L9(t){const e=t.match(P9);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=tA(n),s=tA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=yd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=J);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[J]:new ne([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class rA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=zm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=zm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Gm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Gm(e,this._root).map(n=>n.value)}}function zm(t,e){if(t===e.value)return e;for(const n of e.children){const r=zm(t,n);if(r)return r}return null}function Gm(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Gm(t,n);if(r.length)return r.unshift(e),r}return[]}class Mr{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Eo(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class iA extends rA{constructor(e,n){super(e),this.snapshot=n,Wm(this,e)}toString(){return this.snapshot.toString()}}function sA(t,e){const n=function B9(t,e){const o=new vd([],{},{},"",{},J,e,null,t.root,-1,{});return new aA("",new Mr(o,[]))}(t,e),r=new Pn([new wu("",{})]),i=new Pn({}),s=new Pn({}),o=new Pn({}),a=new Pn(""),u=new Co(r,i,o,a,s,J,e,n.root);return u.snapshot=n.root,new iA(new Mr(u,[]),n)}class Co{constructor(e,n,r,i,s,o,a,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ye(e=>bo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ye(e=>bo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oA(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function j9(t){return t.reduce((e,n)=>({params:Object.assign(Object.assign({},e.params),n.params),data:Object.assign(Object.assign({},e.data),n.data),resolve:Object.assign(Object.assign({},e.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class vd{constructor(e,n,r,i,s,o,a,u,c,l,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class aA extends rA{constructor(e,n){super(n),this.url=e,Wm(this,n)}toString(){return uA(this._root)}}function Wm(t,e){e.value._routerState=t,e.children.forEach(n=>Wm(t,n))}function uA(t){const e=t.children.length>0?` { ${t.children.map(uA).join(", ")} } `:"";return`${t.value}${e}`}function Km(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,rr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),rr(e.params,n.params)||t.params.next(n.params),function b9(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!rr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),rr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Qm(t,e){const n=rr(t.params,e.params)&&function S9(t,e){return Wi(t,e)&&t.every((n,r)=>rr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Qm(t.parent,e.parent))}function bu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function $9(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return bu(t,r,i);return bu(t,r)})}(t,e,n);return new Mr(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>bu(t,a)),o}}const r=function H9(t){return new Co(new Pn(t.url),new Pn(t.params),new Pn(t.queryParams),new Pn(t.fragment),new Pn(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>bu(t,s));return new Mr(r,i)}}function _d(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Eu(t){return"object"==typeof t&&null!=t&&t.outlets}function Ym(t,e,n,r,i){let s={};if(r&&mt(r,(a,u)=>{s[u]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),t===e)return new Gi(n,s,i);const o=cA(t,e,n);return new Gi(o,s,i)}function cA(t,e,n){const r={};return mt(t.children,(i,s)=>{r[s]=i===e?n:cA(i,e,n)}),new ne(t.segments,r)}class lA{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&_d(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Eu);if(i&&i!==Gx(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zm{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function dA(t,e,n){if(t||(t=new ne([],{})),0===t.segments.length&&t.hasChildren())return wd(t,e,n);const r=function Q9(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Eu(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!fA(u,c,o))return s;r+=2}else{if(!fA(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new ne(t.segments.slice(0,r.pathIndex),{});return s.children[J]=new ne(t.segments.slice(r.pathIndex),t.children),wd(s,0,i)}return r.match&&0===i.length?new ne(t.segments,{}):r.match&&!t.hasChildren()?Xm(t,e,n):r.match?wd(t,0,i):Xm(t,e,n)}function wd(t,e,n){if(0===n.length)return new ne(t.segments,{});{const r=function K9(t){return Eu(t[0])?t[0].outlets:{[J]:t}}(n),i={};return mt(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=dA(t.children[o],e,s))}),mt(t.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new ne(t.segments,i)}}function Xm(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Eu(s)){const u=Y9(s.outlets);return new ne(r,u)}if(0===i&&_d(n[0])){r.push(new wu(t.segments[e].path,hA(n[0]))),i++;continue}const o=Eu(s)?s.outlets[J]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&_d(a)?(r.push(new wu(o,hA(a))),i+=2):(r.push(new wu(o,{})),i++)}return new ne(r,{})}function Y9(t){const e={};return mt(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=Xm(new ne([],{}),0,n))}),e}function hA(t){const e={};return mt(t,(n,r)=>e[r]=`${n}`),e}function fA(t,e,n){return t==n.path&&rr(e,n.parameters)}class X9{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Km(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Eo(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),mt(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Eo(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Eo(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=Eo(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new v9(s.value.snapshot))}),e.children.length&&this.forwardEvent(new m9(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(Km(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Km(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function J9(t){for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(i.snapshot),u=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=u,o.outlet&&o.outlet.activateWith(i,u),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Jm{constructor(e,n){this.routes=e,this.module=n}}function oi(t){return"function"==typeof t}function Ki(t){return t instanceof Gi}const Cu=Symbol("INITIAL_VALUE");function Iu(){return zi(t=>e9(t.map(e=>e.pipe(jm(1),function i9(...t){const e=ba(t);return dt((n,r)=>{(e?Bm(t,n,e):Bm(t,n)).subscribe(r)})}(Cu)))).pipe(Px((e,n)=>{let r=!1;return n.reduce((i,s,o)=>i!==Cu?i:(s===Cu&&(r=!0),r||!1!==s&&o!==n.length-1&&!Ki(s)?i:s),e)},Cu),wo(e=>e!==Cu),ye(e=>Ki(e)?e:!0===e),jm(1)))}class sq{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Tu,this.attachRef=null}}class Tu{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new sq,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}let ey=(()=>{class t{constructor(n,r,i,s,o){this.parentContexts=n,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new jt,this.deactivateEvents=new jt,this.attachEvents=new jt,this.detachEvents=new jt,this.name=s||J,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const o=(r=r||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,u=new oq(n,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,u),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(F(Tu),F(On),F(ou),function Ra(t){return function cL(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(Gb(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(Ye(),t)}("name"),F(dm))},t.\u0275dir=Ct({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class oq{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Co?this.route:e===Tu?this.childContexts:this.parent.get(e,n)}}let pA=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&Ja(0,"router-outlet")},directives:[ey],encapsulation:2}),t})();function gA(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];aq(r,uq(e,r))}}function aq(t,e){t.children&&gA(t.children,e)}function uq(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ty(t){const e=t.children&&t.children.map(ty),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==J&&(n.component=pA),n}function Dn(t){return t.outlet||J}function mA(t,e){const n=t.filter(r=>Dn(r)===e);return n.push(...t.filter(r=>Dn(r)!==e)),n}const yA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Dd(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},yA):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const s=(e.matcher||D9)(n,t,e);if(!s)return Object.assign({},yA);const o={};mt(s.posParams,(u,c)=>{o[c]=u.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function bd(t,e,n,r,i="corrected"){if(n.length>0&&function dq(t,e,n){return n.some(r=>Ed(t,e,r)&&Dn(r)!==J)}(t,n,r)){const o=new ne(e,function lq(t,e,n,r){const i={};i[J]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Dn(s)!==J){const o=new ne([],{});o._sourceSegment=t,o._segmentIndexShift=e.length,i[Dn(s)]=o}return i}(t,e,r,new ne(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function hq(t,e,n){return n.some(r=>Ed(t,e,r))}(t,n,r)){const o=new ne(t.segments,function cq(t,e,n,r,i,s){const o={};for(const a of r)if(Ed(t,n,a)&&!i[Dn(a)]){const u=new ne([],{});u._sourceSegment=t,u._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[Dn(a)]=u}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const s=new ne(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Ed(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function vA(t,e,n,r){return!!(Dn(t)===r||r!==J&&Ed(e,n,t))&&("**"===t.path||Dd(e,t,n).matched)}function _A(t,e,n){return 0===e.length&&!t.children[n]}class Cd{constructor(e){this.segmentGroup=e||null}}class wA{constructor(e){this.urlTree=e}}function Su(t){return dd(new Cd(t))}function DA(t){return dd(new wA(t))}class mq{constructor(e,n,r,i,s){this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Ir)}apply(){const e=bd(this.urlTree.root,[],[],this.config).segmentGroup,n=new ne(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,J).pipe(ye(s=>this.createUrlTree(ny(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(si(s=>{if(s instanceof wA)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Cd?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,J).pipe(ye(i=>this.createUrlTree(ny(i),e.queryParams,e.fragment))).pipe(si(i=>{throw i instanceof Cd?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,r){const i=e.segments.length>0?new ne([],{[J]:e}):e;return new Gi(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(ye(s=>new ne([],s))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Et(i).pipe(vu(s=>{const o=r.children[s],a=mA(n,s);return this.expandSegmentGroup(e,a,o,s).pipe(ye(u=>({segment:u,outlet:s})))}),Px((s,o)=>(s[o.outlet]=o.segment,s),{}),function a9(t,e){const n=arguments.length>=2;return r=>r.pipe(t?wo((i,s)=>t(i,s,r)):Mi,Um(1),n?Vx(e):Lx(()=>new hd))}())}expandSegment(e,n,r,i,s,o){return Et(r).pipe(vu(a=>this.expandSegmentAgainstRoute(e,n,r,a,i,s,o).pipe(si(c=>{if(c instanceof Cd)return Y(null);throw c}))),Do(a=>!!a),si((a,u)=>{if(a instanceof hd||"EmptyError"===a.name)return _A(n,i,s)?Y(new ne([],{})):Su(n);throw a}))}expandSegmentAgainstRoute(e,n,r,i,s,o,a){return vA(i,n,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o):Su(n):Su(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?DA(s):this.lineralizeSegments(r,s).pipe(rt(o=>{const a=new ne(o,{});return this.expandSegment(e,a,n,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=Dd(n,i,s);if(!a)return Su(n);const d=this.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?DA(d):this.lineralizeSegments(i,d).pipe(rt(h=>this.expandSegment(e,n,r,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Y(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(ye(d=>(r._loadedConfig=d,new ne(i,{})))):Y(new ne(i,{}));const{matched:o,consumedSegments:a,remainingSegments:u}=Dd(n,r,i);return o?this.getChildConfig(e,r,i).pipe(rt(l=>{const d=l.module,h=l.routes,{segmentGroup:f,slicedSegments:p}=bd(n,a,u,h),g=new ne(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(ye(C=>new ne(a,C)));if(0===h.length&&0===p.length)return Y(new ne(a,{}));const m=Dn(r)===s;return this.expandSegment(d,g,h,p,m?J:s,!0).pipe(ye(y=>new ne(a.concat(y.segments),y.children)))})):Su(n)}getChildConfig(e,n,r){return n.children?Y(new Jm(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?Y(n._loadedConfig):this.runCanLoadGuards(e.injector,n,r).pipe(rt(i=>i?this.configLoader.load(e.injector,n).pipe(ye(s=>(n._loadedConfig=s,s))):function pq(t){return dd(Hm(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`))}(n))):Y(new Jm([],e))}runCanLoadGuards(e,n,r){const i=n.canLoad;return i&&0!==i.length?Y(i.map(o=>{const a=e.get(o);let u;if(function tq(t){return t&&oi(t.canLoad)}(a))u=a.canLoad(n,r);else{if(!oi(a))throw new Error("Invalid CanLoad guard");u=a(n,r)}return ir(u)})).pipe(Iu(),Wt(o=>{if(!Ki(o))return;const a=Hm(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),ye(o=>!0===o)):Y(!0)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Y(r);if(i.numberOfChildren>1||!i.children[J])return dd(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[J]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreatreUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Gi(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return mt(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return mt(n.children,(a,u)=>{o[u]=this.createSegmentGroup(e,a,r,i)}),new ne(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}function ny(t){const e={};for(const r of Object.keys(t.children)){const s=ny(t.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function yq(t){if(1===t.numberOfChildren&&t.children[J]){const e=t.children[J];return new ne(t.segments.concat(e.segments),e.children)}return t}(new ne(t.segments,e))}class bA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Id{constructor(e,n){this.component=e,this.route=n}}function _q(t,e,n){const r=t._root;return xu(r,e?e._root:null,n,[r.value])}function Td(t,e,n){const r=function Dq(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function xu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Eo(e);return t.children.forEach(o=>{(function bq(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function Eq(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Wi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Wi(t.url,e.url)||!rr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qm(t,e)||!rr(t.queryParams,e.queryParams);default:return!Qm(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new bA(r)):(s.data=o.data,s._resolvedData=o._resolvedData),xu(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Id(a.outlet.component,o))}else o&&Au(e,a,i),i.canActivateChecks.push(new bA(r)),xu(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),mt(s,(o,a)=>Au(o,n.getContext(a),i)),i}function Au(t,e,n){const r=Eo(t),i=t.value;mt(r,(s,o)=>{Au(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Id(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Rq{}function EA(t){return new Re(e=>e.error(t))}class kq{constructor(e,n,r,i,s,o){this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=bd(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,J);if(null===n)return null;const r=new vd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},J,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Mr(r,n),s=new aA(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const n=e.value,r=oA(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,r)}processChildren(e,n){const r=[];for(const s of Object.keys(n.children)){const o=n.children[s],a=mA(e,s),u=this.processSegmentGroup(a,o,s);if(null===u)return null;r.push(...u)}const i=CA(r);return function Fq(t){t.sort((e,n)=>e.value.outlet===J?-1:n.value.outlet===J?1:e.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(e,n,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,n,r,i);if(null!==o)return o}return _A(n,r,i)?[]:null}processSegmentAgainstRoute(e,n,r,i){if(e.redirectTo||!vA(e,n,r,i))return null;let s,o=[],a=[];if("**"===e.path){const f=r.length>0?Gx(r).parameters:{};s=new vd(r,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,SA(e),Dn(e),e.component,e,IA(n),TA(n)+r.length,xA(e))}else{const f=Dd(n,e,r);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new vd(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,SA(e),Dn(e),e.component,e,IA(n),TA(n)+o.length,xA(e))}const u=function Pq(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:l}=bd(n,o,a,u.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===l.length&&c.hasChildren()){const f=this.processChildren(u,c);return null===f?null:[new Mr(s,f)]}if(0===u.length&&0===l.length)return[new Mr(s,[])];const d=Dn(e)===i,h=this.processSegment(u,c,l,d?J:i);return null===h?null:[new Mr(s,h)]}}function Lq(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function CA(t){const e=[],n=new Set;for(const r of t){if(!Lq(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=CA(r.children);e.push(new Mr(r.value,i))}return e.filter(r=>!n.has(r))}function IA(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function TA(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function SA(t){return t.data||{}}function xA(t){return t.resolve||{}}function AA(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function ry(t){return zi(e=>{const n=t(e);return n?Et(n).pipe(ye(()=>e)):Y(e)})}class zq extends class qq{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const iy=new se("ROUTES");class MA{constructor(e,n,r,i){this.injector=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const i=this.loadModuleFactory(n.loadChildren).pipe(ye(s=>{this.onLoadEndListener&&this.onLoadEndListener(n);const o=s.create(e);return new Jm(zx(o.injector.get(iy,void 0,U.Self|U.Optional)).map(ty),o)}),si(s=>{throw n._loader$=void 0,s}));return n._loader$=new r9(i,()=>new mr).pipe(Fx()),n._loader$}loadModuleFactory(e){return ir(e()).pipe(rt(n=>n instanceof YT?Y(n):Et(this.compiler.compileModuleAsync(n))))}}class Wq{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function Kq(t){throw t}function Qq(t,e,n){return e.parse("/")}function NA(t,e){return Y(null)}const Yq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Zq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kt=(()=>{class t{constructor(n,r,i,s,o,a,u){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mr,this.errorHandler=Kq,this.malformedUriErrorHandler=Qq,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:NA,afterPreactivation:NA},this.urlHandlingStrategy=new Wq,this.routeReuseStrategy=new zq,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Ir),this.console=o.get(W$);const d=o.get(gt);this.isNgZoneEnabled=d instanceof gt&&gt.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function E9(){return new Gi(new ne([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new MA(o,a,h=>this.triggerEvent(new jx(h)),h=>this.triggerEvent(new Ux(h))),this.routerState=sA(this.currentUrlTree,this.rootComponentType),this.transitions=new Pn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(wo(i=>0!==i.id),ye(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),zi(i=>{let s=!1,o=!1;return Y(i).pipe(Wt(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),zi(a=>{const u=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return RA(a.source)&&(this.browserUrlTree=a.extractedUrl),Y(a).pipe(zi(d=>{const h=this.transitions.getValue();return r.next(new $m(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?vr:Promise.resolve(d)}),function vq(t,e,n,r){return zi(i=>function gq(t,e,n,r,i){return new mq(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(ye(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Wt(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function Vq(t,e,n,r,i){return rt(s=>function Oq(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new kq(t,e,n,r,i,s).recognize();return null===o?EA(new Rq):Y(o)}catch(o){return EA(o)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(ye(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Wt(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new l9(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=a,_=new $m(h,this.serializeUrl(f),p,g);r.next(_);const y=sA(f,this.rootComponentType).snapshot;return Y(Object.assign(Object.assign({},a),{targetSnapshot:y,urlAfterRedirects:f,extras:Object.assign(Object.assign({},m),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),vr}),ry(a=>{const{targetSnapshot:u,id:c,extractedUrl:l,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(u,{navigationId:c,appliedUrlTree:l,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Wt(a=>{const u=new d9(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(u)}),ye(a=>Object.assign(Object.assign({},a),{guards:_q(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function Cq(t,e){return rt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Y(Object.assign(Object.assign({},n),{guardsResult:!0})):function Iq(t,e,n,r){return Et(t).pipe(rt(i=>function Nq(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Y(s.map(a=>{const u=Td(a,e,i);let c;if(function iq(t){return t&&oi(t.canDeactivate)}(u))c=ir(u.canDeactivate(t,e,n,r));else{if(!oi(u))throw new Error("Invalid CanDeactivate guard");c=ir(u(t,e,n,r))}return c.pipe(Do())})).pipe(Iu()):Y(!0)}(i.component,i.route,n,e,r)),Do(i=>!0!==i,!0))}(o,r,i,t).pipe(rt(a=>a&&function eq(t){return"boolean"==typeof t}(a)?function Tq(t,e,n,r){return Et(e).pipe(vu(i=>Bm(function xq(t,e){return null!==t&&e&&e(new g9(t)),Y(!0)}(i.route.parent,r),function Sq(t,e){return null!==t&&e&&e(new y9(t)),Y(!0)}(i.route,r),function Mq(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function wq(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>kx(()=>Y(o.guards.map(u=>{const c=Td(u,o.node,n);let l;if(function rq(t){return t&&oi(t.canActivateChild)}(c))l=ir(c.canActivateChild(r,t));else{if(!oi(c))throw new Error("Invalid CanActivateChild guard");l=ir(c(r,t))}return l.pipe(Do())})).pipe(Iu())));return Y(s).pipe(Iu())}(t,i.path,n),function Aq(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Y(!0);const i=r.map(s=>kx(()=>{const o=Td(s,e,n);let a;if(function nq(t){return t&&oi(t.canActivate)}(o))a=ir(o.canActivate(e,t));else{if(!oi(o))throw new Error("Invalid CanActivate guard");a=ir(o(e,t))}return a.pipe(Do())}));return Y(i).pipe(Iu())}(t,i.route,n))),Do(i=>!0!==i,!0))}(r,s,t,e):Y(a)),ye(a=>Object.assign(Object.assign({},n),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Wt(a=>{if(Ki(a.guardsResult)){const c=Hm(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const u=new h9(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(u)}),wo(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),ry(a=>{if(a.guards.canActivateChecks.length)return Y(a).pipe(Wt(u=>{const c=new f9(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(c)}),zi(u=>{let c=!1;return Y(u).pipe(function Bq(t,e){return rt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let s=0;return Et(i).pipe(vu(o=>function jq(t,e,n,r){return function Uq(t,e,n,r){const i=AA(t);if(0===i.length)return Y({});const s={};return Et(i).pipe(rt(o=>function $q(t,e,n,r){const i=Td(t,e,r);return ir(i.resolve?i.resolve(e,n):i(e,n))}(t[o],e,n,r).pipe(Wt(a=>{s[o]=a}))),Um(1),rt(()=>AA(s).length===i.length?Y(s):vr))}(t._resolve,t,e,r).pipe(ye(s=>(t._resolvedData=s,t.data=Object.assign(Object.assign({},t.data),oA(t,n).resolve),null)))}(o.route,r,t,e)),Wt(()=>s++),Um(1),rt(o=>s===i.length?Y(n):vr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Wt({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(u),this.cancelNavigationTransition(u,"At least one route resolver didn't emit any value."))}}))}),Wt(u=>{const c=new p9(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(c)}))}),ry(a=>{const{targetSnapshot:u,id:c,extractedUrl:l,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(u,{navigationId:c,appliedUrlTree:l,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),ye(a=>{const u=function U9(t,e,n){const r=bu(t,e._root,n?n._root:void 0);return new iA(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:u})}),Wt(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((t,e,n)=>ye(r=>(new X9(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Wt({next(){s=!0},complete(){s=!0}}),function u9(t){return dt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),si(a=>{if(o=!0,function w9(t){return t&&t[Hx]}(a)){const u=Ki(a.url);u||(this.navigated=!0,this.restoreHistory(i,!0));const c=new Bx(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),u?setTimeout(()=>{const l=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||RA(i.source)};this.scheduleNavigation(l,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const u=new c9(i.id,this.serializeUrl(i.extractedUrl),a);r.next(u);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return vr}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=n.state)||void 0===i?void 0:i.navigationId)?n.state:null;if(o){const u=Object.assign({},o);delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){gA(n),this.config=n.map(ty),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=i||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function q9(t,e,n,r,i){if(0===n.length)return Ym(e.root,e.root,e.root,r,i);const s=function z9(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new lA(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return mt(s.outlets,(u,c)=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new lA(n,e,r)}(n);if(s.toRoot())return Ym(e.root,e.root,new ne([],{}),r,i);const o=function G9(t,e,n){if(t.isAbsolute)return new Zm(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const s=n.snapshot._urlSegment;return new Zm(s,s===e.root,0)}const r=_d(t.commands[0])?0:1;return function W9(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Zm(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?wd(o.segmentGroup,o.index,s.commands):dA(o.segmentGroup,o.index,s.commands);return Ym(e.root,o.segmentGroup,a,r,i)}(c,this.currentUrlTree,n,d,null!=l?l:null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ki(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function Xq(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?Object.assign({},Yq):!1===r?Object.assign({},Zq):r,Ki(n))return Kx(this.currentUrlTree,n,i);const s=this.parseUrl(n);return Kx(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new _u(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,s,o){var a,u;if(this.disposed)return Promise.resolve(!1);let c,l,d;o?(c=o.resolve,l=o.reject,d=o.promise):d=new Promise((p,g)=>{c=p,l=g});const h=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),f=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(u=this.browserPageId)&&void 0!==u?u:0)+1):f=0,this.setTransition({id:h,targetPageId:f,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new Bx(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){_g()},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})();function RA(t){return"imperative"!==t}class OA{}class kA{preload(e,n){return Y(null)}}let FA=(()=>{class t{constructor(n,r,i,s){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=new MA(i,r,u=>n.triggerEvent(new jx(u)),u=>n.triggerEvent(new Ux(u)))}setUpPreloading(){this.subscription=this.router.events.pipe(wo(n=>n instanceof _u),vu(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(Ir);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(n,s)):s.children&&i.push(this.processRoutes(n,s.children));return Et(i).pipe(Da(),ye(s=>{}))}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Y(r._loadedConfig):this.loader.load(n.injector,r)).pipe(rt(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return t.\u0275fac=function(n){return new(n||t)(V(Kt),V(OS),V(an),V(OA))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})(),ay=(()=>{class t{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof $m?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof _u&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof $x&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new $x(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){_g()},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})();const Qi=new se("ROUTER_CONFIGURATION"),PA=new se("ROUTER_FORROOT_GUARD"),n6=[vm,{provide:Xx,useClass:Jx},{provide:Kt,useFactory:function a6(t,e,n,r,i,s,o={},a,u){const c=new Kt(null,t,e,n,r,i,zx(s));return a&&(c.urlHandlingStrategy=a),u&&(c.routeReuseStrategy=u),function u6(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(e.canceledNavigationResolution=t.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(l=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${l.constructor.name}`),console.log(l.toString()),console.log(l),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[Xx,Tu,vm,an,OS,iy,Qi,[class Gq{},new mn],[class Hq{},new mn]]},Tu,{provide:Co,useFactory:function c6(t){return t.routerState.root},deps:[Kt]},FA,kA,class t6{preload(e,n){return n().pipe(si(()=>Y(null)))}},{provide:Qi,useValue:{enableTracing:!1}}];function r6(){return new VS("Router",Kt)}let LA=(()=>{class t{constructor(n,r){}static forRoot(n,r){return{ngModule:t,providers:[n6,VA(n),{provide:PA,useFactory:o6,deps:[[Kt,new mn,new Ba]]},{provide:Qi,useValue:r||{}},{provide:_o,useFactory:s6,deps:[qi,[new yl(ym),new mn],Qi]},{provide:ay,useFactory:i6,deps:[Kt,s3,Qi]},{provide:OA,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:kA},{provide:VS,multi:!0,useFactory:r6},[uy,{provide:em,multi:!0,useFactory:l6,deps:[uy]},{provide:BA,useFactory:d6,deps:[uy]},{provide:RS,multi:!0,useExisting:BA}]]}}static forChild(n){return{ngModule:t,providers:[VA(n)]}}}return t.\u0275fac=function(n){return new(n||t)(V(PA,8),V(Kt,8))},t.\u0275mod=Ni({type:t}),t.\u0275inj=zr({}),t})();function i6(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ay(t,e,n)}function s6(t,e,n={}){return n.useHash?new B4(t,e):new rx(t,e)}function o6(t){return"guarded"}function VA(t){return[{provide:gL,multi:!0,useValue:t},{provide:iy,multi:!0,useValue:t}]}let uy=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new mr}appInitializer(){return this.injector.get(P4,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(Kt),o=this.injector.get(Qi);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Y(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(n){const r=this.injector.get(Qi),i=this.injector.get(FA),s=this.injector.get(ay),o=this.injector.get(Kt),a=this.injector.get(cm);n===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(V(an))},t.\u0275prov=ie({token:t,factory:t.\u0275fac}),t})();function l6(t){return t.appInitializer.bind(t)}function d6(t){return t.bootstrapListener.bind(t)}const BA=new se("Router Initializer");let jA=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-checklist"]],decls:2,vars:0,template:function(n,r){1&n&&(Jn(0,"p"),fo(1,"checklist works!"),er())},styles:[""]}),t})();const f6=[{path:"",component:jA},{path:"pagar",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-payable"]],decls:2,vars:0,template:function(n,r){1&n&&(Jn(0,"p"),fo(1,"payable works!"),er())},styles:[""]}),t})()},{path:"pagas",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-paid"]],decls:2,vars:0,template:function(n,r){1&n&&(Jn(0,"p"),fo(1,"paid works!"),er())},styles:[""]}),t})()},{path:"historico",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-historic"]],decls:2,vars:0,template:function(n,r){1&n&&(Jn(0,"p"),fo(1,"historic works!"),er())},styles:[""]}),t})()},{path:"checklist",component:jA}];let p6=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ni({type:t}),t.\u0275inj=zr({imports:[[LA.forRoot(f6)],LA]}),t})();function g6(t,e){if(1&t){const n=function bI(){return E()}();Jn(0,"ul",3)(1,"li",4),eu("click",function(){const s=function Fb(t){return q.lFrame.contextLView=t,t[8]}(n).$implicit;return xI().navigateTo(s.link)}),fo(2),er()()}if(2&t){const n=e.$implicit;Vp(2),Sg(n.label)}}let m6=(()=>{class t{constructor(n){this.route=n,this.menu=[{label:"Contas \xe0 pagar",link:"pagar"},{label:"Contas pagas",link:"pagas"},{label:"Checklist contas",link:"checklist"},{label:"Hist\xf3rico",link:"historico"}]}ngOnInit(){}navigateTo(n){this.route.navigate(["/"+n])}}return t.\u0275fac=function(n){return new(n||t)(F(Kt))},t.\u0275cmp=zn({type:t,selectors:[["app-sidebar"]],decls:3,vars:1,consts:[[1,"all"],[1,"box-list"],["class","list",4,"ngFor","ngForOf"],[1,"list"],[3,"click"]],template:function(n,r){1&n&&(Jn(0,"div",0)(1,"div",1),function lI(t,e,n,r,i,s,o,a){const u=E(),c=ae(),l=t+20,d=c.firstCreatePass?function EB(t,e,n,r,i,s,o,a,u){const c=e.consts,l=Qs(e,t,4,o||null,Qr(c,a));Jp(e,n,l,Qr(c,u)),sl(e,l);const d=l.tViews=Al(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Wn(d,!1);const h=u[G].createComment("");wl(c,u,h,d),Tt(h,u),Ml(u,u[l]=AC(h,u,h,d)),el(d)&&Zp(c,u,d),null!=o&&Xp(u,d,a)}(2,g6,3,1,"ul",2),er()()),2&n&&(Vp(2),wg("ngForOf",r.menu))},directives:[fx],styles:[".all[_ngcontent-%COMP%]{width:220px;height:100vh;background-color:#40e0d0;margin-top:-16px;font-weight:700;font-size:20px;font-family:monospace}.box-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:14px}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:24px;list-style:none;padding:0}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),t})(),y6=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-home"]],decls:1,vars:0,template:function(n,r){1&n&&Ja(0,"router-outlet")},directives:[ey],styles:[""]}),t})(),v6=(()=>{class t{constructor(){this.title="contas"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"all"]],template:function(n,r){1&n&&(Jn(0,"div",0),Ja(1,"app-sidebar")(2,"app-home"),er())},directives:[m6,y6],styles:[".all[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:start}"]}),t})();function UA(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function D(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){UA(s,r,i,o,a,"next",u)}function a(u){UA(s,r,i,o,a,"throw",u)}o(void 0)})}}const $A=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},HA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($A(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new b6;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class b6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const To=function(t){return function(t){const e=$A(t);return HA.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Sd=()=>{try{return function I6(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&function(t){try{return HA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}};class zA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function GA(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Yi(){try{return"object"==typeof indexedDB}catch(t){return!1}}function So(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function hy(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ln extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zi.prototype.create)}}class Zi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function R6(t,e){return t.replace(O6,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Ln(i,`${this.serviceName}: ${o} (${i}).`,r)}}const O6=/\{\$([^}]+)}/g;function Mu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(KA(s)&&KA(o)){if(!Mu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function KA(t){return null!==t&&"object"==typeof t}function gy(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function ai(t){return t&&t._delegate?t._delegate:t}class xt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xi="[DEFAULT]";class U6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(n=null==e?void 0:e.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function H6(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=Xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return D(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Xi){return this.instances.has(e)}getOptions(e=Xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Xi?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}var t;return r||null}normalizeInstanceIdentifier(e=Xi){return this.component?this.component.multipleInstances?e:Xi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class QA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new U6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const my=[];var le=(()=>{return(t=le||(le={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",le;var t})();const YA={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},q6=le.INFO,z6={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},G6=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=z6[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class Nu{constructor(e){this.name=e,this._logLevel=q6,this._logHandler=G6,this._userLogHandler=null,my.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?YA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}let ZA,XA;const JA=new WeakMap,yy=new WeakMap,e1=new WeakMap,vy=new WeakMap,_y=new WeakMap;let wy={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return yy.get(t);if("objectStoreNames"===e)return t.objectStoreNames||e1.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ez(t){return"function"==typeof t?function J6(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Q6(){return XA||(XA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(Dy(this),e),ui(JA.get(this))}:function(...e){return ui(t.apply(Dy(this),e))}:function(e,...n){const r=t.call(Dy(this),e,...n);return e1.set(r,e.sort?e.sort():[e]),ui(r)}}(t):(t instanceof IDBTransaction&&function Z6(t){if(yy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yy.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function K6(){return ZA||(ZA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,wy):t)}function ui(t){if(t instanceof IDBRequest)return function Y6(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ui(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JA.set(n,t)}).catch(()=>{}),_y.set(e,t),e}(t);if(vy.has(t))return vy.get(t);const e=ez(t);return e!==t&&(vy.set(t,e),_y.set(e,t)),e}const Dy=t=>_y.get(t),nz=["get","getKey","getAll","getAllKeys","count"],rz=["put","add","delete","clear"],by=new Map;function t1(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(by.get(e))return by.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!nz.includes(n))return;const s=function(){var o=D(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return by.set(e,s),s}!function X6(t){wy=t(wy)}(t=>mf(gf({},t),{get:(e,n,r)=>t1(e,n)||t.get(e,n,r),has:(e,n)=>!!t1(e,n)||t.has(e,n)}));class iz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function sz(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Ey="@firebase/app",Ji=new Nu("@firebase/app"),Nz={[Ey]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},es=new Map,Nd=new Map;function Rz(t,e){try{t.container.addComponent(e)}catch(n){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sr(t){const e=t.name;if(Nd.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;Nd.set(e,t);for(const n of es.values())Rz(n,t);return!0}function Cy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Nr=new Zi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kz{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}function bn(t,e,n){var r;let i=null!==(r=Nz[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ji.warn(a.join(" "))}sr(new xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Ru="firebase-heartbeat-store";let c1,l1,Ty=null;function i1(){return Ty||(Ty=function tz(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ui(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ui(o.result),u.oldVersion,u.newVersion,ui(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Ru)}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),Ty}function Sy(){return(Sy=D(function*(t){try{return(yield i1()).transaction(Ru).objectStore(Ru).get(o1(t))}catch(e){if(e instanceof Ln)Ji.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Ji.warn(n.message)}}})).apply(this,arguments)}function s1(t,e){return xy.apply(this,arguments)}function xy(){return(xy=D(function*(t,e){try{const r=(yield i1()).transaction(Ru,"readwrite");return yield r.objectStore(Ru).put(e,o1(t)),r.done}catch(n){if(n instanceof Ln)Ji.warn(n.message);else{const r=Nr.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Ji.warn(r.message)}}})).apply(this,arguments)}function o1(t){return`${t.name}!${t.options.appId}`}class Uz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Hz(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return D(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=a1();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return D(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=a1(),{heartbeatsToSend:r,unsentEntries:i}=function $z(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),u1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),u1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=To(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function a1(){return(new Date).toISOString().substring(0,10)}class Hz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return D(function*(){return!!Yi()&&So().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return D(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Vz(t){return Sy.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return D(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return s1(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return D(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return s1(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function u1(t){return To(JSON.stringify({version:2,heartbeats:t})).length}!function qz(t){sr(new xt("platform-logger",e=>new iz(e),"PRIVATE")),sr(new xt("heartbeat",e=>new Uz(e),"PRIVATE")),bn(Ey,"0.9.9",t),bn(Ey,"0.9.9","esm2017"),bn("fire-js","")}(""),bn("firebase","9.21.0","app");const d1=new WeakMap,Ay=new WeakMap,h1=new WeakMap,My=new WeakMap,Ny=new WeakMap;let Ry={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Ay.get(t);if("objectStoreNames"===e)return t.objectStoreNames||h1.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function e7(t){return"function"==typeof t?function Jz(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qz(){return l1||(l1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(Oy(this),e),ci(d1.get(this))}:function(...e){return ci(t.apply(Oy(this),e))}:function(e,...n){const r=t.call(Oy(this),e,...n);return h1.set(r,e.sort?e.sort():[e]),ci(r)}}(t):(t instanceof IDBTransaction&&function Zz(t){if(Ay.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ay.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function Kz(){return c1||(c1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,Ry):t)}function ci(t){if(t instanceof IDBRequest)return function Yz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ci(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&d1.set(n,t)}).catch(()=>{}),Ny.set(e,t),e}(t);if(My.has(t))return My.get(t);const e=e7(t);return e!==t&&(My.set(t,e),Ny.set(e,t)),e}const Oy=t=>Ny.get(t),n7=["get","getKey","getAll","getAllKeys","count"],r7=["put","add","delete","clear"],ky=new Map;function f1(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(ky.get(e))return ky.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=r7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!n7.includes(n))return;const s=function(){var o=D(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return ky.set(e,s),s}let D1,b1;!function Xz(t){Ry=t(Ry)}(t=>mf(gf({},t),{get:(e,n,r)=>f1(e,n)||t.get(e,n,r),has:(e,n)=>!!f1(e,n)||t.has(e,n)}));const E1=new WeakMap,jy=new WeakMap,C1=new WeakMap,Uy=new WeakMap,$y=new WeakMap;let Hy={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return jy.get(t);if("objectStoreNames"===e)return t.objectStoreNames||C1.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function rG(t){return"function"==typeof t?function nG(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function X7(){return b1||(b1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(qy(this),e),Or(E1.get(this))}:function(...e){return Or(t.apply(qy(this),e))}:function(e,...n){const r=t.call(qy(this),e,...n);return C1.set(r,e.sort?e.sort():[e]),Or(r)}}(t):(t instanceof IDBTransaction&&function eG(t){if(jy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jy.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function Z7(){return D1||(D1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,Hy):t)}function Or(t){if(t instanceof IDBRequest)return function J7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Or(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&E1.set(n,t)}).catch(()=>{}),$y.set(e,t),e}(t);if(Uy.has(t))return Uy.get(t);const e=rG(t);return e!==t&&(Uy.set(t,e),$y.set(e,t)),e}const qy=t=>$y.get(t);function zy(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Or(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Or(o.result),u.oldVersion,u.newVersion,Or(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function Gy(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Or(n).then(()=>{})}const iG=["get","getKey","getAll","getAllKeys","count"],sG=["put","add","delete","clear"],Wy=new Map;function I1(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Wy.get(e))return Wy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=sG.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!iG.includes(n))return;const s=function(){var o=D(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return Wy.set(e,s),s}!function tG(t){Hy=t(Hy)}(t=>mf(gf({},t),{get:(e,n,r)=>I1(e,n)||t.get(e,n,r),has:(e,n)=>!!I1(e,n)||t.has(e,n)}));const T1="@firebase/installations",x1="w:0.6.4",A1="FIS_v2",kr=new Zi("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function M1(t){return t instanceof Ln&&t.code.includes("request-failed")}function Qy({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function N1(t){return{token:t.token,requestStatus:2,expiresIn:dG(t.expiresIn),creationTime:Date.now()}}function Yy(t,e){return Zy.apply(this,arguments)}function Zy(){return(Zy=D(function*(t,e){const r=(yield e.json()).error;return kr.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function R1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function O1(t,{refreshToken:e}){const n=R1(t);return n.append("Authorization",function hG(t){return`${A1} ${t}`}(e)),n}function Xy(t){return Jy.apply(this,arguments)}function Jy(){return(Jy=D(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function dG(t){return Number(t.replace("s","000"))}function fG(t,e){return ev.apply(this,arguments)}function ev(){return(ev=D(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Qy(t),i=R1(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:A1,appId:t.appId,sdkVersion:x1})},u=yield Xy(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:N1(c.authToken)}}throw yield Yy("Create Installation",u)})).apply(this,arguments)}function k1(t){return new Promise(e=>{setTimeout(e,t)})}const gG=/^[cdef][\w-]{21}$/;function mG(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function yG(t){return function pG(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return gG.test(n)?n:""}catch(t){return""}}function Ao(t){return`${t.appName}!${t.appId}`}const Mo=new Map;function F1(t,e){const n=Ao(t);P1(n,e),function wG(t,e){const n=function L1(){return!rs&&"BroadcastChannel"in self&&(rs=new BroadcastChannel("[Firebase] FID Change"),rs.onmessage=t=>{P1(t.data.key,t.data.fid)}),rs}();n&&n.postMessage({key:t,fid:e}),function V1(){0===Mo.size&&rs&&(rs.close(),rs=null)}()}(n,e)}function P1(t,e){const n=Mo.get(t);if(n)for(const r of n)r(e)}let rs=null;const is="firebase-installations-store";let nv=null;function rv(){return nv||(nv=zy("firebase-installations-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(is)}})),nv}function Fd(t,e){return iv.apply(this,arguments)}function iv(){return(iv=D(function*(t,e){const n=Ao(t),i=(yield rv()).transaction(is,"readwrite"),s=i.objectStore(is),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&F1(t,e.fid),e})).apply(this,arguments)}function sv(t){return ov.apply(this,arguments)}function ov(){return(ov=D(function*(t){const e=Ao(t),r=(yield rv()).transaction(is,"readwrite");yield r.objectStore(is).delete(e),yield r.done})).apply(this,arguments)}function ku(t,e){return av.apply(this,arguments)}function av(){return(av=D(function*(t,e){const n=Ao(t),i=(yield rv()).transaction(is,"readwrite"),s=i.objectStore(is),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&F1(t,a.fid),a})).apply(this,arguments)}function uv(t){return cv.apply(this,arguments)}function cv(){return(cv=D(function*(t){let e;const n=yield ku(t.appConfig,r=>{const i=EG(r),s=CG(t,i);return e=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})).apply(this,arguments)}function EG(t){return j1(t||{fid:mG(),registrationStatus:0})}function CG(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(kr.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function IG(t,e){return lv.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:TG(t)}:{installationEntry:e}}function lv(){return(lv=D(function*(t,e){try{const n=yield fG(t,e);return Fd(t.appConfig,n)}catch(n){throw M1(n)&&409===n.customData.serverCode?yield sv(t.appConfig):yield Fd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})).apply(this,arguments)}function TG(t){return dv.apply(this,arguments)}function dv(){return(dv=D(function*(t){let e=yield B1(t.appConfig);for(;1===e.registrationStatus;)yield k1(100),e=yield B1(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield uv(t);return r||n}return e})).apply(this,arguments)}function B1(t){return ku(t,e=>{if(!e)throw kr.create("installation-not-found");return j1(e)})}function j1(t){return function SG(t){return 1===t.registrationStatus&&t.registrationTime+1e4<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function xG(t,e){return hv.apply(this,arguments)}function hv(){return(hv=D(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=AG(t,n),i=O1(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:x1,appId:t.appId}})},u=yield Xy(()=>fetch(r,a));if(u.ok)return N1(yield u.json());throw yield Yy("Generate Auth Token",u)})).apply(this,arguments)}function AG(t,{fid:e}){return`${Qy(t)}/${e}/authTokens:generate`}function fv(t){return pv.apply(this,arguments)}function pv(){return(pv=D(function*(t,e=!1){let n;const r=yield ku(t.appConfig,s=>{if(!$1(s))throw kr.create("not-registered");const o=s.authToken;if(!e&&RG(o))return s;if(1===o.requestStatus)return n=MG(t,e),s;{if(!navigator.onLine)throw kr.create("app-offline");const a=kG(s);return n=NG(t,a),a}});return n?yield n:r.authToken})).apply(this,arguments)}function MG(t,e){return gv.apply(this,arguments)}function gv(){return(gv=D(function*(t,e){let n=yield U1(t.appConfig);for(;1===n.authToken.requestStatus;)yield k1(100),n=yield U1(t.appConfig);const r=n.authToken;return 0===r.requestStatus?fv(t,e):r})).apply(this,arguments)}function U1(t){return ku(t,e=>{if(!$1(e))throw kr.create("not-registered");return function FG(t){return 1===t.requestStatus&&t.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function NG(t,e){return mv.apply(this,arguments)}function mv(){return(mv=D(function*(t,e){try{const n=yield xG(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Fd(t.appConfig,r),n}catch(n){if(!M1(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Fd(t.appConfig,r)}else yield sv(t.appConfig);throw n}})).apply(this,arguments)}function $1(t){return void 0!==t&&2===t.registrationStatus}function RG(t){return 2===t.requestStatus&&!function OG(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}function kG(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function yv(){return(yv=D(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield uv(e);return r?r.catch(console.error):fv(e).catch(console.error),n.fid})).apply(this,arguments)}function vv(){return(vv=D(function*(t,e=!1){const n=t;return yield VG(n),(yield fv(n,e)).token})).apply(this,arguments)}function VG(t){return _v.apply(this,arguments)}function _v(){return(_v=D(function*(t){const{registrationPromise:e}=yield uv(t);e&&(yield e)})).apply(this,arguments)}function bv(t){return kr.create("missing-app-config-values",{valueName:t})}const H1="installations",HG=t=>{const e=t.getProvider("app").getImmediate(),n=function UG(t){if(!t||!t.options)throw bv("App Configuration");if(!t.name)throw bv("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw bv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Cy(e,"heartbeat"),_delete:()=>Promise.resolve()}},qG=t=>{const n=Cy(t.getProvider("app").getImmediate(),H1).getImmediate();return{getId:()=>function PG(t){return yv.apply(this,arguments)}(n),getToken:i=>function LG(t){return vv.apply(this,arguments)}(n,i)}};(function zG(){sr(new xt(H1,HG,"PUBLIC")),sr(new xt("installations-internal",qG,"PRIVATE"))})(),bn(T1,"0.6.4"),bn(T1,"0.6.4","esm2017");const Ev="@firebase/remote-config",Qt=new Zi("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class n5{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return D(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function r5(t=navigator){return t.languages&&t.languages[0]||t.language}class i5{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return D(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:r5()},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise((_,y)=>{e.signal.addEventListener(()=>{const C=new Error("The operation was aborted.");C.name="AbortError",y(C)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(_){let y="fetch-client-network";throw"AbortError"===(null==_?void 0:_.name)&&(y="fetch-timeout"),Qt.create(y,{originalErrorMessage:null==_?void 0:_.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,m;if(200===h.status){let _;try{_=yield h.json()}catch(y){throw Qt.create("fetch-client-parse",{originalErrorMessage:null==y?void 0:y.message})}g=_.entries,m=_.state}if("INSTANCE_STATE_UNSPECIFIED"===m?f=500:"NO_CHANGE"===m?f=304:("NO_TEMPLATE"===m||"EMPTY_CONFIG"===m)&&(g={}),304!==f&&200!==f)throw Qt.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class a5{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return D(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return D(function*(){yield function s5(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Qt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function o5(t){if(!(t instanceof Ln&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+gy(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class l5{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ld(t,e){const n=t.target.error||void 0;return Qt.create(e,{originalErrorMessage:n&&(null==n?void 0:n.message)})}const ss="app_namespace_store";class p5{constructor(e,n,r,i=function f5(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(Ld(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ss,{keyPath:"compositeKey"})}}catch(n){e(Qt.create("storage-open",{originalErrorMessage:null==n?void 0:n.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return D(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([ss],"readonly").objectStore(ss),u=n.createCompositeKey(e);try{const c=a.get(u);c.onerror=l=>{s(Ld(l,"storage-get"))},c.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(c){s(Qt.create("storage-get",{originalErrorMessage:null==c?void 0:c.message}))}})})()}set(e,n){var r=this;return D(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([ss],"readwrite").objectStore(ss),c=r.createCompositeKey(e);try{const l=u.put({compositeKey:c,value:n});l.onerror=d=>{o(Ld(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(Qt.create("storage-set",{originalErrorMessage:null==l?void 0:l.message}))}})})()}delete(e){var n=this;return D(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([ss],"readwrite").objectStore(ss),u=n.createCompositeKey(e);try{const c=a.delete(u);c.onerror=l=>{s(Ld(l,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(Qt.create("storage-delete",{originalErrorMessage:null==c?void 0:c.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class g5{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return D(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function y5(){return xv.apply(this,arguments)}function xv(){return(xv=D(function*(){if(!Yi())return!1;try{return yield So()}catch(t){return!1}})).apply(this,arguments)}!function m5(){sr(new xt("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Qt.create("registration-window");if(!Yi())throw Qt.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Qt.create("registration-project-id");if(!o)throw Qt.create("registration-api-key");if(!a)throw Qt.create("registration-app-id");const u=new p5(a,r.name,n=n||"firebase"),c=new g5(u),l=new Nu(Ev);l.logLevel=le.ERROR;const d=new i5(i,"9.21.0",n,s,o,a),h=new a5(d,u),f=new n5(h,u,c,l),p=new l5(r,f,c,u,l);return function JG(t){const e=ai(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),bn(Ev,"0.4.4"),bn(Ev,"0.4.4","esm2017")}();const v5="/firebase-messaging-sw.js",_5="/firebase-cloud-messaging-push-scope",W1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",K1="google.c.a.c_id",D5="google.c.a.c_l",b5="google.c.a.ts",E5="google.c.a.e";var No=(()=>{return(t=No||(No={})).PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",No;var t})();function Fr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function C5(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const Av="fcm_token_details_db",Q1="fcm_token_object_Store";function T5(t){return Mv.apply(this,arguments)}function Mv(){return Mv=D(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(Av))return null;let e=null;return(yield zy(Av,5,{upgrade:(r=D(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(Q1))return;const c=a.objectStore(Q1),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Fr(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Fr(d.auth),p256dh:Fr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Fr(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Fr(d.auth),p256dh:Fr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Fr(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield Gy(Av),yield Gy("fcm_vapid_details_db"),yield Gy("undefined"),S5(e)?e:null;var r}),Mv.apply(this,arguments)}function S5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const os="firebase-messaging-store";let Nv=null;function Rv(){return Nv||(Nv=zy("firebase-messaging-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(os)}})),Nv}function Y1(t){return Ov.apply(this,arguments)}function Ov(){return(Ov=D(function*(t){const e=Lv(t),r=yield(yield Rv()).transaction(os).objectStore(os).get(e);if(r)return r;{const i=yield T5(t.appConfig.senderId);if(i)return yield kv(t,i),i}})).apply(this,arguments)}function kv(t,e){return Fv.apply(this,arguments)}function Fv(){return(Fv=D(function*(t,e){const n=Lv(t),i=(yield Rv()).transaction(os,"readwrite");return yield i.objectStore(os).put(e,n),yield i.done,e})).apply(this,arguments)}function M5(t){return Pv.apply(this,arguments)}function Pv(){return(Pv=D(function*(t){const e=Lv(t),r=(yield Rv()).transaction(os,"readwrite");yield r.objectStore(os).delete(e),yield r.done})).apply(this,arguments)}function Lv({appConfig:t}){return t.appId}const yt=new Zi("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function R5(t,e){return Vv.apply(this,arguments)}function Vv(){return(Vv=D(function*(t,e){const n=yield $v(t),r=X1(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(Uv(t.appConfig),i)).json()}catch(o){throw yt.create("token-subscribe-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw yt.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw yt.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function O5(t,e){return Bv.apply(this,arguments)}function Bv(){return(Bv=D(function*(t,e){const n=yield $v(t),r=X1(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${Uv(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw yt.create("token-update-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw yt.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw yt.create("token-update-no-token");return s.token})).apply(this,arguments)}function Z1(t,e){return jv.apply(this,arguments)}function jv(){return(jv=D(function*(t,e){const r={method:"DELETE",headers:yield $v(t)};try{const s=yield(yield fetch(`${Uv(t.appConfig)}/${e}`,r)).json();if(s.error)throw yt.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw yt.create("token-unsubscribe-failed",{errorInfo:null==i?void 0:i.toString()})}})).apply(this,arguments)}function Uv({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}function $v(t){return Hv.apply(this,arguments)}function Hv(){return(Hv=D(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function X1({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==W1&&(i.web.applicationPubKey=r),i}const k5=6048e5;function F5(t){return qv.apply(this,arguments)}function qv(){return(qv=D(function*(t){const e=yield L5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Fr(e.getKey("auth")),p256dh:Fr(e.getKey("p256dh"))},r=yield Y1(t.firebaseDependencies);if(r){if(V5(r.subscriptionOptions,n))return Date.now()>=r.createTime+k5?P5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield Z1(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return eM(t.firebaseDependencies,n)}return eM(t.firebaseDependencies,n)})).apply(this,arguments)}function J1(t){return zv.apply(this,arguments)}function zv(){return(zv=D(function*(t){const e=yield Y1(t.firebaseDependencies);e&&(yield Z1(t.firebaseDependencies,e.token),yield M5(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function P5(t,e){return Gv.apply(this,arguments)}function Gv(){return(Gv=D(function*(t,e){try{const n=yield O5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield kv(t.firebaseDependencies,r),n}catch(n){throw yield J1(t),n}})).apply(this,arguments)}function eM(t,e){return Wv.apply(this,arguments)}function Wv(){return(Wv=D(function*(t,e){const r={token:yield R5(t,e),createTime:Date.now(),subscriptionOptions:e};return yield kv(t,r),r.token})).apply(this,arguments)}function L5(t,e){return Kv.apply(this,arguments)}function Kv(){return(Kv=D(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:C5(e)})})).apply(this,arguments)}function V5(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}function tM(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function B5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function j5(t,e){!e.data||(t.data=e.data)}(e,t),function U5(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(null===(n=e.notification)||void 0===n?void 0:n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function $5(t){return"object"==typeof t&&!!t&&K1 in t}function nM(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function Qv(t){return yt.create("missing-app-config-values",{valueName:t})}nM("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nM("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class q5{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function H5(t){if(!t||!t.options)throw Qv("App Configuration Object");if(!t.name)throw Qv("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Qv(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function rM(t){return Yv.apply(this,arguments)}function Yv(){return(Yv=D(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(v5,{scope:_5}),t.swRegistration.update().catch(()=>{})}catch(e){throw yt.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}})).apply(this,arguments)}function z5(t,e){return Zv.apply(this,arguments)}function Zv(){return(Zv=D(function*(t,e){if(!e&&!t.swRegistration&&(yield rM(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw yt.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function G5(t,e){return Xv.apply(this,arguments)}function Xv(){return(Xv=D(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=W1)})).apply(this,arguments)}function Jv(){return(Jv=D(function*(t,e){if(!navigator)throw yt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yt.create("permission-blocked");return yield G5(t,null==e?void 0:e.vapidKey),yield z5(t,null==e?void 0:e.serviceWorkerRegistration),F5(t)})).apply(this,arguments)}function W5(t,e,n){return e_.apply(this,arguments)}function e_(){return(e_=D(function*(t,e,n){const r=K5(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[K1],message_name:n[D5],message_time:n[b5],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function K5(t){switch(t){case No.NOTIFICATION_CLICKED:return"notification_open";case No.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function t_(){return(t_=D(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===No.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(tM(n)):t.onMessageHandler.next(tM(n)));const r=n.data;$5(r)&&"1"===r[E5]&&(yield W5(t,n.messageType,r))})).apply(this,arguments)}const sM="@firebase/messaging",Y5=t=>{const e=new q5(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function Q5(t,e){return t_.apply(this,arguments)}(e,n)),e},Z5=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function iM(t,e){return Jv.apply(this,arguments)}(e,r)}};function aM(){return n_.apply(this,arguments)}function n_(){return(n_=D(function*(){try{yield So()}catch(t){return!1}return"undefined"!=typeof window&&Yi()&&hy()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function X5(){sr(new xt("messaging",Y5,"PUBLIC")),sr(new xt("messaging-internal",Z5,"PRIVATE")),bn(sM,"0.12.4"),bn(sM,"0.12.4","esm2017")}();const Vd="analytics",t8="firebase_id",i8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",s_="https://www.googletagmanager.com/gtag/js",st=new Nu("@firebase/analytics"),$t=new Zi("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function o8(t){if(!t.startsWith(s_)){const e=$t.create("invalid-gtag-resource",{gtagURL:t});return st.warn(e.message),""}return t}function uM(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function u8(t,e){const n=function a8(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:o8}),r=document.createElement("script"),i=`${s_}?l=${t}&id=${e}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function l8(t,e,n,r,i,s){return o_.apply(this,arguments)}function o_(){return(o_=D(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield uM(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){st.error(a)}t("config",i,s)})).apply(this,arguments)}function d8(t,e,n,r,i){return a_.apply(this,arguments)}function a_(){return(a_=D(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield uM(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){st.error(s)}})).apply(this,arguments)}function p8(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(s_)&&n.src.includes(t))return n;return null}const cM=new class y8{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function v8(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function _8(t){return u_.apply(this,arguments)}function u_(){return(u_=D(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:v8(r)},s=i8.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message)}catch(u){}throw $t.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function w8(t){return c_.apply(this,arguments)}function c_(){return(c_=D(function*(t,e=cM,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw $t.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw $t.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new E8;return setTimeout(D(function*(){a.abort()}),void 0!==n?n:6e4),lM({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function lM(t,e,n){return l_.apply(this,arguments)}function l_(){return(l_=D(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=cM){var s;const{appId:o,measurementId:a}=t;try{yield D8(r,e)}catch(u){if(a)return st.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==u?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield _8(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!b8(c)){if(i.deleteThrottleMetadata(o),a)return st.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?gy(n,i.intervalMillis,30):gy(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),st.debug(`Calling attemptFetch again in ${l} millis`),lM(t,d,r,i)}})).apply(this,arguments)}function D8(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r($t.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function b8(t){if(!(t instanceof Ln&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}class E8{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let d_,v_;function h_(){return(h_=D(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function dM(t){v_=t}function hM(t){d_=t}function M8(){return __.apply(this,arguments)}function __(){return(__=D(function*(){if(!Yi())return st.warn($t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield So()}catch(t){return st.warn($t.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0})).apply(this,arguments)}function w_(){return(w_=D(function*(t,e,n,r,i,s,o){var a;const u=w8(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&st.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>st.error(f)),e.push(u);const c=M8().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);p8(s)||u8(s,l.measurementId),v_&&(i("consent","default",v_),dM(void 0)),i("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[t8]=d),i("config",l.measurementId,h),d_&&(i("set",d_),hM(void 0)),l.measurementId})).apply(this,arguments)}class R8{constructor(e){this.app=e}_delete(){return delete or[this.app.options.appId],Promise.resolve()}}let or={},fM=[];const pM={};let mM,ar,Bd="dataLayer",D_=!1;function k8(t,e,n){!function O8(){const t=[];if(GA()&&t.push("This is a browser extension environment."),hy()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=$t.create("invalid-analytics-context",{errorInfo:e});st.warn(n.message)}}();const r=t.options.appId;if(!r)throw $t.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw $t.create("no-api-key");st.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=or[r])throw $t.create("already-exists",{id:r});if(!D_){!function c8(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Bd);const{wrappedGtag:s,gtagCore:o}=function f8(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function h8(t,e,n,r){function s(){return(s=D(function*(o,...a){try{if("event"===o){const[u,c]=a;yield d8(t,e,n,u,c)}else if("config"===o){const[u,c]=a;yield l8(t,e,n,r,u,c)}else if("consent"===o){const[u]=a;t("consent","update",u)}else if("get"===o){const[u,c,l]=a;t("get",u,c,l)}else if("set"===o){const[u]=a;t("set",u)}else t(o,...a)}catch(u){st.error(u)}})).apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(or,fM,pM,Bd,"gtag");ar=s,mM=o,D_=!0}return or[r]=function N8(t,e,n,r,i,s,o){return w_.apply(this,arguments)}(t,fM,pM,e,mM,Bd,n),new R8(t)}function P8(){return b_.apply(this,arguments)}function b_(){return(b_=D(function*(){if(GA()||!hy()||!Yi())return!1;try{return yield So()}catch(t){return!1}})).apply(this,arguments)}const yM="@firebase/analytics";!function V8(){sr(new xt(Vd,(e,{options:n})=>k8(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),sr(new xt("analytics-internal",function t(e){try{const n=e.getProvider(Vd).getImmediate();return{logEvent:(r,i,s)=>function L8(t,e,n,r){t=ai(t),function C8(t,e,n,r,i){return h_.apply(this,arguments)}(ar,or[t.app.options.appId],e,n,r).catch(i=>st.error(i))}(n,r,i,s)}}catch(n){throw $t.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),bn(yM,"0.10.0"),bn(yM,"0.10.0","esm2017")}();const C_="__angularfire_symbol__analyticsIsSupportedValue",I_="__angularfire_symbol__analyticsIsSupported",T_="__angularfire_symbol__remoteConfigIsSupportedValue",S_="__angularfire_symbol__remoteConfigIsSupported",x_="__angularfire_symbol__messagingIsSupportedValue",A_="__angularfire_symbol__messagingIsSupported";function Ro(){}globalThis[I_]||(globalThis[I_]=P8().then(t=>globalThis[C_]=t).catch(()=>globalThis[C_]=!1)),globalThis[A_]||(globalThis[A_]=aM().then(t=>globalThis[x_]=t).catch(()=>globalThis[x_]=!1)),globalThis[S_]||(globalThis[S_]=y5().then(t=>globalThis[T_]=t).catch(()=>globalThis[T_]=!1));class U8{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ro,{},Ro,Ro)),n.pipe(Wt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}function as(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function $8(t){return as().ngZone.runOutsideAngular(()=>t())}function us(t){return as().ngZone.run(()=>t())}function H8(t){return as(),function q8(t){return function(n){return(n=n.lift(new U8(t.ngZone))).pipe(Gc(t.outsideAngular),zc(t.insideAngular))}}(as())(t)}const z8=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),us(()=>t.apply(void 0,r))},Oo=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=us(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ro,{},Ro,Ro)))),r[s]=z8(r[s],n));const i=$8(()=>t.apply(this,r));if(!e){if(i instanceof Re){const s=as();return i.pipe(Gc(s.outsideAngular),zc(s.insideAngular))}return us(()=>i)}return i instanceof Re?i.pipe(H8):i instanceof Promise?us(()=>new Promise((s,o)=>i.then(a=>us(()=>s(a)),a=>us(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:us(()=>i)};var x,Y8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vn={},R_=R_||{},$=Y8||self;function Ud(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Fu(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var O_="closure_uid_"+(1e9*Math.random()>>>0),X8=0;function J8(t,e,n){return t.call.apply(t.bind,arguments)}function eW(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function At(t,e,n){return(At=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?J8:eW).apply(null,arguments)}function $d(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function li(){this.s=this.s,this.o=this.o}li.prototype.s=!1,li.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Z8(t){Object.prototype.hasOwnProperty.call(t,O_)&&t[O_]||(t[O_]=++X8)}(this)},li.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _M=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function k_(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function wM(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ud(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Mt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var nW=function(){if(!$.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{$.addEventListener("test",()=>{},e),$.removeEventListener("test",()=>{},e)}catch(n){}return t}();function Pu(t){return/^[\s\xa0]*$/.test(t)}function Hd(){var t=$.navigator;return t&&(t=t.userAgent)?t:""}function ur(t){return-1!=Hd().indexOf(t)}function F_(t){return F_[" "](t),t}F_[" "]=function(){};var L_,iW=ur("Opera"),ko=ur("Trident")||ur("MSIE"),DM=ur("Edge"),P_=DM||ko,bM=ur("Gecko")&&!(-1!=Hd().toLowerCase().indexOf("webkit")&&!ur("Edge"))&&!(ur("Trident")||ur("MSIE"))&&!ur("Edge"),sW=-1!=Hd().toLowerCase().indexOf("webkit")&&!ur("Edge");function EM(){var t=$.document;return t?t.documentMode:void 0}e:{var V_="",B_=function(){var t=Hd();return bM?/rv:([^\);]+)(\)|;)/.exec(t):DM?/Edge\/([\d\.]+)/.exec(t):ko?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):sW?/WebKit\/(\S+)/.exec(t):iW?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(B_&&(V_=B_?B_[1]:""),ko){var j_=EM();if(null!=j_&&j_>parseFloat(V_)){L_=String(j_);break e}}L_=V_}var oW=$.document&&ko&&(EM()||parseInt(L_,10))||void 0;function Lu(t,e){if(Mt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(bM){e:{try{F_(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:aW[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Lu.$.h.call(this)}}var aW={2:"touch",3:"pen",4:"mouse"};Lu.prototype.h=function(){Lu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Vu="closure_listenable_"+(1e6*Math.random()|0),uW=0;function cW(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++uW,this.fa=this.ia=!1}function qd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function $_(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function IM(t){const e={};for(const n in t)e[n]=t[n];return e}const TM="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SM(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<TM.length;s++)n=TM[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function zd(t){this.src=t,this.g={},this.h=0}function H_(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=_M(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(qd(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function q_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}zd.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=q_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new cW(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var z_="closure_lm_"+(1e6*Math.random()|0),G_={};function xM(t,e,n,r,i){if(r&&r.once)return MM(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)xM(t,e[s],n,r,i);return null}return n=Y_(n),t&&t[Vu]?t.O(e,n,Fu(r)?!!r.capture:!!r,i):AM(t,e,n,!1,r,i)}function AM(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Fu(i)?!!i.capture:!!i,a=K_(t);if(a||(t[z_]=a=new zd(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function dW(){const e=hW;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nW||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(RM(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function MM(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)MM(t,e[s],n,r,i);return null}return n=Y_(n),t&&t[Vu]?t.P(e,n,Fu(r)?!!r.capture:!!r,i):AM(t,e,n,!0,r,i)}function NM(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)NM(t,e[s],n,r,i);else r=Fu(r)?!!r.capture:!!r,n=Y_(n),t&&t[Vu]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=q_(s=t.g[e],n,r,i))&&(qd(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=K_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=q_(e,n,r,i)),(n=-1<t?e[t]:null)&&W_(n))}function W_(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Vu])H_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(RM(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=K_(e))?(H_(n,t),0==n.h&&(n.src=null,e[z_]=null)):qd(t)}}}function RM(t){return t in G_?G_[t]:G_[t]="on"+t}function hW(t,e){if(t.fa)t=!0;else{e=new Lu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&W_(t),t=n.call(r,e)}return t}function K_(t){return(t=t[z_])instanceof zd?t:null}var Q_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y_(t){return"function"==typeof t?t:(t[Q_]||(t[Q_]=function(e){return t.handleEvent(e)}),t[Q_])}function at(){li.call(this),this.i=new zd(this),this.S=this,this.J=null}function vt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Mt(e,t);else if(e instanceof Mt)e.target=e.target||t;else{var i=e;SM(e=new Mt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Gd(o,r,!0,e)&&i}if(i=Gd(o=e.g=t,r,!0,e)&&i,i=Gd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Gd(o=e.g=n[s],r,!1,e)&&i}function Gd(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&H_(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}at.prototype[Vu]=!0,at.prototype.removeEventListener=function(t,e,n,r){NM(this,t,e,n,r)},at.prototype.N=function(){if(at.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qd(n[r]);delete t.g[e],t.h--}}this.J=null},at.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},at.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Z_=$.JSON.stringify;class fW{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function pW(){var t=X_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class gW{constructor(){this.h=this.g=null}add(e,n){const r=OM.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var OM=new fW(()=>new mW,t=>t.reset());class mW{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function yW(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function vW(t){$.setTimeout(()=>{throw t},0)}let Bu,ju=!1,X_=new gW,kM=()=>{const t=$.Promise.resolve(void 0);Bu=()=>{t.then(_W)}};var _W=()=>{for(var t;t=pW();){try{t.h.call(t.g)}catch(n){vW(n)}var e=OM;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ju=!1};function Wd(t,e){at.call(this),this.h=t||1,this.g=e||$,this.j=At(this.qb,this),this.l=Date.now()}function J_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function ew(t,e,n){if("function"==typeof t)n&&(t=At(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=At(t.handleEvent,t)}return 2147483647<Number(e)?-1:$.setTimeout(t,e||0)}function FM(t){t.g=ew(()=>{t.g=null,t.i&&(t.i=!1,FM(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}(x=Wd.prototype).ga=!1,x.T=null,x.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vt(this,"tick"),this.ga&&(J_(this),this.start()))}},x.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},x.N=function(){Wd.$.N.call(this),J_(this),delete this.g};class wW extends li{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:FM(this)}N(){super.N(),this.g&&($.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Uu(t){li.call(this),this.h=t,this.g={}}var PM=[];function LM(t,e,n,r){Array.isArray(n)||(n&&(PM[0]=n.toString()),n=PM);for(var i=0;i<n.length;i++){var s=xM(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function VM(t){$_(t.g,function(e,n){this.g.hasOwnProperty(n)&&W_(e)},t),t.g={}}function Kd(){this.g=!0}function Fo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function CW(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Z_(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Uu.prototype.N=function(){Uu.$.N.call(this),VM(this)},Uu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kd.prototype.Ea=function(){this.g=!1},Kd.prototype.info=function(){};var cs={},BM=null;function Qd(){return BM=BM||new at}function jM(t){Mt.call(this,cs.Ta,t)}function $u(t){const e=Qd();vt(e,new jM(e))}function UM(t,e){Mt.call(this,cs.STAT_EVENT,t),this.stat=e}function Ht(t){const e=Qd();vt(e,new UM(e,t))}function $M(t,e){Mt.call(this,cs.Ua,t),this.size=e}function Hu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return $.setTimeout(function(){t()},e)}cs.Ta="serverreachability",cs.STAT_EVENT="statevent",cs.Ua="timingevent";var Yd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},HM={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function zM(){}var iw,qu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nw(){Mt.call(this,"d")}function rw(){Mt.call(this,"c")}function Zd(){}function zu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Uu(this),this.P=IW,this.V=new Wd(t=P_?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new GM}function GM(){this.i=null,this.g="",this.h=!1}Zd.prototype.g=function(){return new XMLHttpRequest},Zd.prototype.i=function(){return{}},iw=new Zd;var IW=45e3,sw={},Xd={};function ow(t,e,n){t.L=1,t.v=nh(Pr(e)),t.s=n,t.S=!0,WM(t,null)}function WM(t,e){t.G=Date.now(),Gu(t),t.A=Pr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),rN(n.i,"t",r),t.C=0,n=t.l.J,t.h=new GM,t.g=SN(t.l,n?e:null,!t.s),0<t.O&&(t.M=new wW(At(t.Pa,t,t.g),t.O)),LM(t.U,t.g,"readystatechange",t.nb),e=t.I?IM(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),$u(),function DW(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function KM(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function QM(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=TW(t,n),i==Xd){4==e&&(t.o=4,Ht(14),r=!1),Fo(t.j,t.m,null,"[Incomplete Response]");break}if(i==sw){t.o=4,Ht(15),Fo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Fo(t.j,t.m,i,null),aw(t,i)}KM(t)&&i!=Xd&&i!=sw&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ht(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),pw(e),e.M=!0,Ht(11))):(Fo(t.j,t.m,n,"[Invalid Chunked Response]"),ls(t),Wu(t))}function TW(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Xd:(n=Number(e.substring(n,r)),isNaN(n)?sw:(r+=1)+n>e.length?Xd:(e=e.slice(r,r+n),t.C=r+n,e))}function Gu(t){t.Y=Date.now()+t.P,YM(t,t.P)}function YM(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Hu(At(t.lb,t),e)}function Jd(t){t.B&&($.clearTimeout(t.B),t.B=null)}function Wu(t){0==t.l.H||t.J||EN(t.l,t)}function ls(t){Jd(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,J_(t.V),VM(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function aw(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||uw(n.i,t)))if(!t.K&&uw(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Hu(At(n.ib,n),6e3));else{if(n.g){if(!(n.g.G+3e3<t.G))break e;uh(n),oh(n)}fw(n),Ht(18)}if(1>=oN(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else hs(n,11)}else if((t.K||n.g==t)&&uh(n),!Pu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(cw(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Ee(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=TN(r,r.J?r.pa:null,r.Y),o.K){aN(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(Jd(a),Gu(a)),r.g=o}else DN(r);0<n.j.length&&ah(n)}else"stop"!=c[0]&&"close"!=c[0]||hs(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?hs(n,7):hw(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}$u()}catch(c){}}function ZM(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ud(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function xW(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Ud(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function SW(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Ud(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(x=zu.prototype).setTimeout=function(t){this.P=t},x.nb=function(t){t=t.target;const e=this.M;e&&3==cr(t)?e.l():this.Pa(t)},x.Pa=function(t){try{if(t==this.g)e:{const l=cr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||P_||this.g&&(this.h.h||this.g.ja()||gN(this.g)))){this.J||4!=l||7==e||$u(),Jd(this);var n=this.g.da();this.ca=n;t:if(KM(this)){var r=gN(this.g);t="";var i=r.length,s=4==cr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ls(this),Wu(this);var o="";break t}this.h.i=new $.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function bW(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pu(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ht(12),ls(this),Wu(this);break e}Fo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aw(this,n)}this.S?(QM(this,l,o),P_&&this.i&&3==l&&(LM(this.U,this.V,"tick",this.mb),this.V.start())):(Fo(this.j,this.m,o,null),aw(this,o)),4==l&&ls(this),this.i&&!this.J&&(4==l?EN(this.l,this):(this.i=!1,Gu(this)))}else(function GW(t){const e={};t=(t.g&&2<=cr(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Pu(t[r]))continue;var n=yW(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function lW(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ht(12)):(this.o=0,Ht(13)),ls(this),Wu(this)}}}catch(l){}},x.mb=function(){if(this.g){var t=cr(this.g),e=this.g.ja();this.C<e.length&&(Jd(this),QM(this,t,e),this.i&&4!=t&&Gu(this))}},x.cancel=function(){this.J=!0,ls(this)},x.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function EW(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&($u(),Ht(17)),ls(this),this.o=2,Wu(this)):YM(this,this.Y-t)};var XM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ds(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ds){this.h=t.h,eh(this,t.j),this.s=t.s,this.g=t.g,th(this,t.m),this.l=t.l;var e=t.i,n=new Yu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),JM(this,n),this.o=t.o}else t&&(e=String(t).match(XM))?(this.h=!1,eh(this,e[1]||"",!0),this.s=Ku(e[2]||""),this.g=Ku(e[3]||"",!0),th(this,e[4]),this.l=Ku(e[5]||"",!0),JM(this,e[6]||"",!0),this.o=Ku(e[7]||"")):(this.h=!1,this.i=new Yu(null,this.h))}function Pr(t){return new ds(t)}function eh(t,e,n){t.j=n?Ku(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function th(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function JM(t,e,n){e instanceof Yu?(t.i=e,function FW(t,e){e&&!t.j&&(di(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(tN(this,r),rN(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Qu(e,OW)),t.i=new Yu(e,t.h))}function Ee(t,e,n){t.i.set(e,n)}function nh(t){return Ee(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ku(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,MW),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function MW(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ds.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qu(e,eN,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Qu(e,eN,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Qu(n,"/"==n.charAt(0)?RW:NW,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Qu(n,kW)),t.join("")};var eN=/[#\/\?@]/g,NW=/[#\?:]/g,RW=/[#\?]/g,OW=/[#\?@]/g,kW=/#/g;function Yu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function di(t){t.g||(t.g=new Map,t.h=0,t.i&&function AW(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function tN(t,e){di(t),e=Po(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function nN(t,e){return di(t),e=Po(t,e),t.g.has(e)}function rN(t,e,n){tN(t,e),0<n.length&&(t.i=null,t.g.set(Po(t,e),k_(n)),t.h+=n.length)}function Po(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function iN(t){this.l=t||LW,t=$.PerformanceNavigationTiming?0<(t=$.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!($.g&&$.g.Ka&&$.g.Ka()&&$.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(x=Yu.prototype).add=function(t,e){di(this),this.i=null,t=Po(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},x.forEach=function(t,e){di(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},x.ta=function(){di(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},x.Z=function(t){di(this);let e=[];if("string"==typeof t)nN(this,t)&&(e=e.concat(this.g.get(Po(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},x.set=function(t,e){return di(this),this.i=null,nN(this,t=Po(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},x.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},x.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var t,LW=10;function sN(t){return!!t.h||!!t.g&&t.g.size>=t.j}function oN(t){return t.h?1:t.g?t.g.size:0}function uw(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function cw(t,e){t.g?t.g.add(e):t.h=e}function aN(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function uN(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return k_(t.i)}function BW(){this.g=new class{stringify(t){return $.JSON.stringify(t,void 0)}parse(t){return $.JSON.parse(t,void 0)}}}function jW(t,e,n){const r=n||"";try{ZM(t,function(i,s){let o=i;Fu(i)&&(o=Z_(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function rh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Zu(t){this.l=t.fc||null,this.j=t.ob||!1}function ih(t,e){at.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=lw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}iN.prototype.cancel=function(){if(this.i=uN(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Zu.prototype.g=function(){return new ih(this.l,this.j)},Zu.prototype.i=(t={},function(){return t});var lw=0;function cN(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Xu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ju(t)}function Ju(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(x=ih.prototype).open=function(t,e){if(this.readyState!=lw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ju(this)},x.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||$).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},x.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xu(this)),this.readyState=lw},x.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ju(this)),this.g&&(this.readyState=3,Ju(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==$.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cN(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},x.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Xu(this):Ju(this),3==this.readyState&&cN(this)}},x.Za=function(t){this.g&&(this.response=this.responseText=t,Xu(this))},x.Ya=function(t){this.g&&(this.response=t,Xu(this))},x.ka=function(){this.g&&Xu(this)},x.setRequestHeader=function(t,e){this.v.append(t,e)},x.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},x.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")};var $W=$.JSON.parse;function Pe(t){at.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=lN,this.L=this.M=!1}var lN="",HW=/^https?$/i,qW=["POST","PUT"];function dN(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,hN(t),sh(t)}function hN(t){t.F||(t.F=!0,vt(t,"complete"),vt(t,"error"))}function fN(t){if(t.h&&void 0!==R_&&(!t.C[1]||4!=cr(t)||2!=t.da()))if(t.v&&4==cr(t))ew(t.La,0,t);else if(vt(t,"readystatechange"),4==cr(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(XM)[1]||null;!i&&$.self&&$.self.location&&(i=$.self.location.protocol.slice(0,-1)),r=!HW.test(i?i.toLowerCase():"")}n=r}if(n)vt(t,"complete"),vt(t,"success");else{t.m=6;try{var s=2<cr(t)?t.g.statusText:""}catch(a){s=""}t.j=s+" ["+t.da()+"]",hN(t)}}finally{sh(t)}}}function sh(t,e){if(t.g){pN(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||vt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function pN(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&($.clearTimeout(t.A),t.A=null)}function cr(t){return t.g?t.g.readyState:0}function gN(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case lN:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function mN(t){let e="";return $_(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function dw(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=mN(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ee(t,e,n))}function ec(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function yN(t){this.Ga=0,this.j=[],this.l=new Kd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ec("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ec("baseRetryDelayMs",5e3,t),this.hb=ec("retryDelaySeedMs",1e4,t),this.eb=ec("forwardChannelMaxRetries",2,t),this.xa=ec("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new iN(t&&t.concurrentRequestLimit),this.Ja=new BW,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function hw(t){if(vN(t),3==t.H){var e=t.W++,n=Pr(t.I);if(Ee(n,"SID",t.K),Ee(n,"RID",e),Ee(n,"TYPE","terminate"),tc(t,n),(e=new zu(t,t.l,e)).L=2,e.v=nh(Pr(n)),n=!1,$.navigator&&$.navigator.sendBeacon)try{n=$.navigator.sendBeacon(e.v.toString(),"")}catch(r){}!n&&$.Image&&((new Image).src=e.v,n=!0),n||(e.g=SN(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Gu(e)}IN(t)}function oh(t){t.g&&(pw(t),t.g.cancel(),t.g=null)}function vN(t){oh(t),t.u&&($.clearTimeout(t.u),t.u=null),uh(t),t.i.cancel(),t.m&&("number"==typeof t.m&&$.clearTimeout(t.m),t.m=null)}function ah(t){if(!sN(t.i)&&!t.m){t.m=!0;var e=t.Na;Bu||kM(),ju||(Bu(),ju=!0),X_.add(e,t),t.C=0}}function _N(t,e){var n;n=e?e.m:t.W++;const r=Pr(t.I);Ee(r,"SID",t.K),Ee(r,"RID",n),Ee(r,"AID",t.V),tc(t,r),t.o&&t.s&&dw(r,t.o,t.s),n=new zu(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=wN(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),cw(t.i,n),ow(n,r,e)}function tc(t,e){t.na&&$_(t.na,function(n,r){Ee(e,r,n)}),t.h&&ZM({},function(n,r){Ee(e,r,n)})}function wN(t,e,n){n=Math.min(t.j.length,n);var r=t.h?At(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{jW(l,o,"req"+c+"_")}catch(d){r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function DN(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Bu||kM(),ju||(Bu(),ju=!0),X_.add(e,t),t.A=0}}function fw(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Hu(At(t.Ma,t),CN(t,t.A)),t.A++,0))}function pw(t){null!=t.B&&($.clearTimeout(t.B),t.B=null)}function bN(t){t.g=new zu(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Pr(t.wa);Ee(e,"RID","rpc"),Ee(e,"SID",t.K),Ee(e,"AID",t.V),Ee(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ee(e,"TO",t.qa),Ee(e,"TYPE","xmlhttp"),tc(t,e),t.o&&t.s&&dw(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=nh(Pr(e)),n.s=null,n.S=!0,WM(n,t)}function uh(t){null!=t.v&&($.clearTimeout(t.v),t.v=null)}function EN(t,e){var n=null;if(t.g==e){uh(t),pw(t),t.g=null;var r=2}else{if(!uw(t.i,e))return;n=e.F,aN(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;vt(r=Qd(),new $M(r,n)),ah(t)}else DN(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function WW(t,e){return!(oN(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Hu(At(t.Na,t,e),CN(t,t.C)),t.C++,0)))}(t,e)||2==r&&fw(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:hs(t,5);break;case 4:hs(t,10);break;case 3:hs(t,6);break;default:hs(t,2)}}function CN(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function hs(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=At(t.pb,t);n||(n=new ds("//www.google.com/images/cleardot.gif"),$.location&&"http"==$.location.protocol||eh(n,"https"),nh(n)),function UW(t,e){const n=new Kd;if($.Image){const r=new Image;r.onload=$d(rh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=$d(rh,n,r,"TestLoadImage: error",!1,e),r.onabort=$d(rh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=$d(rh,n,r,"TestLoadImage: timeout",!1,e),$.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ht(2);t.H=0,t.h&&t.h.za(e),IN(t),vN(t)}function IN(t){if(t.H=0,t.ma=[],t.h){const e=uN(t.i);(0!=e.length||0!=t.j.length)&&(wM(t.ma,e),wM(t.ma,t.j),t.i.i.length=0,k_(t.j),t.j.length=0),t.h.ya()}}function TN(t,e,n){var r=n instanceof ds?Pr(n):new ds(n);if(""!=r.g)e&&(r.g=e+"."+r.g),th(r,r.m);else{var i=$.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ds(null);r&&eh(s,r),e&&(s.g=e),i&&th(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Ee(r,n,e),Ee(r,"VER",t.ra),tc(t,r),r}function SN(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pe(n&&t.Ha&&!t.va?new Zu({ob:!0}):t.va)).Oa(t.J),e}function ch(){if(ko&&!(10<=Number(oW)))throw Error("Environmental error: no available transport.")}function un(t,e){at.call(this),this.g=new yN(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Pu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pu(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Lo(this)}function AN(t){nw.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function MN(){rw.call(this),this.status=1}function Lo(t){this.g=t}function Bn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function gw(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function pe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(x=Pe.prototype).Oa=function(t){this.M=t},x.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():iw.g(),this.C=function qM(t){return t.h||(t.h=t.i())}(this.u?this.u:iw),this.g.onreadystatechange=At(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void dN(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=$.FormData&&t instanceof $.FormData,!(0<=_M(qW,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{pN(this),0<this.B&&((this.L=function zW(t){return ko&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=At(this.ua,this)):this.A=ew(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){dN(this,s)}},x.ua=function(){void 0!==R_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vt(this,"timeout"),this.abort(8))},x.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,vt(this,"complete"),vt(this,"abort"),sh(this))},x.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sh(this,!0)),Pe.$.N.call(this)},x.La=function(){this.s||(this.G||this.v||this.l?fN(this):this.kb())},x.kb=function(){fN(this)},x.isActive=function(){return!!this.g},x.da=function(){try{return 2<cr(this)?this.g.status:-1}catch(t){return-1}},x.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},x.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),$W(e)}},x.Ia=function(){return this.m},x.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(x=yN.prototype).ra=8,x.H=1,x.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new zu(this,this.l,t);let s=this.s;if(this.U&&(s?(s=IM(s),SM(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=wN(this,i,e),Ee(n=Pr(this.I),"RID",t),Ee(n,"CVER",22),this.F&&Ee(n,"X-HTTP-Session-Id",this.F),tc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(mN(s)))+"&"+e:this.o&&dw(n,this.o,s)),cw(this.i,i),this.bb&&Ee(n,"TYPE","init"),this.P?(Ee(n,"$req",e),Ee(n,"SID","null"),i.aa=!0,ow(i,n,null)):ow(i,n,e),this.H=2}}else 3==this.H&&(t?_N(this,t):0==this.j.length||sN(this.i)||_N(this))},x.Ma=function(){if(this.u=null,bN(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Hu(At(this.jb,this),t)}},x.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ht(10),oh(this),bN(this))},x.ib=function(){null!=this.v&&(this.v=null,oh(this),fw(this),Ht(19))},x.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ht(2)):(this.l.info("Failed to ping google.com"),Ht(1))},x.isActive=function(){return!!this.h&&this.h.isActive(this)},(x=function xN(){}.prototype).Ba=function(){},x.Aa=function(){},x.za=function(){},x.ya=function(){},x.isActive=function(){return!0},x.Va=function(){},ch.prototype.g=function(t,e){return new un(t,e)},un.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ht(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=TN(t,null,t.Y),ah(t)},un.prototype.close=function(){hw(this.g)},un.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Z_(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&ah(e)},un.prototype.N=function(){this.g.h=null,delete this.j,hw(this.g),delete this.g,un.$.N.call(this)},Lo.prototype.Ba=function(){vt(this.g,"a")},Lo.prototype.Aa=function(t){vt(this.g,new AN(t))},Lo.prototype.za=function(t){vt(this.g,new MN)},Lo.prototype.ya=function(){vt(this.g,"b")},Bn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Bn.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)gw(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){gw(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){gw(this,r),i=0;break}}this.h=i,this.i+=e},Bn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var QW={};function mw(t){return-128<=t&&128>t?function rW(t,e){var n=QW;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new pe([0|e],0>e?-1:0)}):new pe([0|t],0>t?-1:0)}function lr(t){if(isNaN(t)||!isFinite(t))return Vo;if(0>t)return _t(lr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=yw;return new pe(e,0)}var yw=4294967296,Vo=mw(0),vw=mw(1),RN=mw(16777216);function Lr(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function En(t){return-1==t.h}function _t(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new pe(n,~t.h).add(vw)}function lh(t,e){return t.add(_t(e))}function dh(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function nc(t,e){this.g=t,this.h=e}function hh(t,e){if(Lr(e))throw Error("division by zero");if(Lr(t))return new nc(Vo,Vo);if(En(t))return e=hh(_t(t),e),new nc(_t(e.g),_t(e.h));if(En(e))return e=hh(t,_t(e)),new nc(_t(e.g),e.h);if(30<t.g.length){if(En(t)||En(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vw,r=e;0>=r.X(t);)n=ON(n),r=ON(r);var i=Bo(n,1),s=Bo(r,1);for(r=Bo(r,2),n=Bo(n,2);!Lr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Bo(r,1),n=Bo(n,1)}return e=lh(t,i.R(e)),new nc(i,e)}for(i=Vo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=lr(n)).R(e);En(o)||0<o.X(t);)o=(s=lr(n-=r)).R(e);Lr(s)&&(s=vw),i=i.add(s),t=lh(t,o)}return new nc(i,t)}function ON(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new pe(n,t.h)}function Bo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new pe(i,t.h)}(x=pe.prototype).ea=function(){if(En(this))return-_t(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:yw+r)*e,e*=yw}return t},x.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Lr(this))return"0";if(En(this))return"-"+_t(this).toString(t);for(var e=lr(Math.pow(t,6)),n=this,r="";;){var i=hh(n,e).g,s=((0<(n=lh(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Lr(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},x.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},x.X=function(t){return En(t=lh(this,t))?-1:Lr(t)?0:1},x.abs=function(){return En(this)?_t(this):this},x.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new pe(n,-2147483648&n[n.length-1]?-1:0)},x.R=function(t){if(Lr(this)||Lr(t))return Vo;if(En(this))return En(t)?_t(this).R(_t(t)):_t(_t(this).R(t));if(En(t))return _t(this.R(_t(t)));if(0>this.X(RN)&&0>t.X(RN))return lr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,dh(n,2*r+2*i),n[2*r+2*i+1]+=s*u,dh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,dh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,dh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new pe(n,0)},x.gb=function(t){return hh(this,t).h},x.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new pe(n,this.h&t.h)},x.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new pe(n,this.h|t.h)},x.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new pe(n,this.h^t.h)},ch.prototype.createWebChannel=ch.prototype.g,un.prototype.send=un.prototype.u,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Yd.NO_ERROR=0,Yd.TIMEOUT=8,Yd.HTTP_ERROR=6,HM.COMPLETE="complete",zM.EventType=qu,qu.OPEN="a",qu.CLOSE="b",qu.ERROR="c",qu.MESSAGE="d",at.prototype.listen=at.prototype.O,Pe.prototype.listenOnce=Pe.prototype.P,Pe.prototype.getLastError=Pe.prototype.Sa,Pe.prototype.getLastErrorCode=Pe.prototype.Ia,Pe.prototype.getStatus=Pe.prototype.da,Pe.prototype.getResponseJson=Pe.prototype.Wa,Pe.prototype.getResponseText=Pe.prototype.ja,Pe.prototype.send=Pe.prototype.ha,Pe.prototype.setWithCredentials=Pe.prototype.Oa,Bn.prototype.digest=Bn.prototype.l,Bn.prototype.reset=Bn.prototype.reset,Bn.prototype.update=Bn.prototype.j,pe.prototype.add=pe.prototype.add,pe.prototype.multiply=pe.prototype.R,pe.prototype.modulo=pe.prototype.gb,pe.prototype.compare=pe.prototype.X,pe.prototype.toNumber=pe.prototype.ea,pe.prototype.toString=pe.prototype.toString,pe.prototype.getBits=pe.prototype.D,pe.fromNumber=lr,pe.fromString=function NN(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return _t(NN(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=lr(Math.pow(e,8)),r=Vo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=lr(Math.pow(e,s)),r=r.R(s).add(lr(o))):r=(r=r.R(n)).add(lr(o))}return r};var YW=Vn.createWebChannelTransport=function(){return new ch},ZW=Vn.getStatEventTarget=function(){return Qd()},_w=Vn.ErrorCode=Yd,XW=Vn.EventType=HM,JW=Vn.Event=cs,kN=Vn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},eK=Vn.FetchXmlHttpFactory=Zu,fh=Vn.WebChannel=zM,tK=Vn.XhrIo=Pe,nK=Vn.Md5=Bn,jo=Vn.Integer=pe;class ut{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");let Uo="9.23.0";const hi=new Nu("@firebase/firestore");function ww(){return hi.logLevel}function I(t,...e){if(hi.logLevel<=le.DEBUG){const n=e.map(Dw);hi.debug(`Firestore (${Uo}): ${t}`,...n)}}function je(t,...e){if(hi.logLevel<=le.ERROR){const n=e.map(Dw);hi.error(`Firestore (${Uo}): ${t}`,...n)}}function jn(t,...e){if(hi.logLevel<=le.WARN){const n=e.map(Dw);hi.warn(`Firestore (${Uo}): ${t}`,...n)}}function Dw(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(n){return t}}function N(t="Unexpected state"){const e=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: `+t;throw je(e),new Error(e)}function O(t,e){t||N()}function S(t,e){return t}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class b extends Ln{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class et{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class rK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class oK{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class aK{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new oK(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}function cK(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class VN{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=cK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function j(t,e){return t<e?-1:t>e?1:0}function $o(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Ne{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new b(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new b(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new b(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ne(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?j(this.nanoseconds,e.nanoseconds):j(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class k{constructor(e){this.timestamp=e}static fromTimestamp(e){return new k(e)}static min(){return new k(new Ne(0,0))}static max(){return new k(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rc{constructor(e,n,r){void 0===n?n=0:n>e.length&&N(),void 0===r?r=e.length-n:r>e.length-n&&N(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===rc.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ue extends rc{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new b(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const lK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ue extends rc{construct(e,n,r){return new Ue(e,n,r)}static isValidIdentifier(e){return lK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ue.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ue(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new b(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new b(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new b(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new b(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ue(n)}static emptyPath(){return new Ue([])}}class T{constructor(e){this.path=e}static fromPath(e){return new T(ue.fromString(e))}static fromName(e){return new T(ue.fromString(e).popFirst(5))}static empty(){return new T(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ue.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new T(new ue(e.slice()))}}function UN(t){return new cn(t.readTime,t.key,-1)}class cn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cn(k.min(),T.empty(),-1)}static max(){return new cn(k.max(),T.empty(),-1)}}function Ew(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=T.comparator(t.documentKey,e.documentKey),0!==n?n:j(t.largestBatchId,e.largestBatchId))}const $N="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";function fi(t){return Cw.apply(this,arguments)}function Cw(){return Cw=D(function*(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==$N)throw t;I("LocalStore","Unexpectedly lost primary lease")}),Cw.apply(this,arguments)}class v{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&N(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new v((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof v?n:v.resolve(n)}catch(n){return v.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):v.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):v.reject(n)}static resolve(e){return new v((n,r)=>{n(e)})}static reject(e){return new v((n,r)=>{r(e)})}static waitFor(e){return new v((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=v.resolve(!1);for(const r of e)n=n.next(i=>i?v.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new v((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new v((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function pi(t){return"IndexedDbTransactionError"===t.name}let ln=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function oc(t){return null==t}function ac(t){return 0===t&&1/t==-1/0}function ZN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class be{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:wt.RED,this.left=null!=i?i:wt.EMPTY,this.right=null!=s?s:wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wt(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw N();const e=this.left.check();if(e!==this.right.check())throw N();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1,wt.EMPTY=new class{constructor(){this.size=0}get key(){throw N()}get value(){throw N()}get color(){throw N()}get left(){throw N()}get right(){throw N()}copy(t,e,n,r,i){return this}insert(t,e,n){return new wt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ce{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new JN(this.data.getIterator())}getIteratorFrom(e){return new JN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ce)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ce(this.comparator);return n.data=e,n}}class JN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Yt{constructor(e){this.fields=e,e.sort(Ue.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new Ce(Ue.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class eR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw"undefined"!=typeof DOMException&&i instanceof DOMException?new eR("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return j(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const PK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(t){if(O(!!t),"string"==typeof t){let e=0;const n=PK.exec(t);if(O(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vr(t){return"string"==typeof t?tt.fromBase64String(t):tt.fromUint8Array(t)}function _h(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wh(t){const e=t.mapValue.fields.__previous_value__;return _h(e)?wh(e):e}function uc(t){const e=mi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}class LK{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class gs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gs&&e.projectId===this.projectId&&e.database===this.database}}const yi_mapValue={fields:{__type__:{stringValue:"__max__"}}};function vi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_h(t)?4:iR(t)?9007199254740991:10:N()}function hr(t,e){if(t===e)return!0;const n=vi(t);if(n!==vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uc(t).isEqual(uc(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=mi(r.timestampValue),o=mi(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Vr(t.bytesValue).isEqual(Vr(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Le(r.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(r.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Le(r.integerValue)===Le(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Le(r.doubleValue),o=Le(i.doubleValue);return s===o?ac(s)===ac(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return $o(t.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(ZN(s)!==ZN(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!hr(s[a],o[a])))return!1;return!0}(t,e);default:return N()}var i}function cc(t,e){return void 0!==(t.values||[]).find(n=>hr(n,e))}function _i(t,e){if(t===e)return 0;const n=vi(t),r=vi(e);if(n!==r)return j(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return j(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Le(i.integerValue||i.doubleValue),a=Le(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return tR(t.timestampValue,e.timestampValue);case 4:return tR(uc(t),uc(e));case 5:return j(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Vr(i),a=Vr(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=j(o[u],a[u]);if(0!==c)return c}return j(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=j(Le(i.latitude),Le(s.latitude));return 0!==o?o:j(Le(i.longitude),Le(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=_i(o[u],a[u]);if(c)return c}return j(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===yi_mapValue&&s===yi_mapValue)return 0;if(i===yi_mapValue)return 1;if(s===yi_mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const d=j(a[l],c[l]);if(0!==d)return d;const h=_i(o[a[l]],u[c[l]]);if(0!==h)return h}return j(a.length,c.length)}(t.mapValue,e.mapValue);default:throw N()}}function tR(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return j(t,e);const n=mi(t),r=mi(e),i=j(n.seconds,r.seconds);return 0!==i?i:j(n.nanos,r.nanos)}function qo(t){return Sw(t)}function Sw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=mi(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vr(t.bytesValue).toBase64():"referenceValue"in t?T.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=Sw(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${Sw(r.fields[a])}`;return s+"}"}(t.mapValue):N();var e}function xw(t){return!!t&&"integerValue"in t}function lc(t){return!!t&&"arrayValue"in t}function nR(t){return!!t&&"nullValue"in t}function rR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eh(t){return!!t&&"mapValue"in t}function dc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iR(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(n)}setAll(e){let n=Ue.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=dc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Eh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Dt(dc(this.value))}}function aR(t){const e=[];return gi(t.fields,(n,r)=>{const i=new Ue([n]);if(Eh(r)){const s=aR(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Yt(e)}class Ie{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ie(e,0,k.min(),k.min(),k.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ie(e,1,n,k.min(),r,i,0)}static newNoDocument(e,n){return new Ie(e,2,n,k.min(),k.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Ie(e,3,n,k.min(),k.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(k.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=k.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ie&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wi{constructor(e,n){this.position=e,this.inclusive=n}}function uR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?T.comparator(T.fromName(o.referenceValue),n.key):_i(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function cR(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hr(t.position[n],e.position[n]))return!1;return!0}class zo{constructor(e,n="asc"){this.field=e,this.dir=n}}function jK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class lR{}class re extends lR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new UK(e,n,r):"array-contains"===n?new qK(e,r):"in"===n?new mR(e,r):"not-in"===n?new zK(e,r):"array-contains-any"===n?new GK(e,r):new re(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new $K(e,r):new HK(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(_i(n,this.value)):null!==n&&vi(this.value)===vi(n)&&this.matchesComparison(_i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return N()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ge extends lR{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new ge(e,n)}matches(e){return Go(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Go(t){return"and"===t.op}function Mw(t){return function dR(t){for(const e of t.filters)if(e instanceof ge)return!1;return!0}(t)&&Go(t)}function Nw(t){if(t instanceof re)return t.field.canonicalString()+t.op.toString()+qo(t.value);if(Mw(t))return t.filters.map(e=>Nw(e)).join(",");{const e=t.filters.map(n=>Nw(n)).join(",");return`${t.op}(${e})`}}function hR(t,e){return t instanceof re?(n=t,(r=e)instanceof re&&n.op===r.op&&n.field.isEqual(r.field)&&hr(n.value,r.value)):t instanceof ge?function(n,r){return r instanceof ge&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&hR(s,r.filters[o]),!0)}(t,e):void N();var n,r}function pR(t){return t instanceof re?`${(e=t).field.canonicalString()} ${e.op} ${qo(e.value)}`:t instanceof ge?function(e){return e.op.toString()+" {"+e.getFilters().map(pR).join(" ,")+"}"}(t):"Filter";var e}class UK extends re{constructor(e,n,r){super(e,n,r),this.key=T.fromName(r.referenceValue)}matches(e){const n=T.comparator(e.key,this.key);return this.matchesComparison(n)}}class $K extends re{constructor(e,n){super(e,"in",n),this.keys=gR(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HK extends re{constructor(e,n){super(e,"not-in",n),this.keys=gR(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gR(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>T.fromName(r.referenceValue))}class qK extends re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lc(n)&&cc(n.arrayValue,this.value)}}class mR extends re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&cc(this.value.arrayValue,n)}}class zK extends re{constructor(e,n){super(e,"not-in",n)}matches(e){if(cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!cc(this.value.arrayValue,n)}}class GK extends re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cc(this.value.arrayValue,r))}}class WK{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function Rw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new WK(t,e,n,r,i,s,o)}function ys(t){const e=S(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Nw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qo(r)).join(",")),e.dt=n}return e.dt}function hc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cR(t.startAt,e.startAt)&&cR(t.endAt,e.endAt)}function Ch(t){return T.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Br{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null}}function Wo(t){return new Br(t)}function wR(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function vs(t){const e=S(t);if(null===e.wt){e.wt=[];const n=function Th(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}(e),r=function Ow(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new zo(n)),e.wt.push(new zo(Ue.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new zo(Ue.keyField(),s))}}}return e.wt}function qt(t){const e=S(t);if(!e._t)if("F"===e.limitType)e._t=Rw(e.path,e.collectionGroup,vs(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of vs(e))n.push(new zo(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new wi(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new wi(e.startAt.position,e.startAt.inclusive):null;e._t=Rw(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function Sh(t,e,n){return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fc(t,e){return hc(qt(t),qt(e))&&t.limitType===e.limitType}function DR(t){return`${ys(qt(t))}|lt:${t.limitType}`}function Pw(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>pR(r)).join(", ")}]`),oc(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qo(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qo(r)).join(",")),`Target(${n})`}(qt(t))}; limitType=${t.limitType})`}function pc(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):T.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of vs(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=uR(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,vs(n),r)||n.endAt&&!function(i,s,o){const a=uR(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,vs(n),r)));var n,r}function ER(t){return(e,n)=>{let r=!1;for(const i of vs(t)){const s=KK(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function KK(t,e,n){const r=t.field.isKeyField()?T.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?_i(a,u):N()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return N()}}class jr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return XN(this.inner)}size(){return this.innerSize}}const QK=new be(T.comparator);function Zt(){return QK}const CR=new be(T.comparator);function gc(...t){let e=CR;for(const n of t)e=e.insert(n.key,n);return e}function IR(t){let e=CR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fr(){return mc()}function TR(){return mc()}function mc(){return new jr(t=>t.toString(),(t,e)=>t.isEqual(e))}const YK=new be(T.comparator),ZK=new Ce(T.comparator);function W(...t){let e=ZK;for(const n of t)e=e.add(n);return e}const XK=new Ce(j);function SR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function xR(t){return{integerValue:""+t}}function AR(t,e){return function qN(t){return"number"==typeof t&&Number.isInteger(t)&&!ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?xR(e):SR(t,e)}class xh{constructor(){this._=void 0}}function JK(t,e,n){return t instanceof Ko?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&_h(i)&&(i=wh(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof _s?NR(t,e):t instanceof ws?RR(t,e):function(r,i){const s=MR(r,i),o=OR(s)+OR(r.gt);return xw(s)&&xw(r.gt)?xR(o):SR(r.serializer,o)}(t,e)}function eQ(t,e,n){return t instanceof _s?NR(t,e):t instanceof ws?RR(t,e):n}function MR(t,e){return t instanceof Qo?xw(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class Ko extends xh{}class _s extends xh{constructor(e){super(),this.elements=e}}function NR(t,e){const n=kR(e);for(const r of t.elements)n.some(i=>hr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ws extends xh{constructor(e){super(),this.elements=e}}function RR(t,e){let n=kR(e);for(const r of t.elements)n=n.filter(i=>!hr(i,r));return{arrayValue:{values:n}}}class Qo extends xh{constructor(e,n){super(),this.serializer=e,this.gt=n}}function OR(t){return Le(t.integerValue||t.doubleValue)}function kR(t){return lc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class nQ{constructor(e,n){this.version=e,this.transformResults=n}}class xe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xe}static exists(e){return new xe(void 0,e)}static updateTime(e){return new xe(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Mh{}function FR(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Zo(t.key,xe.none()):new Yo(t.key,t.data,xe.none());{const n=t.data,r=Dt.empty();let i=new Ce(Ue.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ur(t.key,r,new Yt(i.toArray()),xe.none())}}function rQ(t,e,n){t instanceof Yo?function(r,i,s){const o=r.value.clone(),a=VR(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ur?function(r,i,s){if(!Ah(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=VR(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(LR(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function vc(t,e,n,r){return t instanceof Yo?function(i,s,o,a){if(!Ah(i.precondition,s))return o;const u=i.value.clone(),c=BR(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ur?function(i,s,o,a){if(!Ah(i.precondition,s))return o;const u=BR(i.fieldTransforms,a,s),c=s.data;return c.setAll(LR(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,Ah(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function iQ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=MR(r.transform,i||null);null!=s&&(null===n&&(n=Dt.empty()),n.set(r.field,s))}return n||null}function PR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&$o(n,r,(i,s)=>function tQ(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof _s&&r instanceof _s||n instanceof ws&&r instanceof ws?$o(n.elements,r.elements,hr):n instanceof Qo&&r instanceof Qo?hr(n.gt,r.gt):n instanceof Ko&&r instanceof Ko);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class Yo extends Mh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ur extends Mh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function VR(t,e,n){const r=new Map;O(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,eQ(o,a,n[i]))}return r}function BR(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,JK(s,o,e))}return r}class Zo extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vw extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&rQ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=TR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=FR(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(k.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),W())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(n,r)=>PR(n,r))&&$o(this.baseMutations,e.baseMutations,(n,r)=>PR(n,r))}}class jw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){O(e.mutations.length===r.length);let i=YK;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new jw(e,n,r,i)}}class Uw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oQ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ke,ce;function jR(t){switch(t){default:return N();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function UR(t){if(void 0===t)return je("GRPC error has no .code"),w.UNKNOWN;switch(t){case Ke.OK:return w.OK;case Ke.CANCELLED:return w.CANCELLED;case Ke.UNKNOWN:return w.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return w.INTERNAL;case Ke.UNAVAILABLE:return w.UNAVAILABLE;case Ke.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Ke.NOT_FOUND:return w.NOT_FOUND;case Ke.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Ke.ABORTED:return w.ABORTED;case Ke.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Ke.DATA_LOSS:return w.DATA_LOSS;default:return N()}}(ce=Ke||(Ke={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";class $w{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Nh}static getOrCreateInstance(){return null===Nh&&(Nh=new $w),Nh}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Nh=null;const aQ=new jo([4294967295,4294967295],0);function HR(t){const e=function $R(){return new TextEncoder}().encode(t),n=new nK;return n.update(e),new Uint8Array(n.digest())}function qR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jo([n,r],0),new jo([i,s],0)]}class Hw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _c(`Invalid padding: ${n}`);if(r<0)throw new _c(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new _c(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new _c(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=jo.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(jo.fromNumber(r)));return 1===i.compare(aQ)&&(i=new jo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=HR(e),[r,i]=qR(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Hw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const n=HR(e),[r,i]=qR(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wc(k.min(),i,new be(j),Zt(),W())}}class Dc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dc(r,n,W(),W(),W())}}class Rh{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class zR{constructor(e,n){this.targetId=e,this.Vt=n}}class GR{constructor(e,n,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class WR{constructor(){this.St=0,this.Dt=QR(),this.Ct=tt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=W(),n=W(),r=W();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:N()}}),new Dc(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=QR()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class uQ{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Zt(),this.zt=KR(),this.Wt=new be(j)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:N()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(Ch(o))if(0===i){const a=new T(o.path);this.Yt(r,a,Ie.newNoDocument(a,k.min()))}else O(1===i);else{const a=this.ie(r);if(a!==i){const u=this.re(e,a);0!==u&&(this.ee(r),this.Wt=this.Wt.insert(r,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=$w.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(c,l,d){var h,f,p,g,m,_;const y={localCacheCount:l,existenceFilterCount:d.count},C=d.unchangedNames;return C&&(y.bloomFilter={applied:0===c,hashCount:null!==(h=null==C?void 0:C.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(g=null===(p=null===(f=null==C?void 0:C.bits)||void 0===f?void 0:f.bitmap)||void 0===p?void 0:p.length)&&void 0!==g?g:0,padding:null!==(_=null===(m=null==C?void 0:C.bits)||void 0===m?void 0:m.padding)&&void 0!==_?_:0}),y}(u,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let u,c;try{u=Vr(s).toUint8Array()}catch(l){if(l instanceof eR)return jn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw l}try{c=new Hw(u,o,a)}catch(l){return jn(l instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",l),1}return 0===c.It?1:i!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Ch(a.target)){const u=new T(a.target.path);null!==this.jt.get(u)||this.ae(o,u)||this.Yt(o,u,Ie.newNoDocument(u,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=W();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.se(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new wc(e,n,this.Wt,this.jt,r);return this.jt=Zt(),this.zt=KR(),this.Wt=new be(j),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new WR,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Ce(j),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||I("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new WR),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function KR(){return new be(T.comparator)}function QR(){return new be(T.comparator)}const cQ=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),lQ=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),dQ=(()=>({and:"AND",or:"OR"}))();class hQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qw(t,e){return t.useProto3Json||oc(e)?e:{value:e}}function Xo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fQ(t,e){return Xo(t,e.toTimestamp())}function $e(t){return O(!!t),k.fromTimestamp(function(e){const n=mi(e);return new Ne(n.seconds,n.nanos)}(t))}function zw(t,e){return(n=t,new ue(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function ZR(t){const e=ue.fromString(t);return O(oO(e)),e}function bc(t,e){return zw(t.databaseId,e.path)}function pr(t,e){const n=ZR(e);if(n.get(1)!==t.databaseId.projectId)throw new b(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new b(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new T(JR(n))}function Gw(t,e){return zw(t.databaseId,e)}function Ec(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JR(t){return O(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function eO(t,e,n){return{name:bc(t,e),fields:n.value.mapValue.fields}}function nO(t,e){return{documents:[Gw(t,e.path)]}}function Kw(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Gw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Gw(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return sO(ge.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:Di((l=c).field),direction:vQ(l.dir)};var l})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=qw(t,e.limit);var a,u;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),n}function rO(t){let e=function XR(t){const e=ZR(t);return 4===e.length?ue.emptyPath():JR(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){O(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=iO(l);return d instanceof ge&&Mw(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new zo(Jo((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,oc(d)?null:d}(n.limit));let u=null;var l;n.startAt&&(u=new wi((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(l){return new wi(l.values||[],!l.before)}(n.endAt)),function _R(t,e,n,r,i,s,o,a){return new Br(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function iO(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Jo(e.unaryFilter.field);return re.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Jo(e.unaryFilter.field);return re.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jo(e.unaryFilter.field);return re.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Jo(e.unaryFilter.field);return re.create(s,"!=",{nullValue:"NULL_VALUE"});default:return N()}}(t):void 0!==t.fieldFilter?re.create(Jo((e=t).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return N()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(e){return ge.create(e.compositeFilter.filters.map(n=>iO(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return N()}}(e.compositeFilter.op))}(t):N();var e}function vQ(t){return cQ[t]}function _Q(t){return lQ[t]}function wQ(t){return dQ[t]}function Di(t){return{fieldPath:t.canonicalString()}}function Jo(t){return Ue.fromServerFormat(t.fieldPath)}function sO(t){return t instanceof re?function(e){if("=="===e.op){if(rR(e.value))return{unaryFilter:{field:Di(e.field),op:"IS_NAN"}};if(nR(e.value))return{unaryFilter:{field:Di(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rR(e.value))return{unaryFilter:{field:Di(e.field),op:"IS_NOT_NAN"}};if(nR(e.value))return{unaryFilter:{field:Di(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Di(e.field),op:_Q(e.op),value:e.value}}}(t):t instanceof ge?function(e){const n=e.getFilters().map(r=>sO(r));return 1===n.length?n[0]:{compositeFilter:{op:wQ(e.op),filters:n}}}(t):N()}function DQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oO(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class $r{constructor(e,n,r,i,s=k.min(),o=k.min(),a=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class aO{constructor(e){this.fe=e}}function Qw(t){const e=rO({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Sh(e,e.limit,"L"):e}class Cs{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Le(e.integerValue));else if("doubleValue"in e){const r=Le(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),ac(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Vr(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?iR(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):N()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),T.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}Cs.Ve=new Cs;class MQ{constructor(){this.rn=new tD}addToCollectionParentIndex(e,n){return this.rn.add(n),v.resolve()}getCollectionParents(e,n){return v.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return v.resolve()}deleteFieldIndex(e,n){return v.resolve()}getDocumentsMatchingTarget(e,n){return v.resolve(null)}getIndexType(e,n){return v.resolve(0)}getFieldIndexes(e,n){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,n){return v.resolve(cn.min())}getMinOffsetFromCollectionGroup(e,n){return v.resolve(cn.min())}updateCollectionGroup(e,n,r){return v.resolve()}updateIndexEntries(e,n){return v.resolve()}}class tD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ce(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(ue.comparator)).toArray()}}class Rt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(41943040,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);class Ts{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ts(0)}static Mn(){return new Ts(-1)}}class BQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class OO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&vc(r.mutation,i,Yt.empty(),Ne.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,W()).next(()=>r))}getLocalViewOfDocuments(e,n,r=W()){const i=fr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=fr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,W()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Zt();const o=mc(),a=mc();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Ur)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),vc(l.mutation,c,l.mutation.getFieldMask(),Ne.now())):o.set(c.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new BQ(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=mc();let i=new be((o,a)=>o-a),s=W();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||Yt.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||W()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=TR();l.forEach(h=>{if(!s.has(h)){const f=FR(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return v.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return T.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function kw(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):v.resolve(fr());let a=-1,u=s;return o.next(c=>v.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?v.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,W())).next(l=>({batchId:a,changes:IR(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new T(n)).next(r=>{let i=gc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=gc();return this.indexManager.getCollectionParents(e,i).next(o=>v.forEach(o,a=>{const u=(c=n,l=a.child(i),new Br(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();null===s.get(c)&&(s=s.insert(c,Ie.newInvalidDocument(c)))});let o=gc();return s.forEach((a,u)=>{const c=i.get(a);void 0!==c&&vc(c.mutation,u,Yt.empty(),Ne.now()),pc(n,u)&&(o=o.insert(a,u))}),o})}}class jQ{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return v.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:$e(r.createTime)}),v.resolve()}getNamedQuery(e,n){return v.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:Qw(r.bundledQuery),readTime:$e(r.readTime)}),v.resolve();var r}}class UQ{constructor(){this.overlays=new be(T.comparator),this.ls=new Map}getOverlay(e,n){return v.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fr();return v.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),v.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),v.resolve()}getOverlaysForCollection(e,n,r){const i=fr(),s=n.length+1,o=new T(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return v.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=fr(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=fr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return v.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Uw(n,r));let s=this.ls.get(n);void 0===s&&(s=W(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}class nD{constructor(){this.fs=new Ce(lt.ds),this.ws=new Ce(lt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new lt(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new lt(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new T(new ue([])),r=new lt(n,e),i=new lt(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new T(new ue([])),r=new lt(n,e),i=new lt(n,e+1);let s=W();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new lt(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class lt{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return T.comparator(e.key,n.key)||j(e.As,n.As)}static _s(e,n){return j(e.As,n.As)||T.comparator(e.key,n.key)}}class $Q{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Ce(lt.ds)}checkEmpty(e){return v.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++;const o=new Bw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new lt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(e,n){return v.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.bs(n+1),s=i<0?0:i;return v.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lt(n,0),i=new lt(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),v.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(j);return n.forEach(i=>{const s=new lt(i,0),o=new lt(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),v.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;T.isDocumentKey(s)||(s=s.child(""));const o=new lt(new T(s),0);let a=new Ce(j);return this.Rs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.As)),!0)},o),v.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){O(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return v.forEach(n.mutations,i=>{const s=new lt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new lt(n,0),i=this.Rs.firstAfterOrEqual(r);return v.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return v.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class HQ{constructor(e){this.Ds=e,this.docs=new be(T.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return v.resolve(r?r.document.mutableCopy():Ie.newInvalidDocument(n))}getEntries(e,n){let r=Zt();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ie.newInvalidDocument(i))}),v.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Zt();const o=n.path,a=new T(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Ew(UN(l),r)<=0||(i.has(l.key)||pc(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return v.resolve(s)}getAllFromCollectionGroup(e,n,r,i){N()}Cs(e,n){return v.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qQ(this)}getSize(e){return v.resolve(this.size)}}class qQ extends class PQ{constructor(){this.changes=new jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ie.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?v.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),v.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class zQ{constructor(e){this.persistence=e,this.xs=new jr(n=>ys(n),hc),this.lastRemoteSnapshotVersion=k.min(),this.highestTargetId=0,this.Ns=0,this.ks=new nD,this.targetCount=0,this.Ms=Ts.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),v.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Ts(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,v.resolve()}updateTargetData(e,n){return this.Fn(n),v.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(s).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return v.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),v.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),v.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),v.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return v.resolve(r)}containsKey(e,n){return v.resolve(this.ks.containsKey(n))}}class rD{constructor(e,n){this.$s={},this.overlays={},this.Os=new ln(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new zQ(this),this.indexManager=new MQ,this.remoteDocumentCache=new HQ(r=>this.referenceDelegate.Ls(r)),this.serializer=new aO(n),this.qs=new jQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new $Q(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){I("MemoryPersistence","Starting transaction:",e);const i=new GQ(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return v.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class GQ extends class fK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class Uh{constructor(e){this.persistence=e,this.Qs=new nD,this.js=null}static zs(e){return new Uh(e)}get Ws(){if(this.js)return this.js;throw N()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),v.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),v.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Ws,r=>{const i=T.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,k.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return v.or([()=>v.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class aD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=W(),i=W();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new aD(e,n.fromCache,r,i)}}class FO{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(wR(n))return v.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Sh(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=W(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ji(n,a);return this.zi(n,c,o,u.readTime)?this.Ki(e,Sh(n,null,"F")):this.Wi(e,c,n,u)}))})))}Gi(e,n,r,i){return wR(n)||i.isEqual(k.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(ww()<=le.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pw(n)),this.Wi(e,o,n,function jN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=k.fromTimestamp(1e9===r?new Ne(n+1,0):new Ne(n,r));return new cn(i,T.empty(),e)}(i,-1)))})}ji(e,n){let r=new Ce(ER(e));return n.forEach((i,s)=>{pc(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return ww()<=le.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Pw(n)),this.Ui.getDocumentsMatchingQuery(e,n,cn.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class KQ{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new be(j),this.Yi=new jr(s=>ys(s),hc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function LO(t,e){return uD.apply(this,arguments)}function uD(){return uD=D(function*(t,e){const n=S(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=W();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),uD.apply(this,arguments)}function QQ(t,e){const n=S(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const l=u.batch,d=l.keys();let h=v.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=u.docVersions.get(f);O(null!==g),p.version.compareTo(g)<0&&(l.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=W();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function VO(t){const e=S(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function YQ(t,e){const n=S(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;null!==e.targetMismatches.get(d)?f=f.withResumeToken(tt.EMPTY_BYTE_STRING,k.min()).withLastLimboFreeSnapshotVersion(k.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),g=f,m=l,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(n.Bs.updateTargetData(s,f))});let u=Zt(),c=W();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function BO(t,e,n){let r=W(),i=W();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Zt();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(k.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{nr:o,sr:i}})}(s,o,e.documentUpdates).next(l=>{u=l.nr,c=l.sr})),!r.isEqual(k.min())){const l=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return v.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ji=i,s))}function ZQ(t,e){const n=S(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function na(t,e){const n=S(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,v.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new $r(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}function ra(t,e,n){return cD.apply(this,arguments)}function cD(){return cD=D(function*(t,e,n){const r=S(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!pi(o))throw o;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),cD.apply(this,arguments)}function qh(t,e,n){const r=S(t);let i=k.min(),s=W();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const l=S(a),d=l.Yi.get(c);return void 0!==d?v.resolve(l.Ji.get(d)):l.Bs.getTargetData(u,c)}(r,o,qt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:k.min(),n?s:W())).next(a=>(function $O(t,e,n){let r=t.Xi.get(e)||k.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}(r,function bR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,ir:s})))}class pD{constructor(){this.activeTargetIds=function Lw(){return XK}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zO{constructor(){this.Hr=new pD,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new pD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eY{Yr(e){}shutdown(){}}class GO{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Wh=null;function mD(){return null===Wh?Wh=268435456+Math.round(2147483648*Math.random()):Wh++,"0x"+Wh.toString(16)}const tY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nY{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ot="WebChannelConnection";class rY extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=mD(),a=this.To(e,n);I("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this.Eo(u,i,s),this.Ao(e,a,u,r).then(c=>(I("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw jn("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){return`${this.mo}/v1/${n}:${tY[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=mD();return new Promise((o,a)=>{const u=new tK;u.setWithCredentials(!0),u.listenOnce(XW.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _w.NO_ERROR:const l=u.getResponseJson();I(Ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case _w.TIMEOUT:I(Ot,`RPC '${e}' ${s} timed out`),a(new b(w.DEADLINE_EXCEEDED,"Request time out"));break;case _w.HTTP_ERROR:const d=u.getStatus();if(I(Ot,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=null==h?void 0:h.error;if(f&&f.status&&f.message){const p=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(m)>=0?m:w.UNKNOWN}(f.status);a(new b(p,f.message))}else a(new b(w.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new b(w.UNAVAILABLE,"Connection failed."));break;default:N()}}finally{I(Ot,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);I(Ot,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Ro(e,n,r){const i=mD(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=YW(),a=ZW(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new eK({})),this.Eo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");I(Ot,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,f=!1;const p=new nY({ro:m=>{f?I(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(I(Ot,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),I(Ot,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},oo:()=>d.close()}),g=(m,_,y)=>{m.listen(_,C=>{try{y(C)}catch(R){setTimeout(()=>{throw R},0)}})};return g(d,fh.EventType.OPEN,()=>{f||I(Ot,`RPC '${e}' stream ${i} transport opened.`)}),g(d,fh.EventType.CLOSE,()=>{f||(f=!0,I(Ot,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(d,fh.EventType.ERROR,m=>{f||(f=!0,jn(Ot,`RPC '${e}' stream ${i} transport errored:`,m),p.wo(new b(w.UNAVAILABLE,"The operation could not be completed")))}),g(d,fh.EventType.MESSAGE,m=>{var _;if(!f){const y=m.data[0];O(!!y);const C=y,R=C.error||(null===(_=C[0])||void 0===_?void 0:_.error);if(R){I(Ot,`RPC '${e}' stream ${i} received error:`,R);const P=R.status;let Z=function($n){const va=Ke[$n];if(void 0!==va)return UR(va)}(P),Ve=R.message;void 0===Z&&(Z=w.INTERNAL,Ve="Unknown error status: "+P+" with message "+R.message),f=!0,p.wo(new b(Z,Ve)),d.close()}else I(Ot,`RPC '${e}' stream ${i} received:`,y),p._o(y)}}),g(a,JW.STAT_EVENT,m=>{m.stat===kN.PROXY?I(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===kN.NOPROXY&&I(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Kh(){return"undefined"!=typeof document?document:null}function Oc(t){return new hQ(t,!0)}class yD{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class KO{constructor(e,n,r,i,s,o,a,u){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new yD(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return D(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return D(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return D(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(je(n.toString()),je("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===w.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new b(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(D(function*(){e.state=0,e.start()}))}tu(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iY extends KO{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function gQ(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:N(),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(O(void 0===c||"string"==typeof c),tt.fromBase64String(c||"")):(O(void 0===c||c instanceof Uint8Array),tt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=void 0===u.code?w.UNKNOWN:UR(u.code);return new b(c,u.message||"")}(o);n=new GR(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=pr(t,r.document.name),s=$e(r.document.updateTime),o=r.document.createTime?$e(r.document.createTime):k.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=Ie.newFoundDocument(i,s,o,a);n=new Rh(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=pr(t,r.document),s=r.readTime?$e(r.readTime):k.min(),o=Ie.newNoDocument(i,s);n=new Rh([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=pr(t,r.document);n=new Rh([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return N();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new oQ(i,s);n=new zR(r.targetId,o)}}var u;return n}(this.serializer,e),r=function(i){if(!("targetChange"in i))return k.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?k.min():s.readTime?$e(s.readTime):k.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Ec(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=Ch(a)?{documents:nO(i,a)}:{query:Kw(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=YR(i,s.resumeToken);const u=qw(i,s.expectedCount);null!==u&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(k.min())>0){o.readTime=Xo(i,s.snapshotVersion.toTimestamp());const u=qw(i,s.expectedCount);null!==u&&(o.expectedCount=u)}return o}(this.serializer,e);const r=function yQ(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return N()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Ec(this.serializer),n.removeTarget=e,this.Wo(n)}}class sY extends KO{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(O(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function mQ(t,e){return t&&t.length>0?(O(void 0!==e),t.map(n=>function(r,i){let s=$e(r.updateTime?r.updateTime:i);return s.isEqual(k.min())&&(s=$e(i)),new nQ(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=$e(e.commitTime);return this.listener.cu(r,n)}return O(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ec(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Cc(t,e){let n;if(e instanceof Yo)n={update:eO(t,e.key,e.value)};else if(e instanceof Zo)n={delete:bc(t,e.key)};else if(e instanceof Ur)n={update:eO(t,e.key,e.data),updateMask:DQ(e.fieldMask)};else{if(!(e instanceof Vw))return N();n={verify:bc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Ko)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof _s)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ws)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Qo)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw N()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:fQ(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:N()),n;var i}(this.serializer,r))};this.Wo(n)}}class oY extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new b(w.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new b(w.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new b(w.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class uY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(je(n),this.mu=!1):I("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class cY{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(D(function*(){var u;Ii(o)&&(I("RemoteStore","Restarting streams for network reachability change."),yield(u=D(function*(c){const l=S(c);l.vu.add(4),yield ia(l),l.bu.set("Unknown"),l.vu.delete(4),yield kc(l)}),function(c){return u.apply(this,arguments)})(o))}))}),this.bu=new uY(r,i)}}function kc(t){return _D.apply(this,arguments)}function _D(){return _D=D(function*(t){if(Ii(t))for(const e of t.Ru)yield e(!0)}),_D.apply(this,arguments)}function ia(t){return wD.apply(this,arguments)}function wD(){return wD=D(function*(t){for(const e of t.Ru)yield e(!1)}),wD.apply(this,arguments)}function Qh(t,e){const n=S(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),ED(n)?bD(n):oa(n).Ko()&&DD(n,e))}function Fc(t,e){const n=S(t),r=oa(n);n.Au.delete(e),r.Ko()&&QO(n,e),0===n.Au.size&&(r.Ko()?r.jo():Ii(n)&&n.bu.set("Unknown"))}function DD(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(k.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oa(t).su(e)}function QO(t,e){t.Vu.qt(e),oa(t).iu(e)}function bD(t){t.Vu=new uQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.bu.gu()}function ED(t){return Ii(t)&&!oa(t).Uo()&&t.Au.size>0}function Ii(t){return 0===S(t).vu.size}function YO(t){t.Vu=void 0}function lY(t){return CD.apply(this,arguments)}function CD(){return CD=D(function*(t){t.Au.forEach((e,n)=>{DD(t,e)})}),CD.apply(this,arguments)}function dY(t,e){return ID.apply(this,arguments)}function ID(){return ID=D(function*(t,e){YO(t),ED(t)?(t.bu.Iu(e),bD(t)):t.bu.set("Unknown")}),ID.apply(this,arguments)}function hY(t,e,n){return TD.apply(this,arguments)}function TD(){return TD=D(function*(t,e,n){if(t.bu.set("Online"),e instanceof GR&&2===e.state&&e.cause)try{yield(r=D(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yh(t,r)}else if(e instanceof Rh?t.Vu.Ht(e):e instanceof zR?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(k.min()))try{const r=yield VO(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.Au.get(u);c&&i.Au.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,u)=>{const c=i.Au.get(a);if(!c)return;i.Au.set(a,c.withResumeToken(tt.EMPTY_BYTE_STRING,c.snapshotVersion)),QO(i,a);const l=new $r(c.target,a,u,c.sequenceNumber);DD(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield Yh(t,r)}var r}),TD.apply(this,arguments)}function Yh(t,e,n){return SD.apply(this,arguments)}function SD(){return SD=D(function*(t,e,n){if(!pi(e))throw e;t.vu.add(1),yield ia(t),t.bu.set("Offline"),n||(n=()=>VO(t.localStore)),t.asyncQueue.enqueueRetryable(D(function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield kc(t)}))}),SD.apply(this,arguments)}function ZO(t,e){return e().catch(n=>Yh(t,n,e))}function sa(t){return xD.apply(this,arguments)}function xD(){return xD=D(function*(t){const e=S(t),n=Ti(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;fY(e);)try{const i=yield ZQ(e.localStore,r);if(null===i){0===e.Eu.length&&n.jo();break}r=i.batchId,pY(e,i)}catch(i){yield Yh(e,i)}XO(e)&&JO(e)}),xD.apply(this,arguments)}function fY(t){return Ii(t)&&t.Eu.length<10}function pY(t,e){t.Eu.push(e);const n=Ti(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function XO(t){return Ii(t)&&!Ti(t).Uo()&&t.Eu.length>0}function JO(t){Ti(t).start()}function gY(t){return AD.apply(this,arguments)}function AD(){return AD=D(function*(t){Ti(t).hu()}),AD.apply(this,arguments)}function mY(t){return MD.apply(this,arguments)}function MD(){return MD=D(function*(t){const e=Ti(t);for(const n of t.Eu)e.uu(n.mutations)}),MD.apply(this,arguments)}function yY(t,e,n){return ND.apply(this,arguments)}function ND(){return ND=D(function*(t,e,n){const r=t.Eu.shift(),i=jw.from(r,e,n);yield ZO(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield sa(t)}),ND.apply(this,arguments)}function vY(t,e){return RD.apply(this,arguments)}function RD(){return RD=D(function*(t,e){var n;e&&Ti(t).ou&&(yield(n=D(function*(r,i){if(jR(s=i.code)&&s!==w.ABORTED){const o=r.Eu.shift();Ti(r).Qo(),yield ZO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield sa(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),XO(t)&&JO(t)}),RD.apply(this,arguments)}function ek(t,e){return OD.apply(this,arguments)}function OD(){return OD=D(function*(t,e){const n=S(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");const r=Ii(n);n.vu.add(3),yield ia(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield kc(n)}),OD.apply(this,arguments)}function FD(){return FD=D(function*(t,e){const n=S(t);e?(n.vu.delete(2),yield kc(n)):e||(n.vu.add(2),yield ia(n),n.bu.set("Unknown"))}),FD.apply(this,arguments)}function oa(t){return t.Su||(t.Su=function(e,n,r){const i=S(e);return i.fu(),new iY(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:lY.bind(null,t),ao:dY.bind(null,t),nu:hY.bind(null,t)}),t.Ru.push(function(){var e=D(function*(n){n?(t.Su.Qo(),ED(t)?bD(t):t.bu.set("Unknown")):(yield t.Su.stop(),YO(t))});return function(n){return e.apply(this,arguments)}}())),t.Su}function Ti(t){return t.Du||(t.Du=function(e,n,r){const i=S(e);return i.fu(),new sY(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:gY.bind(null,t),ao:vY.bind(null,t),au:mY.bind(null,t),cu:yY.bind(null,t)}),t.Ru.push(function(){var e=D(function*(n){n?(t.Du.Qo(),yield sa(t)):(yield t.Du.stop(),t.Eu.length>0&&(I("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Du}class PD{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new PD(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new b(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aa(t,e){if(je("AsyncQueue",`${e}: ${t}`),pi(t))return new b(w.UNAVAILABLE,`${e}: ${t}`);throw t}class ua{constructor(e){this.comparator=e?(n,r)=>e(n,r)||T.comparator(n.key,r.key):(n,r)=>T.comparator(n.key,r.key),this.keyedMap=gc(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new ua(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class tk{constructor(){this.Cu=new be(T.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(n):1===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):N():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class ca{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ca(e,n,ua.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class _Y{constructor(){this.Nu=void 0,this.listeners=[]}}class wY{constructor(){this.queries=new jr(e=>DR(e),fc),this.onlineState="Unknown",this.ku=new Set}}function VD(){return VD=D(function*(t,e){const n=S(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new _Y),i)try{s.Nu=yield n.onListen(r)}catch(o){const a=aa(o,`Initialization of query '${Pw(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&UD(n)}),VD.apply(this,arguments)}function jD(){return jD=D(function*(t,e){const n=S(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),jD.apply(this,arguments)}function DY(t,e){const n=S(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&UD(n)}function bY(t,e,n){const r=S(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function UD(t){t.ku.forEach(e=>{e.next()})}class $D{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class ik{constructor(e){this.key=e}}class sk{constructor(e){this.key=e}}class ok{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=W(),this.mutatedKeys=W(),this.tc=ER(e),this.ec=new ua(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new tk,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=pc(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.rc(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.tc(f,u)>0||c&&this.tc(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,l)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return N()}};return f(d)-f(h)}(c.type,l.type)||this.tc(c.doc,l.doc)),this.oc(r);const o=n?this.uc():[],a=0===this.Zu.size&&this.current?1:0,u=a!==this.Xu;return this.Xu=a,0!==s.length||u?{snapshot:new ca(this.query,e.ec,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new tk,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=W(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new sk(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new ik(r))}),n}hc(e){this.Yu=e.ir,this.Zu=W();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return ca.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class IY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TY{constructor(e){this.key=e,this.fc=!1}}class SY{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new jr(a=>DR(a),fc),this._c=new Map,this.mc=new Set,this.gc=new be(T.comparator),this.yc=new Map,this.Ic=new nD,this.Tc={},this.Ec=new Map,this.Ac=Ts.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function xY(t,e){return HD.apply(this,arguments)}function HD(){return HD=D(function*(t,e){const n=f0(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield na(n.localStore,qt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield qD(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&Qh(n.remoteStore,o)}return i}),HD.apply(this,arguments)}function qD(t,e,n,r,i){return zD.apply(this,arguments)}function zD(){return zD=D(function*(t,e,n,r,i){t.Rc=(d,h,f)=>{return(p=D(function*(g,m,_,y){let C=m.view.sc(_);C.zi&&(C=yield qh(g.localStore,m.query,!1).then(({documents:Z})=>m.view.sc(Z,C)));const R=y&&y.targetChanges.get(m.targetId),P=m.view.applyChanges(C,g.isPrimaryClient,R);return t0(g,m.targetId,P.cc),P.snapshot}),function(g,m,_,y){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield qh(t.localStore,e,!0),o=new ok(e,s.ir),a=o.sc(s.documents),u=Dc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);t0(t,n,c.cc);const l=new IY(e,n,o);return t.wc.set(e,l),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}),zD.apply(this,arguments)}function AY(t,e){return GD.apply(this,arguments)}function GD(){return GD=D(function*(t,e){const n=S(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!fc(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ra(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Fc(n.remoteStore,r.targetId),la(n,r.targetId)}).catch(fi))):(la(n,r.targetId),yield ra(n.localStore,r.targetId,!0))}),GD.apply(this,arguments)}function WD(){return WD=D(function*(t,e,n){const r=p0(t);try{const i=yield function(s,o){const a=S(s),u=Ne.now(),c=o.reduce((h,f)=>h.add(f.key),W());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Zt(),p=W();return a.Zi.getEntries(h,c).next(g=>{f=g,f.forEach((m,_)=>{_.isValidDocument()||(p=p.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{l=g;const m=[];for(const _ of o){const y=iQ(_,l.get(_.key).overlayedDocument);null!=y&&m.push(new Ur(_.key,y,aR(y.value.mapValue),xe.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,m,o)}).next(g=>{d=g;const m=g.applyToLocalDocumentSet(l,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,m)})}).then(()=>({batchId:d.batchId,changes:IR(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.Tc[s.currentUser.toKey()];u||(u=new be(j)),u=u.insert(o,a),s.Tc[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Hr(r,i.changes),yield sa(r.remoteStore)}catch(i){const s=aa(i,"Failed to persist write");n.reject(s)}}),WD.apply(this,arguments)}function ak(t,e){return KD.apply(this,arguments)}function KD(){return KD=D(function*(t,e){const n=S(t);try{const r=yield YQ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(O(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?O(o.fc):i.removedDocuments.size>0&&(O(o.fc),o.fc=!1))}),yield Hr(n,r,e)}catch(r){yield fi(r)}}),KD.apply(this,arguments)}function uk(t,e,n){const r=S(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=S(s);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const d of l.listeners)d.Mu(o)&&(u=!0)}),u&&UD(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function NY(t,e,n){return QD.apply(this,arguments)}function QD(){return QD=D(function*(t,e,n){const r=S(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new be(T.comparator);o=o.insert(s,Ie.newNoDocument(s,k.min()));const a=W().add(s),u=new wc(k.min(),new Map,new be(j),o,a);yield ak(r,u),r.gc=r.gc.remove(s),r.yc.delete(e),n0(r)}else yield ra(r.localStore,e,!1).then(()=>la(r,e,n)).catch(fi)}),QD.apply(this,arguments)}function RY(t,e){return YD.apply(this,arguments)}function YD(){return YD=D(function*(t,e){const n=S(t),r=e.batch.batchId;try{const i=yield QQ(n.localStore,e);e0(n,r,null),JD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Hr(n,i)}catch(i){yield fi(i)}}),YD.apply(this,arguments)}function OY(t,e,n){return ZD.apply(this,arguments)}function ZD(){return ZD=D(function*(t,e,n){const r=S(t);try{const i=yield function(s,o){const a=S(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(l=>(O(null!==l),c=l.keys(),a.mutationQueue.removeMutationBatch(u,l))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);e0(r,e,n),JD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Hr(r,i)}catch(i){yield fi(i)}}),ZD.apply(this,arguments)}function JD(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function e0(t,e,n){const r=S(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function la(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||ck(t,r)})}function ck(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(Fc(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),n0(t))}function t0(t,e,n){for(const r of n)r instanceof ik?(t.Ic.addReference(r.key,e),FY(t,r)):r instanceof sk?(I("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||ck(t,r.key)):N()}function FY(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(I("SyncEngine","New document in limbo: "+n),t.mc.add(r),n0(t))}function n0(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new T(ue.fromString(e)),r=t.Ac.next();t.yc.set(r,new TY(n)),t.gc=t.gc.insert(n,r),Qh(t.remoteStore,new $r(qt(Wo(n.path)),r,"TargetPurposeLimboResolution",ln.ct))}}function Hr(t,e,n){return r0.apply(this,arguments)}function r0(){return r0=D(function*(t,e,n){const r=S(t),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,u)=>{o.push(r.Rc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,(null==c?void 0:c.fromCache)?"not-current":"current"),c){i.push(c);const l=aD.Li(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=D(function*(u,c){const l=S(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>v.forEach(c,h=>v.forEach(h.Fi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>v.forEach(h.Bi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!pi(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=l.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);l.Ji=l.Ji.insert(h,g)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),r0.apply(this,arguments)}function PY(t,e){return s0.apply(this,arguments)}function s0(){return s0=D(function*(t,e){const n=S(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());const r=yield LO(n.localStore,e);n.currentUser=e,(i=n).Ec.forEach(o=>{o.forEach(a=>{a.reject(new b(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hr(n,r.er)}var i}),s0.apply(this,arguments)}function LY(t,e){const n=S(t),r=n.yc.get(e);if(r&&r.fc)return W().add(r.key);{let i=W();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}function f0(t){const e=S(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ak.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NY.bind(null,e),e.dc.nu=DY.bind(null,e.eventManager),e.dc.Pc=bY.bind(null,e.eventManager),e}function p0(t){const e=S(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OY.bind(null,e),e}class Zh{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return D(function*(){n.serializer=Oc(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function PO(t,e,n,r){return new KQ(t,e,n,r)}(this.persistence,new FO,e.initialUser,this.serializer)}createPersistence(e){return new rD(Uh.zs,this.serializer)}createSharedClientState(e){return new zO}terminate(){var e=this;return D(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class da{initialize(e,n){var r=this;return D(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>uk(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=PY.bind(null,r.syncEngine),yield function kD(t,e){return FD.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wY}createDatastore(e){const n=Oc(e.databaseInfo.databaseId),r=new rY(e.databaseInfo);return new oY(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>uk(this.syncEngine,a,0),o=GO.D()?new GO:new eY,new cY(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const l=new SY(r,i,s,o,a,u);return c&&(l.vc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=D(function*(n){const r=S(n);I("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield ia(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}class Xh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):je("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class YY{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ut.UNAUTHENTICATED,this.clientId=VN.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=D(function*(a){I("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(I("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return D(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(D(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=aa(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function Jh(t,e){return g0.apply(this,arguments)}function g0(){return g0=D(function*(t,e){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=D(function*(s){r.isEqual(s)||(yield LO(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),g0.apply(this,arguments)}function m0(t,e){return y0.apply(this,arguments)}function y0(){return y0=D(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield v0(t);I("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>ek(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>ek(e.remoteStore,s)),t._onlineComponents=e}),y0.apply(this,arguments)}function gk(t){return"FirebaseError"===t.name?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function v0(t){return _0.apply(this,arguments)}function _0(){return _0=D(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!gk(n))throw n;jn("Error using user provided cache. Falling back to memory cache: "+n),yield Jh(t,new Zh)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield Jh(t,new Zh);return t._offlineComponents}),_0.apply(this,arguments)}function ef(t){return w0.apply(this,arguments)}function w0(){return w0=D(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield m0(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield m0(t,new da))),t._onlineComponents}),w0.apply(this,arguments)}function ha(t){return b0.apply(this,arguments)}function b0(){return b0=D(function*(t){const e=yield ef(t),n=e.eventManager;return n.onListen=xY.bind(null,e.syncEngine),n.onUnlisten=AY.bind(null,e.syncEngine),n}),b0.apply(this,arguments)}function Dk(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const bk=new Map;function E0(t,e,n){if(!n)throw new b(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ek(t){if(!T.isDocumentKey(t))throw new b(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ck(t){if(T.isDocumentKey(t))throw new b(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":N()}function oe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new b(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nf(t);throw new b(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Tk{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new b(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new b(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function sZ(t,e,n,r){if(!0===e&&!0===r)throw new b(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Dk(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new b(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new b(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new b(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new b(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tk(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new rK;switch(n.type){case"firstParty":return new aK(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new b(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=bk.get(e);n&&(I("ComponentProvider","Removing Datastore"),bk.delete(e),n.terminate())}(this),Promise.resolve()}}class He{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new He(this.firestore,e,this._key)}}class bt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bt(this.firestore,e,this._query)}}class gr extends bt{constructor(e,n,r){super(e,n,Wo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new T(e))}withConverter(e){return new gr(this.firestore,e,this._path)}}function aZ(t,e,...n){if(t=ai(t),E0("collection","path",e),t instanceof Pc){const r=ue.fromString(e,...n);return Ck(r),new gr(t,null,r)}{if(!(t instanceof He||t instanceof gr))throw new b(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return Ck(r),new gr(t.firestore,null,r)}}function Sk(t,e,...n){if(t=ai(t),1===arguments.length&&(e=VN.A()),E0("doc","path",e),t instanceof Pc){const r=ue.fromString(e,...n);return Ek(r),new He(t,null,new T(r))}{if(!(t instanceof He||t instanceof gr))throw new b(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return Ek(r),new He(t.firestore,t instanceof gr?t.converter:null,new T(r))}}class uZ{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new yD(this,"async_queue_retry"),this.Xc=()=>{const n=Kh();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Kh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Kh();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new et;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return D(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!pi(n))throw n;I("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,je("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=PD.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&N()}verifyOperationInProgress(){}sa(){var e=this;return D(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function C0(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class Te extends Pc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new uZ,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ak(this),this._firestoreClient.terminate()}}function Qe(t){return t._firestoreClient||Ak(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ak(t){var e,n,r;const i=t._freezeSettings(),s=(a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new LK(t._databaseId,a,t._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Dk(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;t._firestoreClient=new YY(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(tt.fromBase64String(e))}catch(n){throw new b(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xs(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fa{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new b(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rk{constructor(e){this._methodName=e}}class I0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new b(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new b(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return j(this._lat,e._lat)||j(this._long,e._long)}}const dZ=/^__.*__$/;class hZ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yo(e,this.data,n,this.fieldTransforms)}}function kk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw N()}}class rf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new rf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return of(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(kk(this.ca)&&dZ.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class fZ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oc(e)}ya(e,n,r,i=!1){return new rf({ca:e,methodName:n,ga:r,path:Ue.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pa(t){const e=t._freezeSettings(),n=Oc(t._databaseId);return new fZ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function T0(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);x0("Data must be an object, but it was:",o,r);const a=Bk(r,o);let u,c;if(s.merge)u=new Yt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const h=Bc(e,d,n);if(!o.contains(h))throw new b(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Uk(l,h)||l.push(h)}u=new Yt(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new hZ(new Dt(a),u,c)}function As(t,e){if(jk(t=ai(t)))return x0("Unsupported field value:",e,t),Bk(t,e);if(t instanceof Rk)return function(n,r){if(!kk(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=As(o,r.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=ai(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return AR(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Ne.fromDate(n);return{timestampValue:Xo(r.serializer,i)}}if(n instanceof Ne){const i=new Ne(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Xo(r.serializer,i)}}if(n instanceof I0)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof xs)return{bytesValue:YR(r.serializer,n._byteString)};if(n instanceof He){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zw(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${nf(n)}`)}(t,e)}function Bk(t,e){const n={};return XN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(r,i)=>{const s=As(i,e.ha(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function jk(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof I0||t instanceof xs||t instanceof He||t instanceof Rk)}function x0(t,e,n){if(!jk(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=nf(n);throw e._a("an object"===r?t+" a custom object":t+" "+r)}var r}function Bc(t,e,n){if((e=ai(e))instanceof fa)return e._internalPath;if("string"==typeof e)return sf(t,e);throw of("Field path arguments must be of type string or ",t,!1,void 0,n)}const yZ=new RegExp("[~\\*/\\[\\]]");function sf(t,e,n){if(e.search(yZ)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fa(...e.split("."))._internalPath}catch(r){throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function of(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new b(w.INVALID_ARGUMENT,a+t+u)}function Uk(t,e){return t.some(n=>n.isEqual(e))}class A0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(af("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class vZ extends A0{data(){return super.data()}}function af(t,e){return"string"==typeof e?sf(t,e):e instanceof fa?e._internalPath:e._delegate._internalPath}function N0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ms{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ma extends A0{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(af("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class df extends ma{data(e={}){return super.data(e)}}class ya{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ms(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new df(this._firestore,this._userDataWriter,r.key,r,new Ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new b(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new df(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ms(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new df(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ms(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:bZ(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return N()}}class Si extends class wZ{convertValue(e,n="none"){switch(vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw N()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new I0(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wh(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uc(e));default:return null}}convertTimestamp(e){const n=mi(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);O(oO(r));const i=new gs(r.get(1),r.get(3)),s=new T(r.popFirst(5));return i.isEqual(n)||je(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}function EZ(t,e,n){t=oe(t,He);const r=oe(t.firestore,Te),i=N0(t.converter,e,n);return Uc(r,[T0(pa(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,xe.none())])}function CZ(t){return Uc(oe(t.firestore,Te),[new Zo(t._key,xe.none())])}function IZ(t,e){const n=oe(t.firestore,Te),r=Sk(t),i=N0(t.converter,e);return Uc(n,[T0(pa(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,xe.exists(!1))]).then(()=>r)}function Uc(t,e){return function(n,r){const i=new et;return n.asyncQueue.enqueueAndForget(D(function*(){return function MY(t,e,n){return WD.apply(this,arguments)}(yield function D0(t){return ef(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(Qe(t),e)}var ff=function(){return ff=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++)for(var s in n=arguments[r])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e},ff.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var VZ={includeMetadataChanges:!1};function k0(t,e){return void 0===e&&(e=VZ),new Re(function(n){var r=function TZ(t,...e){var n,r,i;t=ai(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||C0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(C0(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,c,l;if(t instanceof He)c=oe(t.firestore,Te),l=Wo(t._key.path),u={next:d=>{e[o]&&e[o](function R0(t,e,n){const r=n.docs.get(e._key),i=new Si(t);return new ma(t,i,e._key,r,new Ms(n.hasPendingWrites,n.fromCache),e.converter)}(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=oe(t,bt);c=oe(d.firestore,Te),l=d._query;const h=new Si(c);u={next:f=>{e[o]&&e[o](new ya(c,h,d,f))},error:e[o+1],complete:e[o+2]},function $k(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new b(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(d,h,f,p){const g=new Xh(p),m=new $D(h,g,f);return d.asyncQueue.enqueueAndForget(D(function*(){return function LD(t,e){return VD.apply(this,arguments)}(yield ha(d),m)})),()=>{g.Dc(),d.asyncQueue.enqueueAndForget(D(function*(){return function BD(t,e){return jD.apply(this,arguments)}(yield ha(d),m)}))}}(Qe(c),l,a,u)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function zZ(t,e){return void 0===e&&(e={}),function qZ(t){return k0(t,{includeMetadataChanges:!0}).pipe(ye(function(e){return e.docs}))}(t).pipe(ye(function(n){return n.map(function(r){return function Yk(t,e){var n;void 0===e&&(e={});var r=t.data(e);return t.exists()&&"object"==typeof r&&null!==r&&e.idField?ff(ff({},r),((n={})[e.idField]=t.id,n)):r}(r,e)})}))}class pf{constructor(e){return e}}const ZZ=Oo(zZ,!0),XZ=Oo(IZ,!0),JZ=Oo(aZ,!0),eX=Oo(CZ,!0),V0=Oo(Sk,!0),tF=Oo(EZ,!0);let tX=(()=>{class t{constructor(n){this.firestore=n}getList(){const n=JZ(this.firestore,"veiculo");return this.item$=ZZ(n),this.item$}includeDoc(n,r){XZ(n,r)}insertDoc(n,r,i){var s=this;return D(function*(){yield tF(V0(s.firestore,n,r),i)})()}updateDoc(n,r,i){var s=this;return D(function*(){yield tF(V0(s.firestore,n,r),i)})()}delete(n,r){var i=this;return D(function*(){yield eX(V0(i.firestore,n,r))})()}}return t.\u0275fac=function(n){return new(n||t)(V(pf))},t.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();!function r1(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=(()=>{var t;return null===(t=Sd())||void 0===t?void 0:t.config})()),!n)throw Nr.create("no-options");const s=es.get(i);if(s){if(Mu(n,s.options)&&Mu(r,s.config))return s;throw Nr.create("duplicate-app",{appName:i})}const o=new QA(i);for(const u of Nd.values())o.addComponent(u);const a=new kz(n,r,o);return es.set(i,a),a}({apiKey:"AIzaSyD89o0qg29MiWVWO7Sebdi3C1L03BWIwTo",authDomain:"contas-b9187.firebaseapp.com",projectId:"contas-b9187",storageBucket:"contas-b9187.appspot.com",messagingSenderId:"1011071984258",appId:"1:1011071984258:web:343dfbf40c40c98c33ca9b"});let nX=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ni({type:t,bootstrap:[v6]}),t.\u0275inj=zr({providers:[tX],imports:[[O3,p6,vx]]}),t})();(function g4(){HS=!1})(),N3().bootstrapModule(nX).catch(t=>console.error(t))}},te=>{te(te.s=317)}]);